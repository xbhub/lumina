"use strict";layui.define("jquery",function(l){function e(l){}var h=layui.$;e.prototype.load=function(l){var t,i,n,e=this,o=0,r=h((l=l||{}).elem);if(r[0]){var a=h(l.scrollElem||document),c=l.mb||50,m=!("isAuto"in l)||l.isAuto,f=l.end||"没有更多了",s=l.scrollElem&&l.scrollElem!==document,u="<cite>加载更多</cite>",y=h('<div class="layui-flow-more"><a href="javascript:;">'+u+"</a></div>");r.find(".layui-flow-more")[0]||r.append(y);var d,p=function(l,e){l=h(l),y.before(l),(e=0==e||null)?y.html(f):y.find("a").html(u),i=e,t=null,d&&d()},v=function(){t=!0,y.find("a").html('<i class="layui-anim layui-anim-rotate layui-anim-loop fa ">&#xe63e;</i>'),"function"==typeof l.done&&l.done(++o,p)};return(v(),y.find("a").on("click",function(){h(this);i||t||v()}),l.isLazyimg&&(d=e.lazyimg({elem:l.elem+" img",scrollElem:l.scrollElem})),m)?(a.on("scroll",function(){var e=h(this),o=e.scrollTop();n&&clearTimeout(n),i||(n=setTimeout(function(){var l=(s?e:h(window)).height();(s?e.prop("scrollHeight"):document.documentElement.scrollHeight)-o-l<=c&&(t||v())},100))}),e):e}},e.prototype.lazyimg=function(l){function c(e,l){var o,t=s.scrollTop(),i=t+l,l=y?e.offset().top-s.offset().top+t:e.offset().top;t<=l&&l<=i&&(e.attr("src")||(o=e.attr("lay-src"),layui.img(o,function(){var l=m.lazyimg.elem.eq(f);e.attr("src",o).removeAttr("lay-src"),l[0]&&n(l),f++})))}var e,m=this,f=0,s=h((l=l||{}).scrollElem||document),u=l.elem||"img",y=l.scrollElem&&l.scrollElem!==document,n=function(l,e){var o=(y?e||s:h(window)).height(),t=s.scrollTop(),i=t+o;if(m.lazyimg.elem=h(u),l)c(l,o);else for(var n=0;n<m.lazyimg.elem.length;n++){var r=m.lazyimg.elem.eq(n),a=y?r.offset().top-s.offset().top+t:r.offset().top;if(c(r,o),f=n,i<a)break}};return n(),s.on("scroll",function(){var l=h(this);e&&clearTimeout(e),e=setTimeout(function(){n(null,l)},50)}),n},l("flow",new e)});