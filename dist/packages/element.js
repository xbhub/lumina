"use strict";layui.define(["jquery","util"],function(t){var r=layui.$,c=(layui.hint(),layui.device()),e=layui.util,o="element",u="layui-this",d="layui-show",a=function(){this.config={}};a.prototype.set=function(t){return r.extend(!0,this.config,t),this},a.prototype.on=function(t,a){return layui.onevent.call(this,o,t,a)},a.prototype.tabAdd=function(t,a){var i=r(".layui-tab[lay-filter="+t+"]"),e=i.children(".layui-tab-title"),l=e.children(".layui-tab-bar"),t=i.children(".layui-tab-content"),i='<li lay-id="'+(a.id||"")+'"'+(a.context?" lay-context":"")+(a.attr?' lay-attr="'+a.attr+'"':"")+">"+(a.title||"unnaming")+"</li>";return l[0]?l.before(i):e.append(i),t.append('<div class="layui-tab-item">'+(a.content||"")+"</div>"),m.hideTabMore(!0),m.tabAuto(),this},a.prototype.tabDelete=function(t,a){a=r(".layui-tab[lay-filter="+t+"]").children(".layui-tab-title").find('>li[lay-id="'+a+'"]');return m.tabDelete(null,a),this},a.prototype.tabChange=function(t,a){a=r(".layui-tab[lay-filter="+t+"]").children(".layui-tab-title").find('>li[lay-id="'+a+'"]');return m.tabClick.call(a[0],null,null,a),this},a.prototype.tab=function(i){i=i||{},n.on("click",i.headerElem,function(t){var a=r(this).index();m.tabClick.call(this,t,a,null,i)})},a.prototype.progress=function(t,a){var i="layui-progress",t=r("."+i+"[lay-filter="+t+"]").find("."+i+"-bar"),i=t.find("."+i+"-text");return t.css("width",a),i.text(a),this};var f=".layui-nav",p="layui-nav-item",l="layui-nav-bar",h="layui-nav-tree",y="layui-nav-child",v="fa fa-angle-right",b="layui-anim layui-anim-upbit",m={tabClick:function(t,a,i,e){e=e||{};var l=i||r(this),a=a||l.parent().children("li").index(l),n=e.headerElem?l.parent():l.parents(".layui-tab").eq(0),s=e.bodyElem?r(e.bodyElem):n.children(".layui-tab-content").children(".layui-tab-item"),i=l.find("a"),e=n.attr("lay-filter");"javascript:;"!==i.attr("href")&&"_blank"===i.attr("target")||(l.addClass(u).siblings().removeClass(u),s.eq(a).addClass(d).siblings().removeClass(d)),layui.event.call(this,o,"tab("+e+")",{elem:n,index:a})},tabContext:function(t,a,i){t.preventDefault();var e=i||r(this);void 0===e.attr("lay-context")||0<e.find(".m-subtab").length||(a=a||e.parent().children("li").index(e),a=['<div class="fixed m-subtab" style="z-index:99999;left: '+t.pageX+"px;top: "+t.pageY+'px;"><dl class="layui-nav-child layui-anim-fadein layui-anim layui-anim-upbit layui-show">','<dd lumina-event="refreshThisTab" data-idx="'+a+'"  class="border-b"><a href="javascript:;">刷新</a></dd>','<dd lumina-event="closeThisTabs" data-idx="'+a+'"><a href="javascript:;">关闭</a></dd>','<dd lumina-event="closeOtherTabs" data-idx="'+a+'"><a href="javascript:;">关闭其它标签</a></dd>','<dd lumina-event="closeAllTabs" data-idx="'+a+'"><a href="javascript:;">关闭全部标签</a></dd>','<dd lumina-event="openThisTab" data-idx="'+a+'"><a href="javascript:;">新窗口打开</a></dd></dl></div>'].join(""),e.append(a),e.on("mouseleave",function(){e.find(".m-subtab").remove()}))},tabDelete:function(t,a){var i=a||r(this).parent(),e=i.index(),l=i.parents(".layui-tab").eq(0),n=l.children(".layui-tab-content").children(".layui-tab-item"),a=l.attr("lay-filter");i.hasClass(u)&&(i.next()[0]?m.tabClick.call(i.next()[0],null,e+1):i.prev()[0]&&m.tabClick.call(i.prev()[0],null,e-1)),i.remove(),n.eq(e).remove(),setTimeout(function(){m.tabAuto()},50),layui.event.call(this,o,"tabDelete("+a+")",{elem:l,index:e})},tabAuto:function(){var e="layui-tab-bar",l="fa-close",n=this;r(".layui-tab").each(function(){var t=r(this),a=t.children(".layui-tab-title"),i=(t.children(".layui-tab-content").children(".layui-tab-item"),'lay-stope="tabmore"'),i=r('<span class="layui-unselect layui-tab-bar" '+i+"><i "+i+' class="fa">&#xe61a;</i></span>');n===window&&8!=c.ie&&m.hideTabMore(!0),t.attr("lay-allowClose")&&a.find("li").each(function(){var t,a=r(this);a.find("."+l)[0]||((t=r('<i class="fa layui-unselect '+l+'"></i>')).on("click",m.tabDelete),a.append(t))}),"string"!=typeof t.attr("lay-unauto")&&(a.prop("scrollWidth")>a.outerWidth()+1?a.find("."+e)[0]||(a.append(i),t.attr("overflow",""),i.on("click",function(t){a[this.title?"removeClass":"addClass"]("layui-tab-more"),this.title=this.title?"":"收缩"})):(a.find("."+e).remove(),t.removeAttr("overflow")))})},hideTabMore:function(t){var a=r(".layui-tab-title");!0!==t&&"tabmore"===r(t.target).attr("lay-stope")||(a.removeClass("layui-tab-more"),a.find(".layui-tab-bar").attr("title",""))},clickThis:function(){var t=r(this),a=t.parents(f),i=a.attr("lay-filter"),e=t.parent(),l=t.siblings("."+y),n="string"==typeof e.attr("lay-unselect");"javascript:;"!==t.attr("href")&&"_blank"===t.attr("target")||n||l[0]||(a.find("."+u).removeClass(u),e.addClass(u)),a.hasClass(h)&&(l.removeClass(b),l[0]&&(e["none"===l.css("display")?"addClass":"removeClass"](p+"ed"),"all"===a.attr("lay-shrink")&&e.siblings().removeClass(p+"ed"))),layui.event.call(this,o,"nav("+i+")",t)},collapse:function(){var t=r(this),a=(t.find(".layui-colla-icon"),t.siblings(".layui-colla-content")),i=t.parents(".layui-collapse").eq(0),e=i.attr("lay-filter"),l="none"===a.css("display");"string"==typeof i.attr("lay-accordion")&&((i=i.children(".layui-colla-item").children("."+d)).siblings(".layui-colla-title").children(".layui-colla-icon"),i.removeClass(d)),a[l?"addClass":"removeClass"](d),layui.event.call(this,o,"collapse("+e+")",{title:t,content:a,show:l})},previewMedia:function(){r(".J_player").each(function(){var t=r(this),a=t.data("type"),i=t.data("uri");t.unbind(),t.click(function(){e.loadJs("//cdn.jsdelivr.net/npm/xgplayer@1.1.7/browser/index.js",function(){"mp4"==a||"video"==a?layer.open({type:1,title:!1,area:"800px",closeBtn:1,shade:.8,shadeClose:!0,offset:"60px",content:'<div id="xgvideo" class="overflow-hidden"></div>',success:function(t,a){new Player({id:"xgvideo",fluid:!0,autoplay:!0,ignores:["theme-default","cover","backward","forward","meta","next","prev","template"],url:[{name:"",src:i,poster:""}]})}}):"audio"==a||"mp3"==a?e.loadJs("//cdn.jsdelivr.net/npm/xgplayer-music/browser/index.js",function(){layer.open({type:1,title:!1,area:"600px",closeBtn:1,shade:0,offset:"60px",shadeClose:!0,content:'<div id="xgmusic" class="overflow-hidden"></div>',success:function(t,a){new Music({id:"xgmusic",url:[{src:i,name:"音频预览",vid:"000001",poster:""}],volume:.8,width:"100%",height:50,preloadNext:!0})}})}):layer.msg("暂不支持"+a+"格式文件播放")})})})}};a.prototype.render=a.prototype.init=function(t,a){var i=a?'[lay-filter="'+a+'"]':"",a={tab:function(){},nav:function(){var n={},s={},o={};r(f+i).each(function(t){var a=r(this),i=r('<span class="'+l+'"></span>'),e=a.find("."+p);a.find("."+l)[0]||(a.append(i),e.on("mouseenter",function(){(function(t,a,i){var e=r(this),l=e.find("."+y);a.hasClass(h)?t.css({top:e.position().top,height:e.children("a").outerHeight(),opacity:1}):(l.addClass(b),t.css({left:e.position().left+parseFloat(e.css("marginLeft")),top:e.position().top+e.height()-t.height()}),n[i]=setTimeout(function(){t.css({width:e.width(),opacity:1})},c.ie&&c.ie<10?0:200),clearTimeout(o[i]),"block"===l.css("display")&&clearTimeout(s[i]),s[i]=setTimeout(function(){l.addClass(d),e.find("."+v).addClass(v+"d")},300))}).call(this,i,a,t)}).on("mouseleave",function(){a.hasClass(h)||(clearTimeout(s[t]),s[t]=setTimeout(function(){a.find("."+y).removeClass(d),a.find("."+v).removeClass(v+"d")},300))}),a.on("mouseleave",function(){clearTimeout(n[t]),o[t]=setTimeout(function(){a.hasClass(h)?i.css({height:0,top:i.position().top+i.height()/2,opacity:0}):i.css({width:0,left:i.position().left+i.width()/2,opacity:0})},200)})),e.find("a").each(function(){var t=r(this);t.parent(),t.siblings("."+y);t.off("click",m.clickThis).on("click",m.clickThis)})})},breadcrumb:function(){r(".layui-breadcrumb"+i).each(function(){var t=r(this),a="lay-separator",i=t.attr(a)||"/",e=t.find("a");e.next("span["+a+"]")[0]||(e.each(function(t){t!==e.length-1&&r(this).after("<span "+a+">"+i+"</span>")}),t.css("visibility","visible"))})},progress:function(){var e="layui-progress";r("."+e+i).each(function(){var t=r(this),a=t.find(".layui-progress-bar"),i=a.attr("lay-percent");a.css("width",/^.+\/.+$/.test(i)?100*new Function("return "+i)()+"%":i),t.attr("lay-showPercent")&&setTimeout(function(){a.html('<span class="'+e+'-text">'+i+"</span>")},350)})},collapse:function(){r(".layui-collapse"+i).each(function(){r(this).find(".layui-colla-item").each(function(){var t=r(this),a=t.find(".layui-colla-title");t.find(".layui-colla-content").css("display");a.find(".layui-colla-icon").remove(),a.append('<i class="fa layui-colla-icon"></i>'),a.off("click",m.collapse).on("click",m.collapse)})})},media:function(){m.previewMedia.call({})},tip:function(){r("[lay-tip]").each(function(){var t=r(this);t.on("mouseenter",function(){layer.tips(t.attr("lay-tip"),t,{tips:1,time:0})}).on("mouseleave",function(){})})}};return a[t]?a[t]():layui.each(a,function(t,a){a()})};var i=new a,n=r(document);i.render();a=".layui-tab>.layui-tab-title>li";n.off().on("click",a,m.tabClick),n.on("contextmenu",a,m.tabContext),n.on("click",m.hideTabMore),t(o,i)});