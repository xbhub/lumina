!function(n){"use strict";function a(){this.v=y.version}function d(e){n.console&&console.error&&console.error("Layui hint: "+e)}var e,m=document,y={modules:{},status:{},timeout:10,event:{},version:"3.0.0"},f=(e=m.currentScript?m.currentScript.src:function(){for(var e,t=m.scripts,o=t.length-1,a=o;0<a;a--)if("interactive"===t[a].readyState){e=t[a].src;break}return e||t[o].src}()).substring(0,e.lastIndexOf("/")+1),g="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),h={laydate:"packages/laydate/laydate",laypage:"packages/laypage",layer:"packages/layer",laytpl:"packages/laytpl",form:"packages/form",tree:"packages/tree",table:"packages/table",element:"packages/element",rate:"packages/rate",colorpicker:"packages/colorpicker",slider:"packages/slider",carousel:"packages/carousel",flow:"packages/flow",util:"packages/util",code:"packages/code/code",dropdown:"packages/dropdown",transfer:"packages/transfer",admin:"modules/admin"};a.prototype.cache=y,a.prototype.define=function(e,a){function t(){function o(e,t){layui[e]=t,y.status[e]=!0}return"function"==typeof a&&a(function(e,t){o(e,t),y.callback[e]=function(){a(o)}}),this}var o=this;return"function"==typeof e&&(a=e,e=[]),layui["layui.all"]||!layui["layui.all"]&&layui["layui.mobile"]?t.call(o):(o.use(e,t),o)},a.prototype.use=function(o,e,t){var a=this,n=y.dir=y.dir||f,i=m.getElementsByTagName("head")[0];o="string"==typeof o?[o]:o,window.jQuery&&jQuery.fn.on&&(a.each(o,function(e,t){"jquery"===t&&o.splice(e,1)}),layui.jquery=layui.$=jQuery);var r=o[0],c=0;function s(e,t){var o="PLaySTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/;"load"!==e.type&&!o.test((e.currentTarget||e.srcElement).readyState)||(y.modules[r]=t,i.removeChild(u),function e(){return++c>1e3*y.timeout/4?d(r+" is not a valid module"):void(y.status[r]?l():setTimeout(e,4))}())}function l(){t.push(layui[r]),1<o.length?a.use(o.slice(1),e,t):"function"==typeof e&&e.apply(layui,t)}if(t=t||[],y.host=y.host||(n.match(/\/\/([\s\S]+?)\//)||["//"+location.host+"/"])[0],0===o.length||layui["layui.all"]&&h[r]||!layui["layui.all"]&&layui["layui.mobile"]&&h[r])return l(),a;var u,p=(p=(h[r]?n:!/^\{\/\}/.test(a.modules[r])&&y.base||"")+(a.modules[r]||r)+".js").replace(/^\{\/\}/,"");return!y.modules[r]&&layui[r]&&(y.modules[r]=p),y.modules[r]?function e(){return++c>1e3*y.timeout/4?d(r+" is not a valid module"):void("string"==typeof y.modules[r]&&y.status[r]?l():setTimeout(e,4))}():((u=m.createElement("script")).async=!0,u.charset="utf-8",u.src=p+((n=!0===y.version?y.v||(new Date).getTime():y.version||"")?"?v="+n:""),i.appendChild(u),!u.attachEvent||u.attachEvent.toString&&u.attachEvent.toString().indexOf("[native code")<0||g?u.addEventListener("load",function(e){s(e,p)},!1):u.attachEvent("onreadystatechange",function(e){s(e,p)}),y.modules[r]=p),a},a.prototype.getStyle=function(e,t){e=e.currentStyle||n.getComputedStyle(e,null);return e[e.getPropertyValue?"getPropertyValue":"getAttribute"](t)},a.prototype.link=function(t,o,e){var a=this,n=m.createElement("link"),i=m.getElementsByTagName("head")[0],e=((e="string"==typeof o?o:e)||t).replace(/\.|\//g,""),r=n.id="layuicss-"+e,c=0;return n.rel="stylesheet",n.href=t+(y.debug?"?v="+(new Date).getTime():""),n.media="all",m.getElementById(r)||i.appendChild(n),"function"!=typeof o||function e(){return++c>1e3*y.timeout/100?d(t+" timeout"):void(1989===parseInt(a.getStyle(m.getElementById(r),"width"))?o():setTimeout(e,100))}(),a},y.callback={},a.prototype.factory=function(e){if(layui[e])return"function"==typeof y.callback[e]?y.callback[e]:null},a.prototype.addcss=function(e,t,o){return layui.link(y.base+e,t,o)},a.prototype.img=function(e,t,o){var a=new Image;if(a.src=e,a.complete)return t(a);a.onload=function(){a.onload=null,"function"==typeof t&&t(a)},a.onerror=function(e){a.onerror=null,"function"==typeof o&&o(e)}},a.prototype.config=function(e){for(var t in e=e||{})y[t]=e[t];return this},a.prototype.modules=function(){var e,t={};for(e in h)t[e]=h[e];return t}(),a.prototype.extend=function(e){for(var t in e=e||{})this[t]||this.modules[t]||(this.modules[t]=e[t]);return this},a.prototype.router=function(e){var o={path:[],search:{},hash:((e=e||location.hash).match(/[^#](#.*$)/)||[])[1]||""};return/^#\//.test(e)&&(e=e.replace(/^#\//,""),o.href="/"+e,e=e.replace(/([^#])(#.*$)/,"$1").split("/")||[],this.each(e,function(e,t){/^\w+=/.test(t)?(t=t.split("="),o.search[t[0]]=t[1]):o.path.push(t)})),o},a.prototype.data=function(e,t,o){if(e=e||"layui",o=o||localStorage,n.JSON&&n.JSON.parse){if(null===t)return delete o[e];t="object"==typeof t?t:{key:t};try{var a=JSON.parse(o[e])}catch(e){a={}}return"value"in t&&(a[t.key]=t.value),t.remove&&delete a[t.key],o[e]=JSON.stringify(a),t.key?a[t.key]:a}},a.prototype.sessionData=function(e,t){return this.data(e,t,sessionStorage)},a.prototype.device=function(e){function t(e){var t=new RegExp(e+"/([^\\s\\_\\-]+)");return(e=(o.match(t)||[])[1])||!1}var o=navigator.userAgent.toLowerCase(),a={os:/windows/.test(o)?"windows":/linux/.test(o)?"linux":/iphone|ipod|ipad|ios/.test(o)?"ios":/mac/.test(o)?"mac":void 0,ie:!!(n.ActiveXObject||"ActiveXObject"in n)&&((o.match(/msie\s(\d+)/)||[])[1]||"11"),weixin:t("micromessenger")};return e&&!a[e]&&(a[e]=t(e)),a.android=/android/.test(o),a.ios="ios"===a.os,a.mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)),a},a.prototype.hint=function(){return{error:d}},a.prototype.each=function(e,t){if("function"!=typeof t)return this;if((e=e||[]).constructor===Object){for(var o in e)if(t.call(e[o],o,e[o]))break}else for(o=0;o<e.length&&!t.call(e[o],o,e[o]);o++);return this},a.prototype.sort=function(e,a,t){e=JSON.parse(JSON.stringify(e||[]));return a&&(e.sort(function(e,t){var o=/^-?\d+$/,e=e[a],t=t[a];return o.test(e)&&(e=parseFloat(e)),o.test(t)&&(t=parseFloat(t)),e&&!t?1:!e&&t?-1:t<e?1:e<t?-1:0}),t&&e.reverse()),e},a.prototype.stope=function(t){t=t||n.event;try{t.stopPropagation()}catch(e){t.cancelBubble=!0}},a.prototype.onevent=function(e,t,o){return"string"!=typeof e||"function"!=typeof o?this:a.event(e,t,null,o)},a.prototype.event=a.event=function(e,t,o,a){function n(e,t){!1===(t&&t.call(i,o))&&null===r&&(r=!1)}var i=this,r=null,c=t.match(/\((.*)\)$/)||[],t=(e+"."+t).replace(c[0],""),s=c[1]||"";return a?(y.event[t]=y.event[t]||{},y.event[t][s]=[a],this):(layui.each(y.event[t],function(e,t){"{*}"!==s?(""===e&&layui.each(t,n),s&&e===s&&layui.each(t,n)):layui.each(t,n)}),r)},n.layui=new a}(window);!function(d){"use strict";function t(e){var t=this;t.index=++y.index,t.config=u.extend({},t.config,c.config,e),document.body?t.creat():setTimeout(function(){t.creat()},30)}d.layui&&layui.define;var u,f,e,c={getPath:(e=document.currentScript?document.currentScript.src:function(){for(var e,t=document.scripts,i=t.length-1,n=i;0<n;n--)if("interactive"===t[n].readyState){e=t[n].src;break}return e||t[i].src}()).substring(0,e.lastIndexOf("/")+1),config:{},end:{},minIndex:0,minLeft:[],btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"],getStyle:function(e,t){e=e.currentStyle||d.getComputedStyle(e,null);return e[e.getPropertyValue?"getPropertyValue":"getAttribute"](t)},link:function(e,t,i){var n,a;y.path&&(n=document.getElementsByTagName("head")[0],a=document.createElement("link"),i="layuicss-"+((i="string"==typeof t?t:i)||e).replace(/\.|\//g,""),a.rel="stylesheet",a.href=y.path+e,a.id=i,document.getElementById(i)||n.appendChild(a))}},y={v:"3.1.1",ie:(e=navigator.userAgent.toLowerCase(),!!(d.ActiveXObject||"ActiveXObject"in d)&&((e.match(/msie\s(\d+)/)||[])[1]||"11")),index:d.layer&&d.layer.v?1e5:0,path:c.getPath,config:function(e,t){return e=e||{},y.cache=c.config=u.extend({},c.config,e),y.path=c.config.path||y.path,"string"==typeof e.extend&&(e.extend=[e.extend]),c.config.path&&y.ready(),e.extend,this},ready:function(e){return this},alert:function(e,t,i){var n="function"==typeof t;return n&&(i=t),y.open(u.extend({content:e,yes:i},n?{}:t))},confirm:function(e,t,i,n){var a="function"==typeof t;return a&&(n=i,i=t),y.open(u.extend({content:e,btn:c.btn,yes:i,btn2:n},a?{}:t))},msg:function(e,t,i){var n="function"==typeof t,a=c.config.skin,o=(a?a+" "+a+"-msg":"")||"layui-layer-msg",a=p.anim.length-1;return n&&(i=t),y.open(u.extend({content:e,time:3e3,shade:!1,skin:o,title:!1,closeBtn:!1,btn:!1,resize:!1,end:i},n&&!c.config.skin?{skin:o+" layui-layer-hui",anim:a}:(-1!==(t=t||{}).icon&&(void 0!==t.icon||c.config.skin)||(t.skin=o+" "+(t.skin||"layui-layer-hui")),t)))},load:function(e,t){return y.open(u.extend({type:3,icon:e||1,resize:!1,shade:.01},t))},tips:function(e,t,i){return y.open(u.extend({type:4,content:[e,t],closeBtn:!1,time:3e3,shade:!1,resize:!1,fixed:!1,maxWidth:210},i))}};t.pt=t.prototype;var p=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];function h(e){return i.skin?" "+i.skin+" "+i.skin+"-"+e:""}p.anim=["layer-anim-00","layer-anim-01","layer-anim-02","layer-anim-03","layer-anim-04","layer-anim-05","layer-anim-06"],t.pt.config={type:0,shade:.3,fixed:!0,move:p[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,anim:0,isOutAnim:!0,icon:-1,moveType:1,resize:!0,scrollbar:!0,tips:2},t.pt.vessel=function(e,t){var i=this.index,n=this.config,a=n.zIndex+i,o="object"==typeof n.title,s=n.maxmin&&(1===n.type||2===n.type),o=n.title?'<div class="layui-layer-title" style="'+(o?n.title[1]:"")+'">'+(o?n.title[0]:n.title)+"</div>":"";return n.zIndex=a,t([n.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+i+'" times="'+i+'" style="z-index:'+(a-1)+'; "></div>':"",'<div class="'+p[0]+" layui-layer-"+c.type[n.type]+(0!=n.type&&2!=n.type||n.shade?"":" layui-layer-border")+" "+(n.skin||"")+'" id="'+p[0]+i+'" type="'+c.type[n.type]+'" times="'+i+'" showtime="'+n.time+'" conType="'+(e?"object":"string")+'" style="z-index: '+a+"; width:"+n.area[0]+";height:"+n.area[1]+(n.fixed?"":";position:absolute;")+'">'+(e&&2!=n.type?"":o)+'<div id="'+(n.id||"")+'" class="layui-layer-content'+(0==n.type&&-1!==n.icon?" layui-layer-padding":"")+(3==n.type?" layui-layer-loading"+n.icon:"")+'">'+(0==n.type&&-1!==n.icon?'<i class="layui-layer-ico layui-layer-ico'+n.icon+'"></i>':"")+((1!=n.type||!e)&&n.content||"")+'</div><span class="layui-layer-setwin">'+(s=s?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"",n.closeBtn&&(s+='<a class="layui-layer-ico '+p[7]+" "+p[7]+(n.title?n.closeBtn:4==n.type?"1":"2")+'" href="javascript:;"></a>'),s)+"</span>"+(n.btn?function(){var e="";"string"==typeof n.btn&&(n.btn=[n.btn]);for(var t=0,i=n.btn.length;t<i;t++)e+='<a class="'+p[6]+t+'">'+n.btn[t]+"</a>";return'<div class="'+p[6]+" layui-layer-btn-"+(n.btnAlign||"")+'">'+e+"</div>"}():"")+(n.resize?'<span class="layui-layer-resize"></span>':"")+"</div>"],o,u('<div class="layui-layer-move"></div>')),this},t.pt.creat=function(){var e,n=this,a=n.config,o=n.index,s="object"==typeof(l=a.content),r=u("body");if(!a.id||!u("#"+a.id)[0]){switch("string"==typeof a.area&&(a.area="auto"===a.area?["",""]:[a.area,""]),a.shift&&(a.anim=a.shift),6==y.ie&&(a.fixed=!1),a.type){case 0:a.btn="btn"in a?a.btn:c.btn[0],y.closeAll("dialog");break;case 2:var l=a.content=s?a.content:[a.content||"","auto"];a.content='<iframe scrolling="'+(a.content[1]||"auto")+'" allowtransparency="true" id="'+p[4]+o+'" name="'+p[4]+o+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+a.content[0]+'"></iframe>';break;case 3:delete a.title,delete a.closeBtn,-1===a.icon&&a.icon,y.closeAll("loading");break;case 4:s||(a.content=[a.content,"body"]),a.follow=a.content[1],a.content=a.content[0]+'<i class="layui-layer-TipsG"></i>',delete a.title,a.tips="object"==typeof a.tips?a.tips:[a.tips,!0],a.tipsMore||y.closeAll("tips")}n.vessel(s,function(e,t,i){r.append(e[0]),s?2==a.type||4==a.type?u("body").append(e[1]):l.parents("."+p[0])[0]||(l.data("display",l.css("display")).show().addClass("layui-layer-wrap").wrap(e[1]),u("#"+p[0]+o).find("."+p[5]).before(t)):r.append(e[1]),u(".layui-layer-move")[0]||r.append(c.moveElem=i),n.layero=u("#"+p[0]+o),a.scrollbar||p.html.css("overflow","hidden").attr("layer-full",o)}).auto(o),u("#layui-layer-shade"+n.index).css({"background-color":a.shade[1]||"#000",opacity:a.shade[0]||a.shade}),2==a.type&&6==y.ie&&n.layero.find("iframe").attr("src",l[0]),4==a.type?n.tips():n.offset(),a.fixed&&f.on("resize",function(){n.offset(),(/^\d+%$/.test(a.area[0])||/^\d+%$/.test(a.area[1]))&&n.auto(o),4==a.type&&n.tips()}),a.time<=0||setTimeout(function(){y.close(n.index)},a.time),n.move().callback(),p.anim[a.anim]&&(e="layer-anim "+p.anim[a.anim],n.layero.addClass(e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){u(this).removeClass(e)})),a.isOutAnim&&n.layero.data("isOutAnim",!0)}},t.pt.auto=function(e){var t=this.config,i=u("#"+p[0]+e);""===t.area[0]&&0<t.maxWidth&&(y.ie&&y.ie<8&&t.btn&&i.width(i.innerWidth()),i.outerWidth()>t.maxWidth&&i.width(t.maxWidth));var n=[i.innerWidth(),i.innerHeight()],a=i.find(p[1]).outerHeight()||0,o=i.find("."+p[6]).outerHeight()||0,e=function(e){(e=i.find(e)).height(n[1]-a-o-2*(0|parseFloat(e.css("padding-top"))))};return 2===t.type?e("iframe"):""===t.area[1]?0<t.maxHeight&&i.outerHeight()>t.maxHeight?(n[1]=t.maxHeight,e("."+p[5])):t.fixed&&n[1]>=f.height()&&(n[1]=f.height(),e("."+p[5])):e("."+p[5]),this},t.pt.offset=function(){var e=this,t=e.config,i=e.layero,n=[i.outerWidth(),i.outerHeight()],a="object"==typeof t.offset;e.offsetTop=(f.height()-n[1])/2,e.offsetLeft=(f.width()-n[0])/2,a?(e.offsetTop=t.offset[0],e.offsetLeft=t.offset[1]||e.offsetLeft):"auto"!==t.offset&&("t"===t.offset?e.offsetTop=0:"r"===t.offset?e.offsetLeft=f.width()-n[0]:"b"===t.offset?e.offsetTop=f.height()-n[1]:"l"===t.offset?e.offsetLeft=0:"lt"===t.offset?(e.offsetTop=0,e.offsetLeft=0):"lb"===t.offset?(e.offsetTop=f.height()-n[1],e.offsetLeft=0):"rt"===t.offset?(e.offsetTop=0,e.offsetLeft=f.width()-n[0]):"rb"===t.offset?(e.offsetTop=f.height()-n[1],e.offsetLeft=f.width()-n[0]):e.offsetTop=t.offset),t.fixed||(e.offsetTop=/%$/.test(e.offsetTop)?f.height()*parseFloat(e.offsetTop)/100:parseFloat(e.offsetTop),e.offsetLeft=/%$/.test(e.offsetLeft)?f.width()*parseFloat(e.offsetLeft)/100:parseFloat(e.offsetLeft),e.offsetTop+=f.scrollTop(),e.offsetLeft+=f.scrollLeft()),i.attr("minLeft")&&(e.offsetTop=f.height()-(i.find(p[1]).outerHeight()||0),e.offsetLeft=i.css("left")),i.css({top:e.offsetTop,left:e.offsetLeft})},t.pt.tips=function(){var e=this.config,t=this.layero,i=[t.outerWidth(),t.outerHeight()],n=u(e.follow),a={width:(n=!n[0]?u("body"):n).outerWidth(),height:n.outerHeight(),top:n.offset().top,left:n.offset().left},o=t.find(".layui-layer-TipsG"),n=e.tips[0];e.tips[1]||o.remove(),a.autoLeft=function(){0<a.left+i[0]-f.width()?(a.tipLeft=a.left+a.width-i[0],o.css({right:12,left:"auto"})):a.tipLeft=a.left},a.where=[function(){a.autoLeft(),a.tipTop=a.top-i[1]-10,o.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",e.tips[1])},function(){a.tipLeft=a.left+a.width+10,a.tipTop=a.top,o.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",e.tips[1])},function(){a.autoLeft(),a.tipTop=a.top+a.height+10,o.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",e.tips[1])},function(){a.tipLeft=a.left-i[0]-10,a.tipTop=a.top,o.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",e.tips[1])}],a.where[n-1](),1===n?a.top-(f.scrollTop()+i[1]+16)<0&&a.where[2]():2===n?0<f.width()-(a.left+a.width+i[0]+16)||a.where[3]():3===n?0<a.top-f.scrollTop()+a.height+i[1]+16-f.height()&&a.where[0]():4===n&&0<i[0]+16-a.left&&a.where[1](),t.find("."+p[5]).css({"background-color":e.tips[1],"padding-right":e.closeBtn?"30px":""}),t.css({left:a.tipLeft-(e.fixed?f.scrollLeft():0),top:a.tipTop-(e.fixed?f.scrollTop():0)})},t.pt.move=function(){var o=this,s=o.config,e=u(document),r=o.layero,t=r.find(s.move),i=r.find(".layui-layer-resize"),l={};return s.move&&t.css("cursor","move"),t.on("mousedown",function(e){e.preventDefault(),s.move&&(l.moveStart=!0,l.offset=[e.clientX-parseFloat(r.css("left")),e.clientY-parseFloat(r.css("top"))],c.moveElem.css("cursor","move").show())}),i.on("mousedown",function(e){e.preventDefault(),l.resizeStart=!0,l.offset=[e.clientX,e.clientY],l.area=[r.outerWidth(),r.outerHeight()],c.moveElem.css("cursor","se-resize").show()}),e.on("mousemove",function(e){var t,i,n,a;l.moveStart&&(n=e.clientX-l.offset[0],a=e.clientY-l.offset[1],i="fixed"===r.css("position"),e.preventDefault(),l.stX=i?0:f.scrollLeft(),l.stY=i?0:f.scrollTop(),s.moveOut||(t=f.width()-r.outerWidth()+l.stX,i=f.height()-r.outerHeight()+l.stY,t<(n=n<l.stX?l.stX:n)&&(n=t),i<(a=a<l.stY?l.stY:a)&&(a=i)),r.css({left:n,top:a})),s.resize&&l.resizeStart&&(n=e.clientX-l.offset[0],a=e.clientY-l.offset[1],e.preventDefault(),y.style(o.index,{width:l.area[0]+n,height:l.area[1]+a}),l.isResize=!0,s.resizing&&s.resizing(r))}).on("mouseup",function(e){l.moveStart&&(delete l.moveStart,c.moveElem.hide(),s.moveEnd&&s.moveEnd(r)),l.resizeStart&&(delete l.resizeStart,c.moveElem.hide())}),o},t.pt.callback=function(){var t=this,i=t.layero,n=t.config;t.openLayer(),n.success&&(2==n.type?i.find("iframe").on("load",function(){n.success(i,t.index)}):n.success(i,t.index)),6==y.ie&&t.IE6(i),i.find("."+p[6]).children("a").on("click",function(){var e=u(this).index();0===e?n.yes?n.yes(t.index,i):n.btn1?n.btn1(t.index,i):y.close(t.index):!1===(n["btn"+(e+1)]&&n["btn"+(e+1)](t.index,i))||y.close(t.index)}),i.find("."+p[7]).on("click",function(){!1===(n.cancel&&n.cancel(t.index,i))||y.close(t.index)}),n.shadeClose&&u("#layui-layer-shade"+t.index).on("click",function(){y.close(t.index)}),i.find(".layui-layer-min").on("click",function(){!1===(n.min&&n.min(i))||y.min(t.index,n)}),i.find(".layui-layer-max").on("click",function(){u(this).hasClass("layui-layer-maxmin")?(y.restore(t.index),n.restore&&n.restore(i)):(y.full(t.index,n),setTimeout(function(){n.full&&n.full(i)},100))}),n.end&&(c.end[t.index]=n.end)},c.reselect=function(){u.each(u("select"),function(e,t){var i=u(this);i.parents("."+p[0])[0]||1==i.attr("layer")&&u("."+p[0]).length<1&&i.removeAttr("layer").show(),i=null})},t.pt.IE6=function(e){u("select").each(function(e,t){var i=u(this);i.parents("."+p[0])[0]||"none"===i.css("display")||i.attr({layer:"1"}).hide(),i=null})},t.pt.openLayer=function(){y.zIndex=this.config.zIndex,y.setTop=function(e){return y.zIndex=parseInt(e[0].style.zIndex),e.on("mousedown",function(){y.zIndex++,e.css("z-index",y.zIndex+1)}),y.zIndex}},c.record=function(e){var t=[e.width(),e.height(),e.position().top,e.position().left+parseFloat(e.css("margin-left"))];e.find(".layui-layer-max").addClass("layui-layer-maxmin"),e.attr({area:t})},c.rescollbar=function(e){p.html.attr("layer-full")==e&&(p.html[0].style.removeProperty?p.html[0].style.removeProperty("overflow"):p.html[0].style.removeAttribute("overflow"),p.html.removeAttr("layer-full"))},(d.layer=y).getChildFrame=function(e,t){return t=t||u("."+p[4]).attr("times"),u("#"+p[0]+t).find("iframe").contents().find(e)},y.getFrameIndex=function(e){return u("#"+e).parents("."+p[4]).attr("times")},y.iframeAuto=function(e){var t,i,n;e&&(t=y.getChildFrame("html",e).outerHeight(),n=(i=u("#"+p[0]+e)).find(p[1]).outerHeight()||0,e=i.find("."+p[6]).outerHeight()||0,i.css({height:t+n+e}),i.find("iframe").css({height:t}))},y.iframeSrc=function(e,t){u("#"+p[0]+e).find("iframe").attr("src",t)},y.style=function(e,t,i){var n=u("#"+p[0]+e),a=n.find(".layui-layer-content"),o=n.attr("type"),s=n.find(p[1]).outerHeight()||0,e=n.find("."+p[6]).outerHeight()||0;n.attr("minLeft");o!==c.type[3]&&o!==c.type[4]&&(i||(parseFloat(t.width)<=260&&(t.width=260),parseFloat(t.height)-s-e<=64&&(t.height=64+s+e)),n.css(t),e=n.find("."+p[6]).outerHeight(),o===c.type[2]?n.find("iframe").css({height:parseFloat(t.height)-s-e}):a.css({height:parseFloat(t.height)-s-e-parseFloat(a.css("padding-top"))-parseFloat(a.css("padding-bottom"))}))},y.min=function(e,t){var i=u("#"+p[0]+e),n=i.find(p[1]).outerHeight()||0,a=i.attr("minLeft")||181*c.minIndex+"px",o=i.css("position");c.record(i),c.minLeft[0]&&(a=c.minLeft[0],c.minLeft.shift()),i.attr("position",o),y.style(e,{width:180,height:n,left:a,top:f.height()-n,position:"fixed",overflow:"hidden"},!0),i.find(".layui-layer-min").hide(),"page"===i.attr("type")&&i.find(p[4]).hide(),c.rescollbar(e),i.attr("minLeft")||c.minIndex++,i.attr("minLeft",a)},y.restore=function(e){var t=u("#"+p[0]+e),i=t.attr("area").split(",");t.attr("type");y.style(e,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3]),position:t.attr("position"),overflow:"visible"},!0),t.find(".layui-layer-max").removeClass("layui-layer-maxmin"),t.find(".layui-layer-min").show(),"page"===t.attr("type")&&t.find(p[4]).show(),c.rescollbar(e)},y.full=function(t){var i=u("#"+p[0]+t),n=u("#layui-layer-iframe"+t);timer,c.record(i),p.html.attr("layer-full")||p.html.css("overflow","hidden").attr("layer-full",t),clearTimeout(timer),timer=setTimeout(function(){var e="fixed"===i.css("position");y.style(t,{top:e?0:f.scrollTop(),left:e?0:f.scrollLeft(),width:f.width(),height:f.height()},!0),n.css("height",f.height()),console.log(n),i.find(".layui-layer-min").hide()},100)},y.title=function(e,t){u("#"+p[0]+(t||y.index)).find(p[1]).html(e)},y.close=function(n){var a,e,o=u("#"+p[0]+n),s=o.attr("type");o[0]&&(a="layui-layer-wrap",e=function(){if(s===c.type[1]&&"object"===o.attr("conType")){o.children(":not(."+p[5]+")").remove();for(var e=o.find("."+a),t=0;t<2;t++)e.unwrap();e.css("display",e.data("display")).removeClass(a)}else{if(s===c.type[2])try{var i=u("#"+p[4]+n)[0];i.contentWindow.document.write(""),i.contentWindow.close(),o.find("."+p[5])[0].removeChild(i)}catch(e){}o[0].innerHTML="",o.remove()}"function"==typeof c.end[n]&&c.end[n](),delete c.end[n]},o.data("isOutAnim")&&o.addClass("layer-anim layer-anim-close"),u("#layui-layer-moves, #layui-layer-shade"+n).remove(),6==y.ie&&c.reselect(),c.rescollbar(n),o.attr("minLeft")&&(c.minIndex--,c.minLeft.push(o.attr("minLeft"))),y.ie&&y.ie<10||!o.data("isOutAnim")?e():setTimeout(function(){e()},200))},y.closeAll=function(t){u.each(u("."+p[0]),function(){var e=u(this);(t?e.attr("type")===t:1)&&y.close(e.attr("times"))})};var i=y.cache||{};y.prompt=function(i,n){var e,t="";"function"==typeof(i=i||{})&&(n=i),i.area&&(t='style="width: '+(e=i.area)[0]+"; height: "+e[1]+';"',delete i.area);var a,t=2==i.formType?'<textarea class="layui-layer-input"'+t+"></textarea>":'<input type="'+(1==i.formType?"password":"text")+'" class="layui-layer-input">',o=i.success;return delete i.success,y.open(u.extend({type:1,btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:t,skin:"layui-layer-prompt"+h("prompt"),maxWidth:f.width(),success:function(e){(a=e.find(".layui-layer-input")).val(i.value||"").focus(),"function"==typeof o&&o(e)},resize:!1,yes:function(e){var t=a.val();""===t?a.focus():t.length>(i.maxlength||500)?y.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(i.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",a,{tips:1}):n&&n(t,e,a)}},i))},y.tab=function(n){var a=(n=n||{}).tab||{},o="layui-this",s=n.success;return delete n.success,y.open(u.extend({type:1,skin:"layui-layer-tab"+h("tab"),resize:!1,title:function(){var e=a.length,t=1,i="";if(0<e)for(i='<span class="'+o+'">'+a[0].title+"</span>";t<e;t++)i+="<span>"+a[t].title+"</span>";return i}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=a.length,t=1,i="";if(0<e)for(i='<li class="layui-layer-tabli '+o+'">'+(a[0].content||"no content")+"</li>";t<e;t++)i+='<li class="layui-layer-tabli">'+(a[t].content||"no  content")+"</li>";return i}()+"</ul>",success:function(e){var t=e.find(".layui-layer-title").children(),i=e.find(".layui-layer-tabmain").children();t.on("mousedown",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var t=u(this),e=t.index();t.addClass(o).siblings().removeClass(o),i.eq(e).show().siblings().hide(),"function"==typeof n.change&&n.change(e)}),"function"==typeof s&&s(e)}},n))},y.photos=function(i,e,n){var a={};if((i=i||{}).photos){var t=i.photos.constructor===Object,o=t?i.photos:{},s=o.data||[],r=o.start||0;a.imgIndex=1+(0|r),i.img=i.img||"img";var l=i.success;if(delete i.success,t){if(0===s.length)return y.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var f=u(i.photos),c=function(){s=[],f.find(i.img).each(function(e){var t=u(this);t.attr("layer-index",e),s.push({alt:t.attr("alt"),pid:t.attr("layer-pid"),src:t.attr("layer-src")||t.attr("src"),thumb:t.attr("src")})})};if(c(),0===s.length)return;if(e||f.on("click",i.img,function(){var e=u(this).attr("layer-index");y.photos(u.extend(i,{photos:{start:e,data:s,tab:i.tab},full:i.full}),!0),c()}),!e)return}a.imgprev=function(e){a.imgIndex--,a.imgIndex<1&&(a.imgIndex=s.length),a.tabimg(e)},a.imgnext=function(e,t){a.imgIndex++,a.imgIndex>s.length&&(a.imgIndex=1,t)||a.tabimg(e)},a.keyup=function(e){var t;a.end||(t=e.keyCode,e.preventDefault(),37===t?a.imgprev(!0):39===t?a.imgnext(!0):27===t&&y.close(a.index))},a.tabimg=function(e){if(!(s.length<=1))return o.start=a.imgIndex-1,y.close(a.index),y.photos(i,!0,e)},a.event=function(){a.bigimg.hover(function(){a.imgsee.show()},function(){a.imgsee.hide()}),a.bigimg.find(".layui-layer-imgprev").on("click",function(e){e.preventDefault(),a.imgprev()}),a.bigimg.find(".layui-layer-imgnext").on("click",function(e){e.preventDefault(),a.imgnext()}),u(document).on("keyup",a.keyup)},a.loadi=y.load(1,{shade:!("shade"in i)&&.9,scrollbar:!1}),function(e,t,i){var n=new Image;if(n.src=e,n.complete)return t(n);n.onload=function(){n.onload=null,t(n)},n.onerror=function(e){n.onerror=null,i(e)}}(s[r].src,function(e){var t;y.close(a.loadi),a.index=y.open(u.extend({type:1,id:"layui-layer-photos",area:(t=[e.width,e.height],e=[u(d).width()-100,u(d).height()-100],!i.full&&(t[0]>e[0]||t[1]>e[1])&&((e=[t[0]/e[0],t[1]/e[1]])[1]<e[0]?(t[0]=t[0]/e[0],t[1]=t[1]/e[0]):e[0]<e[1]&&(t[0]=t[0]/e[1],t[1]=t[1]/e[1])),[t[0]+"px",t[1]+"px"]),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,isOutAnim:!1,skin:"layui-layer-photos"+h("photos"),content:'<div class="layui-layer-phimg"><img src="'+s[r].src+'" alt="'+(s[r].alt||"")+'" layer-pid="'+s[r].pid+'"><div class="layui-layer-imgsee">'+(1<s.length?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(n?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(s[r].alt||"")+"</a><em>"+a.imgIndex+"/"+s.length+"</em></span></div></div></div>",success:function(e,t){a.bigimg=e.find(".layui-layer-phimg"),a.imgsee=e.find(".layui-layer-imguide,.layui-layer-imgbar"),a.event(e),i.tab&&i.tab(s[r],e),"function"==typeof l&&l(e)},end:function(){a.end=!0,u(document).off("keyup",a.keyup)}},i))},function(){y.close(a.loadi),y.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){1<s.length&&a.imgnext(!0,!0)}})})}},c.run=function(e){f=(u=e)(d),p.html=u("html"),y.open=function(e){return new t(e).index}},d.layui&&layui.define?(y.ready(),layui.define("jquery",function(e){y.path=layui.cache.dir,c.run(layui.$),e("layer",d.layer=y)})):"function"==typeof define&&define.amd?define([],function(){return c.run(d.jQuery),y}):(c.run(d.jQuery),y.ready())}(window);layui.define(["jquery"],function(e){"use strict";var u=layui.$;e("util",{loadJs:function(e,t){var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src",e),document.getElementsByTagName("head")[0].appendChild(a),/msie/.test(window.navigator.userAgent.toLowerCase())?a.onreadystatechange=function(){"loaded"!=this.readyState&&"complete"!=this.readyState||t()}:/gecko/.test(window.navigator.userAgent.toLowerCase())?a.onload=function(){t()}:t()},fixbar:function(t){var e,a,n="layui-fixbar",r="layui-fixbar-top",o=u(document),i=u("body");(t=u.extend({showHeight:200},t)).bar1=!0===t.bar1?"&#xe606;":t.bar1,t.bar2=!0===t.bar2?"&#xe607;":t.bar2,t.bgcolor=t.bgcolor?"background-color:"+t.bgcolor:"";function c(){o.scrollTop()>=t.showHeight?e||(l.show(),e=1):e&&(l.hide(),e=0)}var s=[t.bar1,t.bar2,"&#xe604;"],s=u(['<ul class="'+n+'">',t.bar1?'<li class="fa" lay-type="bar1" style="'+t.bgcolor+'">'+s[0]+"</li>":"",t.bar2?'<li class="fa" lay-type="bar2" style="'+t.bgcolor+'">'+s[1]+"</li>":"",'<li class="fa '+r+'" lay-type="top" style="'+t.bgcolor+'">'+s[2]+"</li>","</ul>"].join("")),l=s.find("."+r);u("."+n)[0]||("object"==typeof t.css&&s.css(t.css),i.append(s),c(),s.find("li").on("click",function(){var e=u(this).attr("lay-type");"top"===e&&u("html,body").animate({scrollTop:0},200),t.click&&t.click.call(this,e)}),o.on("scroll",function(){clearTimeout(a),a=setTimeout(function(){c()},100)}))},countdown:function(e,t,a){var n=this,r="function"==typeof t,o=new Date(e).getTime(),i=new Date(!t||r?(new Date).getTime():t).getTime(),c=o-i,o=[Math.floor(c/864e5),Math.floor(c/36e5)%24,Math.floor(c/6e4)%60,Math.floor(c/1e3)%60];r&&(a=t);r=setTimeout(function(){n.countdown(e,i+1e3,a)},1e3);return a&&a(0<c?o:[0,0,0,0],t,r),c<=0&&clearTimeout(r),r},timeAgo:function(e,t){var a=this,n=[[],[]],r=(new Date).getTime()-new Date(e).getTime();return 6912e5<r?(r=new Date(e),n[0][0]=a.digit(r.getFullYear(),4),n[0][1]=a.digit(r.getMonth()+1),n[0][2]=a.digit(r.getDate()),t||(n[1][0]=a.digit(r.getHours()),n[1][1]=a.digit(r.getMinutes()),n[1][2]=a.digit(r.getSeconds())),n[0].join("-")+" "+n[1].join(":")):864e5<=r?(r/1e3/60/60/24|0)+"天前":36e5<=r?(r/1e3/60/60|0)+"小时前":12e4<=r?(r/1e3/60|0)+"分钟前":r<0?"未来":"刚刚"},digit:function(e,t){var a="";t=t||2;for(var n=(e=String(e)).length;n<t;n++)a+="0";return e<Math.pow(10,t)?a+(0|e):e},toDateString:function(e,t){var a=this,n=new Date(e||new Date),e=[a.digit(n.getFullYear(),4),a.digit(n.getMonth()+1),a.digit(n.getDate())],n=[a.digit(n.getHours()),a.digit(n.getMinutes()),a.digit(n.getSeconds())];return(t=t||"yyyy-MM-dd HH:mm:ss").replace(/yyyy/g,e[0]).replace(/MM/g,e[1]).replace(/dd/g,e[2]).replace(/HH/g,n[0]).replace(/mm/g,n[1]).replace(/ss/g,n[2])},escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},formatSize:function(e){if(null==e||""==e)return"0 Bytes";var t=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),e=parseFloat(e),a=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,a)).toFixed(2)+t[a]},getExtension:function(e){var t=e.lastIndexOf(".");return t<0?"":e.substr(t+1,e.length)},toRmb:function(e){var t,a,n,r,o,i=99999999999.99,c="叁",s="佰",l="仟",u="亿",g="角";if(""==(e=e.toString()))return alert("转换内容不能为空!"),"";if(null!=e.match(/[^,.\d]/))return alert("输入有误,请输入小数点和纯数字!"),"";if(null==e.match(/^((\d{1,3}(,\d{3})*(.((\d{3},)*\d{1,3}))?)|(\d+(.\d+)?))$/))return alert("输入有误,请输入小数点和纯数字!"),"";if(e=(e=e.replace(/,/g,"")).replace(/^0+/,""),Number(e)>i)return alert("对不起,你输入的数字太大了!最大数字为99999999999.99！"),"";if(i=1<(i=e.split(".")).length?(e=i[0],(i=i[1]).substr(0,2)):(e=i[0],""),t=new Array("零","壹","贰","叁","肆","伍","陆","柒","捌","玖"),n=new Array("","拾",s,l),r=new Array("","万",u),o=new Array(g,"分"),g="",0<Number(e)){for(s=u=0;s<e.length;s++)a=(c=e.length-s-1)/4,c%=4,"0"==(l=e.substr(s,1))?u++:(0<u&&(g+=t[0]),u=0,g+=t[Number(l)]+n[c]),0==c&&u<4&&(g+=r[a]);g+="元"}if(""!=i)for(s=0;s<i.length;s++)"0"!=(l=i.substr(s,1))&&(g+=t[Number(l)]+o[s]);return""==g&&(g="零元"),i.length<2&&(g+="整"),g},request:{_handleException:function(e,t,a){},_handleRes:function(e,t){return 0!=e.errcode?(layer.msg(e.msg||"未知错误,请刷新重试!"),!1):("function"==typeof t&&t(e),!0)},ajax:function(t){var n=this;u.ajax({cache:t.cache||!1,type:t.type,url:t.url,headers:{"X-CSRF-TOKEN":u('meta[name="csrf-token"]').attr("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},data:t.data,dataType:t.dataType,success:function(e){n._handleRes(e,t.success)},error:function(e,t,a){n._handleException(e,t,a)}})},get:function(e,t,a){var n=this;u.ajax({url:e,type:"get",headers:{"X-CSRF-TOKEN":u('meta[name="csrf-token"]').attr("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},data:t,dataType:"json",success:function(e){n._handleRes(e,a)},error:function(e,t,a){n._handleException(e,t,a)}})},post:function(e,t,a){var n=this;u.ajax({url:e,type:"post",headers:{"X-CSRF-TOKEN":u('meta[name="csrf-token"]').attr("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},data:t,dataType:"json",success:function(e){n._handleRes(e,a)},error:function(e,t,a){n._handleException(e,t,a)}})}}})});layui.define(function(a){var i=layui.cache;layui.config({dir:i.dir.replace(/lay\/dest\/$/,"")}),a("layui.all",layui.v)});layui.define(["jquery","util"],function(t){"use strict";var r=layui.$,c=(layui.hint(),layui.device()),e=layui.util,o="element",u="layui-this",d="layui-show",a=function(){this.config={}};a.prototype.set=function(t){return r.extend(!0,this.config,t),this},a.prototype.on=function(t,a){return layui.onevent.call(this,o,t,a)},a.prototype.tabAdd=function(t,a){var i=r(".layui-tab[lay-filter="+t+"]"),e=i.children(".layui-tab-title"),l=e.children(".layui-tab-bar"),t=i.children(".layui-tab-content"),i='<li lay-id="'+(a.id||"")+'"'+(a.context?" lay-context":"")+(a.attr?' lay-attr="'+a.attr+'"':"")+">"+(a.title||"unnaming")+"</li>";return l[0]?l.before(i):e.append(i),t.append('<div class="layui-tab-item">'+(a.content||"")+"</div>"),m.hideTabMore(!0),m.tabAuto(),this},a.prototype.tabDelete=function(t,a){a=r(".layui-tab[lay-filter="+t+"]").children(".layui-tab-title").find('>li[lay-id="'+a+'"]');return m.tabDelete(null,a),this},a.prototype.tabChange=function(t,a){a=r(".layui-tab[lay-filter="+t+"]").children(".layui-tab-title").find('>li[lay-id="'+a+'"]');return m.tabClick.call(a[0],null,null,a),this},a.prototype.tab=function(i){i=i||{},n.on("click",i.headerElem,function(t){var a=r(this).index();m.tabClick.call(this,t,a,null,i)})},a.prototype.progress=function(t,a){var i="layui-progress",t=r("."+i+"[lay-filter="+t+"]").find("."+i+"-bar"),i=t.find("."+i+"-text");return t.css("width",a),i.text(a),this};var f=".layui-nav",p="layui-nav-item",l="layui-nav-bar",h="layui-nav-tree",y="layui-nav-child",v="fa fa-angle-right",b="layui-anim layui-anim-upbit",m={tabClick:function(t,a,i,e){e=e||{};var l=i||r(this),a=a||l.parent().children("li").index(l),n=e.headerElem?l.parent():l.parents(".layui-tab").eq(0),s=e.bodyElem?r(e.bodyElem):n.children(".layui-tab-content").children(".layui-tab-item"),i=l.find("a"),e=n.attr("lay-filter");"javascript:;"!==i.attr("href")&&"_blank"===i.attr("target")||(l.addClass(u).siblings().removeClass(u),s.eq(a).addClass(d).siblings().removeClass(d)),layui.event.call(this,o,"tab("+e+")",{elem:n,index:a})},tabContext:function(t,a,i){t.preventDefault();var e=i||r(this);void 0===e.attr("lay-context")||0<e.find(".m-subtab").length||(a=a||e.parent().children("li").index(e),a=['<div class="fixed m-subtab" style="z-index:99999;left: '+t.pageX+"px;top: "+t.pageY+'px;"><dl class="layui-nav-child layui-anim-fadein layui-anim layui-anim-upbit layui-show">','<dd lumina-event="refreshThisTab" data-idx="'+a+'"  class="border-b"><a href="javascript:;">刷新</a></dd>','<dd lumina-event="closeThisTabs" data-idx="'+a+'"><a href="javascript:;">关闭</a></dd>','<dd lumina-event="closeOtherTabs" data-idx="'+a+'"><a href="javascript:;">关闭其它标签</a></dd>','<dd lumina-event="closeAllTabs" data-idx="'+a+'"><a href="javascript:;">关闭全部标签</a></dd>','<dd lumina-event="openThisTab" data-idx="'+a+'"><a href="javascript:;">新窗口打开</a></dd></dl></div>'].join(""),e.append(a),e.on("mouseleave",function(){e.find(".m-subtab").remove()}))},tabDelete:function(t,a){var i=a||r(this).parent(),e=i.index(),l=i.parents(".layui-tab").eq(0),n=l.children(".layui-tab-content").children(".layui-tab-item"),a=l.attr("lay-filter");i.hasClass(u)&&(i.next()[0]?m.tabClick.call(i.next()[0],null,e+1):i.prev()[0]&&m.tabClick.call(i.prev()[0],null,e-1)),i.remove(),n.eq(e).remove(),setTimeout(function(){m.tabAuto()},50),layui.event.call(this,o,"tabDelete("+a+")",{elem:l,index:e})},tabAuto:function(){var e="layui-tab-bar",l="fa-close",n=this;r(".layui-tab").each(function(){var t=r(this),a=t.children(".layui-tab-title"),i=(t.children(".layui-tab-content").children(".layui-tab-item"),'lay-stope="tabmore"'),i=r('<span class="layui-unselect layui-tab-bar" '+i+"><i "+i+' class="fa">&#xe61a;</i></span>');n===window&&8!=c.ie&&m.hideTabMore(!0),t.attr("lay-allowClose")&&a.find("li").each(function(){var t,a=r(this);a.find("."+l)[0]||((t=r('<i class="fa layui-unselect '+l+'"></i>')).on("click",m.tabDelete),a.append(t))}),"string"!=typeof t.attr("lay-unauto")&&(a.prop("scrollWidth")>a.outerWidth()+1?a.find("."+e)[0]||(a.append(i),t.attr("overflow",""),i.on("click",function(t){a[this.title?"removeClass":"addClass"]("layui-tab-more"),this.title=this.title?"":"收缩"})):(a.find("."+e).remove(),t.removeAttr("overflow")))})},hideTabMore:function(t){var a=r(".layui-tab-title");!0!==t&&"tabmore"===r(t.target).attr("lay-stope")||(a.removeClass("layui-tab-more"),a.find(".layui-tab-bar").attr("title",""))},clickThis:function(){var t=r(this),a=t.parents(f),i=a.attr("lay-filter"),e=t.parent(),l=t.siblings("."+y),n="string"==typeof e.attr("lay-unselect");"javascript:;"!==t.attr("href")&&"_blank"===t.attr("target")||n||l[0]||(a.find("."+u).removeClass(u),e.addClass(u)),a.hasClass(h)&&(l.removeClass(b),l[0]&&(e["none"===l.css("display")?"addClass":"removeClass"](p+"ed"),"all"===a.attr("lay-shrink")&&e.siblings().removeClass(p+"ed"))),layui.event.call(this,o,"nav("+i+")",t)},collapse:function(){var t=r(this),a=(t.find(".layui-colla-icon"),t.siblings(".layui-colla-content")),i=t.parents(".layui-collapse").eq(0),e=i.attr("lay-filter"),l="none"===a.css("display");"string"==typeof i.attr("lay-accordion")&&((i=i.children(".layui-colla-item").children("."+d)).siblings(".layui-colla-title").children(".layui-colla-icon"),i.removeClass(d)),a[l?"addClass":"removeClass"](d),layui.event.call(this,o,"collapse("+e+")",{title:t,content:a,show:l})},previewMedia:function(){r(".J_player").each(function(){var t=r(this),a=t.data("type"),i=t.data("uri");t.unbind(),t.click(function(){e.loadJs("//cdn.jsdelivr.net/npm/xgplayer@1.1.7/browser/index.js",function(){"mp4"==a||"video"==a?layer.open({type:1,title:!1,area:"800px",closeBtn:1,shade:.8,shadeClose:!0,offset:"60px",content:'<div id="xgvideo" class="overflow-hidden"></div>',success:function(t,a){new Player({id:"xgvideo",fluid:!0,autoplay:!0,ignores:["theme-default","cover","backward","forward","meta","next","prev","template"],url:[{name:"",src:i,poster:""}]})}}):"audio"==a||"mp3"==a?e.loadJs("//cdn.jsdelivr.net/npm/xgplayer-music/browser/index.js",function(){layer.open({type:1,title:!1,area:"600px",closeBtn:1,shade:0,offset:"60px",shadeClose:!0,content:'<div id="xgmusic" class="overflow-hidden"></div>',success:function(t,a){new Music({id:"xgmusic",url:[{src:i,name:"音频预览",vid:"000001",poster:""}],volume:.8,width:"100%",height:50,preloadNext:!0})}})}):layer.msg("暂不支持"+a+"格式文件播放")})})})}};a.prototype.render=a.prototype.init=function(t,a){var i=a?'[lay-filter="'+a+'"]':"",a={tab:function(){},nav:function(){var n={},s={},o={};r(f+i).each(function(t){var a=r(this),i=r('<span class="'+l+'"></span>'),e=a.find("."+p);a.find("."+l)[0]||(a.append(i),e.on("mouseenter",function(){!function(t,a,i){var e=r(this),l=e.find("."+y);a.hasClass(h)?t.css({top:e.position().top,height:e.children("a").outerHeight(),opacity:1}):(l.addClass(b),t.css({left:e.position().left+parseFloat(e.css("marginLeft")),top:e.position().top+e.height()-t.height()}),n[i]=setTimeout(function(){t.css({width:e.width(),opacity:1})},c.ie&&c.ie<10?0:200),clearTimeout(o[i]),"block"===l.css("display")&&clearTimeout(s[i]),s[i]=setTimeout(function(){l.addClass(d),e.find("."+v).addClass(v+"d")},300))}.call(this,i,a,t)}).on("mouseleave",function(){a.hasClass(h)||(clearTimeout(s[t]),s[t]=setTimeout(function(){a.find("."+y).removeClass(d),a.find("."+v).removeClass(v+"d")},300))}),a.on("mouseleave",function(){clearTimeout(n[t]),o[t]=setTimeout(function(){a.hasClass(h)?i.css({height:0,top:i.position().top+i.height()/2,opacity:0}):i.css({width:0,left:i.position().left+i.width()/2,opacity:0})},200)})),e.find("a").each(function(){var t=r(this);t.parent(),t.siblings("."+y);t.off("click",m.clickThis).on("click",m.clickThis)})})},breadcrumb:function(){r(".layui-breadcrumb"+i).each(function(){var t=r(this),a="lay-separator",i=t.attr(a)||"/",e=t.find("a");e.next("span["+a+"]")[0]||(e.each(function(t){t!==e.length-1&&r(this).after("<span "+a+">"+i+"</span>")}),t.css("visibility","visible"))})},progress:function(){var e="layui-progress";r("."+e+i).each(function(){var t=r(this),a=t.find(".layui-progress-bar"),i=a.attr("lay-percent");a.css("width",/^.+\/.+$/.test(i)?100*new Function("return "+i)()+"%":i),t.attr("lay-showPercent")&&setTimeout(function(){a.html('<span class="'+e+'-text">'+i+"</span>")},350)})},collapse:function(){r(".layui-collapse"+i).each(function(){r(this).find(".layui-colla-item").each(function(){var t=r(this),a=t.find(".layui-colla-title");t.find(".layui-colla-content").css("display");a.find(".layui-colla-icon").remove(),a.append('<i class="fa layui-colla-icon"></i>'),a.off("click",m.collapse).on("click",m.collapse)})})},media:function(){m.previewMedia.call({})},tip:function(){r("[lay-tip]").each(function(){var t=r(this);t.on("mouseenter",function(){layer.tips(t.attr("lay-tip"),t,{tips:1,time:0})}).on("mouseleave",function(){}),console.log(t)})}};return a[t]?a[t]():layui.each(a,function(t,a){a()})};var i=new a,n=r(document);i.render();a=".layui-tab>.layui-tab-title>li";n.off().on("click",a,m.tabClick),n.on("contextmenu",a,m.tabContext),n.on("click",m.hideTabMore),t(o,i)});!function(){"use strict";function o(e){var t=this;t.index=++u.index,t.config=S.extend({},t.config,u.config,e),t.init()}var e,t=window.layui&&layui.define,s={getPath:(e=document.currentScript?document.currentScript.src:function(){for(var e,t=document.scripts,n=t.length-1,a=n;0<a;a--)if("interactive"===t[a].readyState){e=t[a].src;break}return e||t[n].src}()).substring(0,e.lastIndexOf("/")+1),getStyle:function(e,t){e=e.currentStyle||window.getComputedStyle(e,null);return e[e.getPropertyValue?"getPropertyValue":"getAttribute"](t)},link:function(e,t,n){var a,i,r,o;u.path&&(a=document.getElementsByTagName("head")[0],i=document.createElement("link"),r="layuicss-"+((n="string"==typeof t?t:n)||e).replace(/\.|\//g,""),o=0,i.rel="stylesheet",i.href=u.path+e,i.id=r,document.getElementById(r)||a.appendChild(i),"function"==typeof t&&function e(){return 80<++o?window.console&&console.error("laydate.css: Invalid"):void(1989===parseInt(s.getStyle(document.getElementById(r),"width"))?t():setTimeout(e,100))}())}},u={v:"5.0.9",config:{},index:window.laydate&&window.laydate.v?1e5:0,path:s.getPath,set:function(e){var t=this;return t.config=S.extend({},t.config,e),t},ready:function(e){u.v;return this}},w="layui-this",C="laydate-disabled",l="开始日期超出了结束日期<br>建议重新选择",h=[100,2e5],y="layui-laydate-static",x="layui-laydate-list",d="laydate-selected",a="layui-laydate-hint",M=".laydate-btns-confirm",b="laydate-time-text",E=".laydate-btns-time",S=function(e){return new i(e)},i=function(e){for(var t=0,n="object"==typeof e?[e]:(this.selector=e,document.querySelectorAll(e||null));t<n.length;t++)this.push(n[t])};i.prototype=[],i.prototype.constructor=i,S.extend=function(){var e=1,t=arguments,a=function(e,t){for(var n in e=e||(t.constructor===Array?[]:{}),t)e[n]=t[n]&&t[n].constructor===Object?a(e[n],t[n]):t[n];return e};for(t[0]="object"==typeof t[0]?t[0]:{};e<t.length;e++)"object"==typeof t[e]&&a(t[0],t[e]);return t[0]},S.ie=(e=navigator.userAgent.toLowerCase(),!!(window.ActiveXObject||"ActiveXObject"in window)&&((e.match(/msie\s(\d+)/)||[])[1]||"11")),S.stope=function(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},S.each=function(e,t){if("function"!=typeof t)return this;if((e=e||[]).constructor===Object){for(var n in e)if(t.call(e[n],n,e[n]))break}else for(n=0;n<e.length&&!t.call(e[n],n,e[n]);n++);return this},S.digit=function(e,t,n){var a="";t=t||2;for(var i=(e=String(e)).length;i<t;i++)a+="0";return e<Math.pow(10,t)?a+(0|e):e},S.elem=function(e,t){var n=document.createElement(e);return S.each(t||{},function(e,t){n.setAttribute(e,t)}),n},i.addStr=function(n,e){return n=n.replace(/\s+/," "),e=e.replace(/\s+/," ").split(" "),S.each(e,function(e,t){new RegExp("\\b"+t+"\\b").test(n)||(n=n+" "+t)}),n.replace(/^\s|\s$/,"")},i.removeStr=function(n,e){return n=n.replace(/\s+/," "),e=e.replace(/\s+/," ").split(" "),S.each(e,function(e,t){t=new RegExp("\\b"+t+"\\b");t.test(n)&&(n=n.replace(t,""))}),n.replace(/\s+/," ").replace(/^\s|\s$/,"")},i.prototype.find=function(a){var i=this,r=0,o=[],s="object"==typeof a;return this.each(function(e,t){for(var n=s?[a]:t.querySelectorAll(a||null);r<n.length;r++)o.push(n[r]);i.shift()}),s||(i.selector=(i.selector?i.selector+" ":"")+a),S.each(o,function(e,t){i.push(t)}),i},i.prototype.each=function(e){return S.each.call(this,this,e)},i.prototype.addClass=function(n,a){return this.each(function(e,t){t.className=i[a?"removeStr":"addStr"](t.className,n)})},i.prototype.removeClass=function(e){return this.addClass(e,!0)},i.prototype.hasClass=function(n){var a=!1;return this.each(function(e,t){new RegExp("\\b"+n+"\\b").test(t.className)&&(a=!0)}),a},i.prototype.attr=function(n,a){var e=this;return void 0===a?function(){if(0<e.length)return e[0].getAttribute(n)}():e.each(function(e,t){t.setAttribute(n,a)})},i.prototype.removeAttr=function(n){return this.each(function(e,t){t.removeAttribute(n)})},i.prototype.html=function(n){return this.each(function(e,t){t.innerHTML=n})},i.prototype.val=function(n){return this.each(function(e,t){t.value=n})},i.prototype.append=function(n){return this.each(function(e,t){"object"==typeof n?t.appendChild(n):t.innerHTML=t.innerHTML+n})},i.prototype.remove=function(n){return this.each(function(e,t){n?t.removeChild(n):t.parentNode.removeChild(t)})},i.prototype.on=function(n,a){return this.each(function(e,t){t.attachEvent?t.attachEvent("on"+n,function(e){e.target=e.srcElement,a.call(t,e)}):t.addEventListener(n,a,!1)})},i.prototype.off=function(n,a){return this.each(function(e,t){t.detachEvent?t.detachEvent("on"+n,a):t.removeEventListener(n,a,!1)})},o.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},o.prototype.config={type:"date",range:!1,format:"yyyy-MM-dd",value:null,isInitValue:!0,min:"1900-1-1",max:"2099-12-31",trigger:"focus",show:!1,showBottom:!0,btns:["clear","now","confirm"],lang:"cn",theme:"default",position:null,calendar:!1,mark:{},zIndex:null,done:null,change:null},o.prototype.lang=function(){var e={cn:{weeks:["日","一","二","三","四","五","六"],time:["时","分","秒"],timeTips:"选择时间",startTime:"开始时间",endTime:"结束时间",dateTips:"返回日期",month:["一","二","三","四","五","六","七","八","九","十","十一","十二"],tools:{confirm:"确定",clear:"清空",now:"现在"}},en:{weeks:["Su","Mo","Tu","We","Th","Fr","Sa"],time:["Hours","Minutes","Seconds"],timeTips:"Select Time",startTime:"Start Time",endTime:"End Time",dateTips:"Select Date",month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tools:{confirm:"Confirm",clear:"Clear",now:"Now"}}};return e[this.config.lang]||e.cn},o.prototype.init=function(){var n=this,o=n.config,a="yyyy|y|MM|M|dd|d|HH|H|mm|m|ss|s",e="static"===o.position,t={year:"yyyy",month:"yyyy-MM",date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss"};o.elem=S(o.elem),o.eventElem=S(o.eventElem),o.elem[0]&&(!0===o.range&&(o.range="-"),o.format===t.date&&(o.format=t[o.type]),n.format=o.format.match(new RegExp(a+"|.","g"))||[],n.EXP_IF="",n.EXP_SPLIT="",S.each(n.format,function(e,t){t=new RegExp(a).test(t)?"\\d{"+(new RegExp(a).test(n.format[0===e?e+1:e-1]||"")?/^yyyy|y$/.test(t)?4:t.length:/^yyyy$/.test(t)?"1,4":/^y$/.test(t)?"1,308":"1,2")+"}":"\\"+t;n.EXP_IF=n.EXP_IF+t,n.EXP_SPLIT=n.EXP_SPLIT+"("+t+")"}),n.EXP_IF=new RegExp("^"+(o.range?n.EXP_IF+"\\s\\"+o.range+"\\s"+n.EXP_IF:n.EXP_IF)+"$"),n.EXP_SPLIT=new RegExp("^"+n.EXP_SPLIT+"$",""),n.isInput(o.elem[0])||"focus"===o.trigger&&(o.trigger="click"),o.elem.attr("lay-key")||(o.elem.attr("lay-key",n.index),o.eventElem.attr("lay-key",n.index)),o.mark=S.extend({},o.calendar&&"cn"===o.lang?{"0-1-1":"元旦","0-2-14":"情人","0-3-8":"妇女","0-3-12":"植树","0-4-1":"愚人","0-5-1":"劳动","0-5-4":"青年","0-6-1":"儿童","0-9-10":"教师","0-9-18":"国耻","0-10-1":"国庆","0-12-25":"圣诞"}:{},o.mark),S.each(["min","max"],function(e,t){var n,a,i=[],r=[];"number"==typeof o[t]?(n=o[t],a=(new Date).getTime(),i=[(a=new Date(n?n<864e5?a+864e5*n:n:a)).getFullYear(),a.getMonth()+1,a.getDate()],n<864e5||(r=[a.getHours(),a.getMinutes(),a.getSeconds()])):(i=(o[t].match(/\d+-\d+-\d+/)||[""])[0].split("-"),r=(o[t].match(/\d+:\d+:\d+/)||[""])[0].split(":")),o[t]={year:0|i[0]||(new Date).getFullYear(),month:i[1]?(0|i[1])-1:(new Date).getMonth(),date:0|i[2]||(new Date).getDate(),hours:0|r[0],minutes:0|r[1],seconds:0|r[2]}}),n.elemID="layui-laydate"+o.elem.attr("lay-key"),(o.show||e)&&n.render(),e||n.events(),o.value&&o.isInitValue&&(o.value.constructor===Date?n.setValue(n.parse(0,n.systemDate(o.value))):n.setValue(o.value)))},o.prototype.render=function(){var a,e,t=this,s=t.config,l=t.lang(),i="static"===s.position,n=t.elem=S.elem("div",{id:t.elemID,class:["layui-laydate",s.range?" layui-laydate-range":"",i?" "+y:"",s.theme&&"default"!==s.theme&&!/^#/.test(s.theme)?" laydate-theme-"+s.theme:""].join("")}),d=t.elemMain=[],c=t.elemHeader=[],m=t.elemCont=[],u=t.table=[],r=t.footer=S.elem("div",{class:"layui-laydate-footer"});s.zIndex&&(n.style.zIndex=s.zIndex),S.each(new Array(2),function(e){if(!s.range&&0<e)return!0;var t,n,a,i=S.elem("div",{class:"layui-laydate-header"}),t=[((a=S.elem("i",{class:"fa laydate-icon fa-angle-double-left"})).innerHTML="",a),((n=S.elem("i",{class:"fa laydate-icon fa-angle-left"})).innerHTML="",n),(t=S.elem("div",{class:"laydate-set-ym"}),a=S.elem("span"),n=S.elem("span"),t.appendChild(a),t.appendChild(n),t),((a=S.elem("i",{class:"fa laydate-icon fa-angle-right"})).innerHTML="",a),((n=S.elem("i",{class:"fa laydate-icon fa-angle-double-right ml-3"})).innerHTML="",n)],a=S.elem("div",{class:"layui-laydate-content"}),r=S.elem("table"),n=S.elem("thead"),o=S.elem("tr");S.each(t,function(e,t){i.appendChild(t)}),n.appendChild(o),S.each(new Array(6),function(n){var a=r.insertRow(0);S.each(new Array(7),function(e){var t;0===n&&((t=S.elem("th")).innerHTML=l.weeks[e],o.appendChild(t)),a.insertCell(e)})}),r.insertBefore(n,r.children[0]),a.appendChild(r),d[e]=S.elem("div",{class:"layui-laydate-main laydate-main-list-"+e}),d[e].appendChild(i),d[e].appendChild(a),c.push(t),m.push(a),u.push(r)}),S(r).html((e=[],a=[],"datetime"===s.type&&e.push('<span lay-type="datetime" class="laydate-btns-time">'+l.timeTips+"</span>"),S.each(s.btns,function(e,t){var n=l.tools[t]||"btn";s.range&&"now"===t||(i&&"clear"===t&&(n="cn"===s.lang?"重置":"Reset"),a.push('<span lay-type="'+t+'" class="laydate-btns-'+t+'">'+n+"</span>"))}),e.push('<div class="laydate-footer-btns">'+a.join("")+"</div>"),e.join(""))),S.each(d,function(e,t){n.appendChild(t)}),s.showBottom&&n.appendChild(r),/^#/.test(s.theme)&&(e=S.elem("style"),r=["#{{id}} .layui-laydate-header{background-color:{{theme}};}","#{{id}} .layui-this{background-color:{{theme}} !important;}"].join("").replace(/{{id}}/g,t.elemID).replace(/{{theme}}/g,s.theme),"styleSheet"in e?(e.setAttribute("type","text/css"),e.styleSheet.cssText=r):e.innerHTML=r,S(n).addClass("laydate-theme-molv"),n.appendChild(e)),t.remove(o.thisElemDate),i?s.elem.append(n):(document.body.appendChild(n),t.position()),t.checkDate().calendar(),t.changeEvent(),o.thisElemDate=t.elemID,"function"==typeof s.ready&&s.ready(S.extend({},s.dateTime,{month:s.dateTime.month+1}))},o.prototype.remove=function(e){this.config;var t=S("#"+(e||this.elemID));return t.hasClass(y)||this.checkDate(function(){t.remove()}),this},o.prototype.position=function(){function e(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]}function t(e){return document.documentElement[e?"clientWidth":"clientHeight"]}var n=this,a=n.config,i=(n.bindElem||a.elem[0]).getBoundingClientRect(),r=n.elem.offsetWidth,o=n.elem.offsetHeight,s=i.left,l=i.bottom;s+r+5>t("width")&&(s=t("width")-r-5),l+o+5>t()&&(l=i.top>o?i.top-o:t()-o,l-=10),a.position&&(n.elem.style.position=a.position),n.elem.style.left=s+("fixed"===a.position?0:e(1))+"px",n.elem.style.top=l+("fixed"===a.position?0:e())+"px"},o.prototype.hint=function(e){var t=this,n=(t.config,S.elem("div",{class:a}));t.elem&&(n.innerHTML=e||"",S(t.elem).find("."+a).remove(),t.elem.appendChild(n),clearTimeout(t.hinTimer),t.hinTimer=setTimeout(function(){S(t.elem).find("."+a).remove()},3e3))},o.prototype.getAsYM=function(e,t,n){return n?t--:t++,t<0&&(t=11,e--),11<t&&(t=0,e++),[e,t]},o.prototype.systemDate=function(e){var t=e||new Date;return{year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),hours:e?e.getHours():0,minutes:e?e.getMinutes():0,seconds:e?e.getSeconds():0}},o.prototype.checkDate=function(e){function t(e){e.year>h[1]&&(e.year=h[1],s=!0),11<e.month&&(e.month=11,s=!0),23<e.hours&&(e.hours=0,s=!0),59<e.minutes&&(e.minutes=0,e.hours++,s=!0),59<e.seconds&&(e.seconds=0,e.minutes++,s=!0),a=u.getEndDate(e.month+1,e.year),e.date>a&&(e.date=a,s=!0)}function n(a,i,r){var o=["startTime","endTime"];i=(i.match(l.EXP_SPLIT)||[]).slice(1),r=r||0,d.range&&(l[o[r]]=l[o[r]]||{}),S.each(l.format,function(e,t){var n=parseFloat(i[e]);i[e].length<t.length&&(s=!0),/yyyy|y/.test(t)?(n<h[0]&&(n=h[0],s=!0),a.year=n):/MM|M/.test(t)?(n<1&&(n=1,s=!0),a.month=n-1):/dd|d/.test(t)?(n<1&&(n=1,s=!0),a.date=n):/HH|H/.test(t)?(n<1&&(s=!(n=0)),a.hours=n,d.range&&(l[o[r]].hours=n)):/mm|m/.test(t)?(n<1&&(s=!(n=0)),a.minutes=n,d.range&&(l[o[r]].minutes=n)):/ss|s/.test(t)&&(n<1&&(s=!(n=0)),a.seconds=n,d.range&&(l[o[r]].seconds=n))}),t(a)}var a,s,l=this,d=(new Date,l.config),i=d.dateTime=d.dateTime||l.systemDate(),r=l.bindElem||d.elem[0],o=(l.isInput(r),l.isInput(r)?r.value:"static"===d.position?"":r.innerHTML);return"limit"===e?t(i):("string"==typeof(o=o||d.value)&&(o=o.replace(/\s+/g," ").replace(/^\s|\s$/g,"")),l.startState&&!l.endState&&(delete l.startState,l.endState=!0),"string"==typeof o&&o?l.EXP_IF.test(o)?d.range?(o=o.split(" "+d.range+" "),l.startDate=l.startDate||l.systemDate(),l.endDate=l.endDate||l.systemDate(),d.dateTime=S.extend({},l.startDate),S.each([l.startDate,l.endDate],function(e,t){n(t,o[e],e)})):n(i,o):(l.hint("日期格式不合法<br>必须遵循下述格式：<br>"+(d.range?d.format+" "+d.range+" "+d.format:d.format)+"<br>已为你重置"),s=!0):o&&o.constructor===Date?d.dateTime=l.systemDate(o):(d.dateTime=l.systemDate(),delete l.startState,delete l.endState,delete l.startDate,delete l.endDate,delete l.startTime,delete l.endTime),t(i),s&&o&&l.setValue(!d.range||l.endDate?l.parse():""),e&&e()),l},o.prototype.mark=function(e,n){var a,t=this.config;return S.each(t.mark,function(e,t){e=e.split("-");e[0]!=n[0]&&0!=e[0]||e[1]!=n[1]&&0!=e[1]||e[2]!=n[2]||(a=t||n[2])}),a&&e.html('<span class="laydate-day-mark">'+a+"</span>"),this},o.prototype.limit=function(e,t,n,i){var r=this,a=r.config,o={},n=a[41<n?"endDate":"dateTime"],t=S.extend({},n,t||{});return S.each({now:t,min:a.min,max:a.max},function(e,n){var a;o[e]=r.newDate(S.extend({year:n.year,month:n.month,date:n.date},(a={},S.each(i,function(e,t){a[t]=n[t]}),a))).getTime()}),a=o.now<o.min||o.now>o.max,e&&e[a?"addClass":"removeClass"](C),a},o.prototype.calendar=function(e){var i,r,o,s=this,l=s.config,d=e||l.dateTime,t=new Date,n=s.lang(),a="date"!==l.type&&"datetime"!==l.type,c=e?1:0,m=S(s.table[c]).find("td"),c=S(s.elemHeader[c][2]).find("span");return d.year<h[0]&&(d.year=h[0],s.hint("最低只能支持到公元"+h[0]+"年")),d.year>h[1]&&(d.year=h[1],s.hint("最高只能支持到公元"+h[1]+"年")),s.firstDate||(s.firstDate=S.extend({},d)),t.setFullYear(d.year,d.month,1),i=t.getDay(),r=u.getEndDate(d.month||12,d.year),o=u.getEndDate(d.month+1,d.year),S.each(m,function(e,t){var n=[d.year,d.month],a=0;(t=S(t)).removeAttr("class"),e<i?(a=r-i+e,t.addClass("laydate-day-prev"),n=s.getAsYM(d.year,d.month,"sub")):i<=e&&e<o+i?(a=e-i,l.range||a+1===d.date&&t.addClass(w)):(a=e-o-i,t.addClass("laydate-day-next"),n=s.getAsYM(d.year,d.month)),n[1]++,n[2]=a+1,t.attr("lay-ymd",n.join("-")).html(n[2]),s.mark(t,n).limit(t,{year:n[0],month:n[1]-1,date:n[2]},e)}),S(c[0]).attr("lay-ym",d.year+"-"+(d.month+1)),S(c[1]).attr("lay-ym",d.year+"-"+(d.month+1)),"cn"===l.lang?(S(c[0]).attr("lay-type","year").html(d.year+"年"),S(c[1]).attr("lay-type","month").html(d.month+1+"月")):(S(c[0]).attr("lay-type","month").html(n.month[d.month]),S(c[1]).attr("lay-type","year").html(d.year)),a&&(l.range&&(e?s.endDate=s.endDate||{year:d.year+("year"===l.type?1:0),month:d.month+("month"===l.type?0:-1)}:s.startDate=s.startDate||{year:d.year,month:d.month},e&&(s.listYM=[[s.startDate.year,s.startDate.month+1],[s.endDate.year,s.endDate.month+1]],s.list(l.type,0).list(l.type,1),"time"===l.type?s.setBtnStatus("时间",S.extend({},s.systemDate(),s.startTime),S.extend({},s.systemDate(),s.endTime)):s.setBtnStatus(!0))),l.range||(s.listYM=[[d.year,d.month+1]],s.list(l.type,0))),l.range&&!e&&(c=s.getAsYM(d.year,d.month),s.calendar(S.extend({},d,{year:c[0],month:c[1]}))),l.range||s.limit(S(s.footer).find(M),null,0,["hours","minutes","seconds"]),l.range&&e&&!a&&s.stampRange(),s},o.prototype.list=function(n,a){var i,e,r,o,s=this,l=s.config,d=l.dateTime,c=s.lang(),m=l.range&&"date"!==l.type&&"datetime"!==l.type,u=S.elem("ul",{class:x+" "+{year:"laydate-year-list",month:"laydate-month-list",time:"laydate-time-list"}[n]}),t=s.elemHeader[a],h=S(t[2]).find("span"),y=s.elemCont[a||0],f=S(y).find("."+x)[0],p="cn"===l.lang,g=p?"年":"",v=s.listYM[a]||{},D=["hours","minutes","seconds"],T=["startTime","endTime"][a];return v[0]<1&&(v[0]=1),"year"===n?((e=i=v[0]-7)<1&&(e=i=1),S.each(new Array(15),function(e){var t=S.elem("li",{"lay-ym":i}),n={year:i};i==v[0]&&S(t).addClass(w),t.innerHTML=i+g,u.appendChild(t),i<s.firstDate.year?(n.month=l.min.month,n.date=l.min.date):i>=s.firstDate.year&&(n.month=l.max.month,n.date=l.max.date),s.limit(S(t),n,a),i++}),S(h[p?0:1]).attr("lay-ym",i-8+"-"+v[1]).html(e+g+" - "+(i-1)+g)):"month"===n?(S.each(new Array(12),function(e){var t=S.elem("li",{"lay-ym":e}),n={year:v[0],month:e};e+1==v[1]&&S(t).addClass(w),t.innerHTML=c.month[e]+(p?"月":""),u.appendChild(t),v[0]<s.firstDate.year?n.date=l.min.date:v[0]>=s.firstDate.year&&(n.date=l.max.date),s.limit(S(t),n,a)}),S(h[p?0:1]).attr("lay-ym",v[0]+"-"+v[1]).html(v[0]+g)):"time"===n&&(r=function(){S(u).find("ol").each(function(n,e){S(e).find("li").each(function(e,t){s.limit(S(t),[{hours:e},{hours:s[T].hours,minutes:e},{hours:s[T].hours,minutes:s[T].minutes,seconds:e}][n],a,[["hours"],["hours","minutes"],["hours","minutes","seconds"]][n])})}),l.range||s.limit(S(s.footer).find(M),s[T],0,["hours","minutes","seconds"])},l.range?s[T]||(s[T]={hours:0,minutes:0,seconds:0}):s[T]=d,S.each([24,60,60],function(t,e){var n=S.elem("li"),a=["<p>"+c.time[t]+"</p><ol>"];S.each(new Array(e),function(e){a.push("<li"+(s[T][D[t]]===e?' class="'+w+'"':"")+">"+S.digit(e,2)+"</li>")}),n.innerHTML=a.join("")+"</ol>",u.appendChild(n)}),r()),f&&y.removeChild(f),y.appendChild(u),"year"===n||"month"===n?(S(s.elemMain[a]).addClass("laydate-ym-show"),S(u).find("li").on("click",function(){var e,t=0|S(this).attr("lay-ym");S(this).hasClass(C)||(0===a?(d[n]=t,m&&(s.startDate[n]=t),s.limit(S(s.footer).find(M),null,0)):m?s.endDate[n]=t:(e="year"===n?s.getAsYM(t,v[1]-1,"sub"):s.getAsYM(v[0],t,"sub"),S.extend(d,{year:e[0],month:e[1]})),"year"===l.type||"month"===l.type?(S(u).find("."+w).removeClass(w),S(this).addClass(w),"month"===l.type&&"year"===n&&(s.listYM[a][0]=t,m&&(s[["startDate","endDate"][a]].year=t),s.list("month",a))):(s.checkDate("limit").calendar(),s.closeList()),s.setBtnStatus(),l.range||s.done(null,"change"),S(s.footer).find(E).removeClass(C))})):(f=S.elem("span",{class:b}),o=function(){S(u).find("ol").each(function(e){var n=this,t=S(n).find("li");n.scrollTop=30*(s[T][D[e]]-2),n.scrollTop<=0&&t.each(function(e,t){if(!S(this).hasClass(C))return n.scrollTop=30*(e-2),!0})})},y=S(t[2]).find("."+b),o(),f.innerHTML=l.range?[c.startTime,c.endTime][a]:c.timeTips,S(s.elemMain[a]).addClass("laydate-time-show"),y[0]&&y.remove(),t[2].appendChild(f),S(u).find("ol").each(function(t){var n=this;S(n).find("li").on("click",function(){var e=0|this.innerHTML;S(this).hasClass(C)||(l.range?s[T][D[t]]=e:d[D[t]]=e,S(n).find("."+w).removeClass(w),S(this).addClass(w),r(),o(),!s.endDate&&"time"!==l.type||s.done(null,"change"),s.setBtnStatus())})})),s},o.prototype.listYM=[],o.prototype.closeList=function(){var n=this;n.config;S.each(n.elemCont,function(e,t){S(this).find("."+x).remove(),S(n.elemMain[e]).removeClass("laydate-ym-show laydate-time-show")}),S(n.elem).find("."+b).remove()},o.prototype.setBtnStatus=function(e,t,n){var a=this,i=a.config,r=S(a.footer).find(M);i.range&&"date"!==i.type&&"time"!==i.type&&(t=t||a.startDate,n=n||a.endDate,i=a.newDate(t).getTime()>a.newDate(n).getTime(),a.limit(null,t)||a.limit(null,n)?r.addClass(C):r[i?"addClass":"removeClass"](C),e&&i&&a.hint("string"==typeof e?l.replace(/日期/g,e):l))},o.prototype.parse=function(e,t){var n=this,a=n.config,i=t||(e?S.extend({},n.endDate,n.endTime):a.range?S.extend({},n.startDate,n.startTime):a.dateTime),r=n.format.concat();return S.each(r,function(e,t){/yyyy|y/.test(t)?r[e]=S.digit(i.year,t.length):/MM|M/.test(t)?r[e]=S.digit(i.month+1,t.length):/dd|d/.test(t)?r[e]=S.digit(i.date,t.length):/HH|H/.test(t)?r[e]=S.digit(i.hours,t.length):/mm|m/.test(t)?r[e]=S.digit(i.minutes,t.length):/ss|s/.test(t)&&(r[e]=S.digit(i.seconds,t.length))}),a.range&&!e?r.join("")+" "+a.range+" "+n.parse(1):r.join("")},o.prototype.newDate=function(e){return e=e||{},new Date(e.year||1,e.month||0,e.date||1,e.hours||0,e.minutes||0,e.seconds||0)},o.prototype.setValue=function(e){var t=this.config,n=this.bindElem||t.elem[0],a=this.isInput(n)?"val":"html";return"static"===t.position||S(n)[a](e||""),this},o.prototype.stampRange=function(){var a,i,r=this,e=r.config,t=S(r.elem).find("td");if(e.range&&!r.endDate&&S(r.footer).find(M).addClass(C),r.endDate){if(a=r.newDate({year:r.startDate.year,month:r.startDate.month,date:r.startDate.date}).getTime(),(i=r.newDate({year:r.endDate.year,month:r.endDate.month,date:r.endDate.date}).getTime())<a)return r.hint(l);S.each(t,function(e,t){var n=S(t).attr("lay-ymd").split("-"),n=r.newDate({year:n[0],month:n[1]-1,date:n[2]}).getTime();S(t).removeClass(d+" "+w),n!==a&&n!==i||S(t).addClass(S(t).hasClass("fa-prev")||S(t).hasClass("fa-next")?d:w),a<n&&n<i&&S(t).addClass(d)})}},o.prototype.done=function(e,t){var n=this,a=n.config,i=S.extend({},n.startDate?S.extend(n.startDate,n.startTime):a.dateTime),r=S.extend({},S.extend(n.endDate,n.endTime));return S.each([i,r],function(e,t){"month"in t&&S.extend(t,{month:t.month+1})}),e=e||[n.parse(),i,r],"function"==typeof a[t||"done"]&&a[t||"done"].apply(a,e),n},o.prototype.choose=function(e){function t(e){new Date,e&&S.extend(i,o),a.range&&(n.startDate?S.extend(n.startDate,o):n.startDate=S.extend({},o,n.startTime),n.startYMD=o)}var n=this,a=n.config,i=a.dateTime,r=S(n.elem).find("td"),o={year:0|(o=e.attr("lay-ymd").split("-"))[0],month:(0|o[1])-1,date:0|o[2]};e.hasClass(C)||(a.range?(S.each(["startTime","endTime"],function(e,t){n[t]=n[t]||{hours:0,minutes:0,seconds:0}}),n.endState?(t(),delete n.endState,delete n.endDate,n.startState=!0,r.removeClass(w+" "+d),e.addClass(w)):n.startState?(e.addClass(w),n.endDate?S.extend(n.endDate,o):n.endDate=S.extend({},o,n.endTime),n.newDate(o).getTime()<n.newDate(n.startYMD).getTime()&&(r=S.extend({},n.endDate,{hours:n.startDate.hours,minutes:n.startDate.minutes,seconds:n.startDate.seconds}),S.extend(n.endDate,n.startDate,{hours:n.endDate.hours,minutes:n.endDate.minutes,seconds:n.endDate.seconds}),n.startDate=r),a.showBottom||n.done(),n.stampRange(),n.endState=!0,n.done(null,"change")):(e.addClass(w),t(),n.startState=!0),S(n.footer).find(M)[n.endDate?"removeClass":"addClass"](C)):"static"===a.position?(t(!0),n.calendar().done().done(null,"change")):"date"===a.type?(t(!0),n.setValue(n.parse()).remove().done()):"datetime"===a.type&&(t(!0),n.calendar().done(null,"change")))},o.prototype.tool=function(e,t){var n=this,a=n.config,i=a.dateTime,r="static"===a.position,o={datetime:function(){S(e).hasClass(C)||(n.list("time",0),a.range&&n.list("time",1),S(e).attr("lay-type","date").html(n.lang().dateTips))},date:function(){n.closeList(),S(e).attr("lay-type","datetime").html(n.lang().timeTips)},clear:function(){n.setValue("").remove(),r&&(S.extend(i,n.firstDate),n.calendar()),a.range&&(delete n.startState,delete n.endState,delete n.endDate,delete n.startTime,delete n.endTime),n.done(["",{},{}])},now:function(){var e=new Date;S.extend(i,n.systemDate(),{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}),n.setValue(n.parse()).remove(),r&&n.calendar(),n.done()},confirm:function(){if(a.range){if(!n.endDate)return n.hint("请先选择日期范围");if(S(e).hasClass(C))return n.hint("time"===a.type?l.replace(/日期/g,"时间"):l)}else if(S(e).hasClass(C))return n.hint("不在有效日期或时间范围内");n.done(),n.setValue(n.parse()).remove()}};o[t]&&o[t]()},o.prototype.change=function(i){function e(e){var t=["startDate","endDate"][i],n=S(d).find(".laydate-year-list")[0],a=S(d).find(".laydate-month-list")[0];return n&&(c[0]=e?c[0]-15:c[0]+15,r.list("year",i)),a&&(e?c[0]--:c[0]++,r.list("month",i)),(n||a)&&(S.extend(s,{year:c[0]}),l&&(r[t].year=c[0]),o.range||r.done(null,"change"),r.setBtnStatus(),o.range||r.limit(S(r.footer).find(M),{year:c[0]})),n||a}var r=this,o=r.config,s=o.dateTime,l=o.range&&("year"===o.type||"month"===o.type),d=r.elemCont[i||0],c=r.listYM[i];return{prevYear:function(){e("sub")||(s.year--,r.checkDate("limit").calendar(),o.range||r.done(null,"change"))},prevMonth:function(){var e=r.getAsYM(s.year,s.month,"sub");S.extend(s,{year:e[0],month:e[1]}),r.checkDate("limit").calendar(),o.range||r.done(null,"change")},nextMonth:function(){var e=r.getAsYM(s.year,s.month);S.extend(s,{year:e[0],month:e[1]}),r.checkDate("limit").calendar(),o.range||r.done(null,"change")},nextYear:function(){e()||(s.year++,r.checkDate("limit").calendar(),o.range||r.done(null,"change"))}}},o.prototype.changeEvent=function(){var i=this;i.config;S(i.elem).on("click",function(e){S.stope(e)}),S.each(i.elemHeader,function(a,e){S(e[0]).on("click",function(e){i.change(a).prevYear()}),S(e[1]).on("click",function(e){i.change(a).prevMonth()}),S(e[2]).find("span").on("click",function(e){var t=S(this),n=t.attr("lay-ym"),t=t.attr("lay-type");n&&(n=n.split("-"),i.listYM[a]=[0|n[0],0|n[1]],i.list(t,a),S(i.footer).find(E).addClass(C))}),S(e[3]).on("click",function(e){i.change(a).nextMonth()}),S(e[4]).on("click",function(e){i.change(a).nextYear()})}),S.each(i.table,function(e,t){S(t).find("td").on("click",function(){i.choose(S(this))})}),S(i.footer).find("span").on("click",function(){var e=S(this).attr("lay-type");i.tool(this,e)})},o.prototype.isInput=function(e){return/input|textarea/.test(e.tagName.toLocaleLowerCase())},o.prototype.events=function(){function e(e,t){e.on(a.trigger,function(){t&&(n.bindElem=this),n.render()})}var n=this,a=n.config;a.elem[0]&&!a.elem[0].eventHandler&&(e(a.elem,"bind"),e(a.eventElem),S(document).on("click",function(e){e.target!==a.elem[0]&&e.target!==a.eventElem[0]&&e.target!==S(a.closeStop)[0]&&n.remove()}).on("keydown",function(e){13===e.keyCode&&S("#"+n.elemID)[0]&&n.elemID===o.thisElem&&(e.preventDefault(),S(n.footer).find(M)[0].click())}),S(window).on("resize",function(){return!(!n.elem||!S(".layui-laydate")[0])&&void n.position()}),a.elem[0].eventHandler=!0)},u.render=function(e){e=new o(e);return function(){var t=this;return{hint:function(e){t.hint.call(t,e)},config:t.config}}.call(e)},u.getEndDate=function(e,t){var n=new Date;return n.setFullYear(t||n.getFullYear(),e||n.getMonth()+1,1),new Date(n.getTime()-864e5).getDate()},window.lay=window.lay||S,t?(u.ready(),layui.define(function(e){u.path=layui.cache.dir,e("laydate",u)})):"function"==typeof define&&define.amd?define(function(){return u}):(u.ready(),window.laydate=u)}();!function(n){function r(e,t){var n,i,r;if("string"==typeof e)return s(e);for(n=[],i=e.length,r=0;r<i;r++)n.push(s(e[r]));return t.apply(null,n)}function i(e,t,n){2===arguments.length&&(n=t,t=null),r(t||[],function(){o(e,n,arguments)})}function t(e){return n.__dollar=e,function(e){var t,n,i,r,o,s=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in a)if(n=e,a.hasOwnProperty(t)){for(o=s((i=t.split("/")).pop());r=s(i.shift());)n[r]=n[r]||{},n=n[r];n[o]=a[t]}return e}((h=n,t=r,(e=i)("dollar-third",[],function(){var e=h.__dollar||h.jQuery||h.Zepto;if(!e)throw new Error("jQuery or Zepto not found!");return e}),e("dollar",["dollar-third"],function(e){return e}),e("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),e("promise",["promise-third"],function(e){return e}),e("base",["dollar","promise"],function(o,e){function t(){}var i,n,r,s,a,u,c,l,d=Function.call;function f(e,t){return function(){return e.apply(t,arguments)}}return{version:"0.1.5",$:o,Deferred:e.Deferred,isPromise:e.isPromise,when:e.when,browser:(r=navigator.userAgent,s={},a=r.match(/WebKit\/([\d.]+)/),u=r.match(/Chrome\/([\d.]+)/)||r.match(/CriOS\/([\d.]+)/),c=r.match(/MSIE\s([\d\.]+)/)||r.match(/(?:trident)(?:.*rv:([\w.]+))?/i),l=r.match(/Firefox\/([\d.]+)/),e=r.match(/Safari\/([\d.]+)/),r=r.match(/OPR\/([\d.]+)/),a&&(s.webkit=parseFloat(a[1])),u&&(s.chrome=parseFloat(u[1])),c&&(s.ie=parseFloat(c[1])),l&&(s.firefox=parseFloat(l[1])),e&&(s.safari=parseFloat(e[1])),r&&(s.opera=parseFloat(r[1])),s),os:(e=navigator.userAgent,r={},s=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),e=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/),s&&(r.android=parseFloat(s[1])),e&&(r.ios=parseFloat(e[1].replace(/_/g,"."))),r),inherits:function(e,t,n){var i,r;return"function"==typeof t?(i=t,t=null):i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},o.extend(!0,i,e,n||{}),i.__super__=e.prototype,i.prototype=(r=e.prototype,Object.create?Object.create(r):((n=function(){}).prototype=r,new n)),t&&o.extend(!0,i.prototype,t),i},noop:t,bindFn:f,log:h.console?f(console.log,console):t,nextTick:function(e){setTimeout(e,1)},slice:(n=[].slice,function(){return d.apply(n,arguments)}),guid:(i=0,function(e){for(var t=(+new Date).toString(32),n=0;n<5;n++)t+=Math.floor(65535*Math.random()).toString(32);return(e||"wu_")+t+(i++).toString(32)}),formatSize:function(e,t,n){var i;for(n=n||["B","K","M","G","TB"];(i=n.shift())&&1024<e;)e/=1024;return("B"===i?e:e.toFixed(t||2))+i}}}),e("mediator",["base"],function(e){var t,r=e.$,o=[].slice,s=/\s+/;function a(e,t,n,i){return r.grep(e,function(e){return e&&(!t||e.e===t)&&(!n||e.cb===n||e.cb._cb===n)&&(!i||e.ctx===i)})}function u(e,n,i){r.each((e||"").split(s),function(e,t){i(t,n)})}function c(e,t){for(var n,i=!1,r=-1,o=e.length;++r<o;)if(!1===(n=e[r]).cb.apply(n.ctx2,t)){i=!0;break}return!i}return t={on:function(e,t,n){var i,r=this;return t&&(i=this._events||(this._events=[]),u(e,t,function(e,t){e={e:e};e.cb=t,e.ctx=n,e.ctx2=n||r,e.id=i.length,i.push(e)})),this},once:function(e,t,i){var r=this;return t&&u(e,t,function(e,t){var n=function(){return r.off(e,n),t.apply(i||r,arguments)};n._cb=t,r.on(e,n,i)}),r},off:function(e,t,n){var i=this._events;return i&&(e||t||n?u(e,t,function(e,t){r.each(a(i,e,t,n),function(){delete i[this.id]})}):this._events=[]),this},trigger:function(e){var t,n,i;return this._events&&e?(t=o.call(arguments,1),n=a(this._events,e),i=a(this._events,"all"),c(n,t)&&c(i,arguments)):this}},r.extend({installTo:function(e){return r.extend(e,t)}},t)}),e("uploader",["base","mediator"],function(e,r){var o=e.$;function n(e){this.options=o.extend(!0,{},n.options,e),this._init(this.options)}return n.options={},r.installTo(n.prototype),o.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),o.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;if(!(1<arguments.length))return e?n[e]:n;o.isPlainObject(t)&&o.isPlainObject(n[e])?o.extend(n[e],t):n[e]=t},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var t=[].slice.call(arguments,1),n=this.options,i="on"+e.substring(0,1).toUpperCase()+e.substring(1);return!(!1===r.trigger.apply(this,arguments)||o.isFunction(n[i])&&!1===n[i].apply(this,t)||o.isFunction(this[i])&&!1===this[i].apply(this,t)||!1===r.trigger.apply(r,[this,e].concat(t)))},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n}),e("runtime/runtime",["base","mediator"],function(t,e){function i(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null}var r=t.$,o={};function s(e){this.options=r.extend({container:document.body},e),this.uid=t.guid("rt_")}return r.extend(s.prototype,{getContainer:function(){var e,t=this.options;return this._container||(e=r(t.container||document.body),(t=r(document.createElement("div"))).attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,this._parent=e,t)},init:t.noop,exec:t.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),s.orders="html5,flash",s.addRuntime=function(e,t){o[e]=t},s.hasRuntime=function(e){return!!(e?o[e]:i(o))},s.create=function(e,t){var n;if(t=t||s.orders,r.each(t.split(/\s*,\s*/g),function(){if(o[this])return n=this,!1}),!(n=n||i(o)))throw new Error("Runtime Error");return new o[n](e)},e.installTo(s.prototype),s}),e("runtime/client",["base","mediator","runtime/runtime"],function(o,e,s){var a,i;function t(t,n){var i,e,r=o.Deferred();this.uid=o.guid("client_"),this.runtimeReady=function(e){return r.done(e)},this.connectRuntime=function(e,t){if(i)throw new Error("already connected!");return r.done(t),(i=(i="string"==typeof e&&a.get(e)?a.get(e):i)||a.get(null,n))?(o.$.extend(i.options,e),i.__promise.then(r.resolve),i.__client++):((i=s.create(e,e.runtimeOrder)).__promise=r.promise(),i.once("ready",r.resolve),i.init(),a.add(i),i.__client=1),n&&(i.__standalone=n),i},this.getRuntime=function(){return i},this.disconnectRuntime=function(){i&&(i.__client--,i.__client<=0&&(a.remove(i),delete i.__promise,i.destroy()),i=null)},this.exec=function(){if(i){var e=o.slice(arguments);return t&&e.unshift(t),i.exec.apply(this,e)}},this.getRuid=function(){return i&&i.uid},this.destroy=(e=this.destroy,function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()})}return i={},a={add:function(e){i[e.uid]=e},get:function(e,t){if(e)return i[e];for(var n in i)if(!t||!i[n].__standalone)return i[n];return null},remove:function(e){delete i[e.uid]}},e.installTo(t.prototype),t}),e("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){var i=e.$;function r(e){(e=this.options=i.extend({},r.options,e)).container=i(e.container),e.container.length&&n.call(this,"DragAndDrop")}return r.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),e("widgets/widget",["base","uploader"],function(l,e){var d=l.$,t=e.prototype._init,n=e.prototype.destroy,f={},o=[];function r(e){this.owner=e,this.options=e.options}return d.extend(r.prototype,{init:l.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&d.isFunction(this[n[e]])?this[n[e]].apply(this,t):f},request:function(){return this.owner.request.apply(this.owner,arguments)}}),d.extend(e.prototype,{_init:function(){var n=this,i=n._widgets=[],r=n.options.disableWidgets||"";return d.each(o,function(e,t){r&&~r.indexOf(t._name)||i.push(new t(n))}),t.apply(n,arguments)},request:function(e,t,n){var i,r,o=0,s=this._widgets,a=s&&s.length,u=[],c=[];for(t=function(e){if(e){var t=e.length,n=d.type(e);return 1===e.nodeType&&t||("array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&0<t&&t-1 in e))}}(t)?t:[t];o<a;o++)(i=s[o].invoke(e,t))!==f&&(l.isPromise(i)?c:u).push(i);return n||c.length?(r=l.when.apply(l,c))[r=r.pipe?"pipe":"then"](function(){var e=l.Deferred(),t=arguments;return 1===t.length&&(t=t[0]),setTimeout(function(){e.resolve(t)},1),e.promise()})[n?r:"done"](n||l.noop):u[0]},destroy:function(){n.apply(this,arguments),this._widgets=null}}),e.register=r.register=function(e,t){var n,i={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(t=e,d.each(t,function(e){"_"!==e[0]&&"name"!==e?i[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e:"name"===e&&(i.name=t.name)})):i=d.extend(i,e),t.responseMap=i,(n=l.inherits(r,t))._name=i.name,o.push(n),n},e.unRegister=r.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=o.length;t--;)o[t]._name===e&&o.splice(t,1)},r}),e("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(i,e,r){var o=i.$;return e.options.dnd="",e.register({name:"dnd",init:function(e){if(e.dnd&&"html5"===this.request("predict-runtime-type")){var t=this,n=i.Deferred(),e=o.extend({},{disableGlobalDnd:e.disableGlobalDnd,container:e.dnd,accept:e.accept});return this.dnd=e=new r(e),e.once("ready",n.resolve),e.on("drop",function(e){t.request("add-file",[e])}),e.on("accept",function(e){return t.owner.trigger("dndAccept",e)}),e.init(),n.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),e("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){var i=e.$;function r(e){(e=this.options=i.extend({},e)).container=i(e.container||document.body),n.call(this,"FilePaste")}return e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),e("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(i,e,r){var o=i.$;return e.register({name:"paste",init:function(e){if(e.paste&&"html5"===this.request("predict-runtime-type")){var t=this,n=i.Deferred(),e=o.extend({},{container:e.paste,accept:e.accept});return this.paste=e=new r(e),e.once("ready",n.resolve),e.on("paste",function(e){t.owner.request("add-file",[e])}),e.init(),n.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),e("lib/blob",["base","runtime/client"],function(e,n){function t(e,t){this.source=t,this.ruid=e,this.size=t.size||0,!t.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=t.type||"application/octet-stream",n.call(this,"Blob"),this.uid=t.uid||this.uid,e&&this.connectRuntime(e)}return e.inherits(n,{constructor:t,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),t}),e("lib/file",["base","lib/blob"],function(e,i){var r=1,o=/\.([^.]+)$/;return e.inherits(i,function(e,t){var n;this.name=t.name||"untitled"+r++,!(n=o.exec(t.name)?RegExp.$1.toLowerCase():"")&&t.type&&(n=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(t.type)?RegExp.$1.toLowerCase():"",this.name+="."+n),this.ext=n,this.lastModifiedDate=t.lastModifiedDate||(new Date).toLocaleString(),i.apply(this,arguments)})}),e("lib/filepicker",["base","runtime/client","lib/file"],function(e,t,o){var s=e.$;function n(e){if((e=this.options=s.extend({},n.options,e)).container=s(e.id),!e.container.length)throw new Error("按钮指定错误");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=s(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),t.call(this,"FilePicker",!0)}return n.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},e.inherits(t,{constructor:n,init:function(){var n=this,i=n.options,r=i.button;r.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":r.addClass("webuploader-pick-hover");break;case"mouseleave":r.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",s.map(t,function(e){return(e=new o(n.getRuid(),e))._refer=i.container,e}),i.container)}}),n.connectRuntime(i,function(){n.refresh(),n.exec("init",i),n.trigger("ready")}),this._resizeHandler=e.bindFn(this.refresh,this),s(h).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),i=t.outerHeight?t.outerHeight():t.height(),t=t.offset();n&&i&&e.css({bottom:"auto",right:"auto",width:n+"px",height:i+"px"}).offset(t)},enable:function(){this.options.button.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var e=this.options.button;s(h).off("resize",this._resizeHandler),e.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),n}),e("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(a,e,u){var c=a.$;return c.extend(e.options,{pick:null,accept:null}),e.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){c.each(this.pickers,function(){this.refresh()})},addBtn:function(n){var i=this,r=i.options,o=r.accept,s=[];if(n)return c.isPlainObject(n)||(n={id:n}),c(n.id).each(function(){var e=a.Deferred(),t=c.extend({},n,{accept:c.isPlainObject(o)?[o]:o,swf:r.swf,runtimeOrder:r.runtimeOrder,id:this}),t=new u(t);t.once("ready",e.resolve),t.on("select",function(e){i.owner.request("add-file",[e])}),t.init(),i.pickers.push(t),s.push(e.promise())}),a.when.apply(a,s)},disable:function(){c.each(this.pickers,function(){this.disable()})},enable:function(){c.each(this.pickers,function(){this.enable()})},destroy:function(){c.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),e("lib/image",["base","runtime/client","lib/blob"],function(t,n,i){var r=t.$;function o(e){this.options=r.extend({},o.options,e),n.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}return o.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},t.inherits(n,{constructor:o,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var e=t.slice(arguments);return this.exec.apply(this,["resize"].concat(e))},crop:function(){var e=t.slice(arguments);return this.exec.apply(this,["crop"].concat(e))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){e=this.exec("getAsBlob",e);return new i(this.getRuid(),e)}}),o}),e("widgets/image",["base","uploader","lib/image","widgets/widget"],function(t,e,a){var s,i,r,u=t.$;function o(){for(var e;r.length&&i<5242880;)e=r.shift(),i+=e[0],e[1]()}return i=0,r=[],s=function(e,t,n){r.push([t,n]),e.once("destroy",function(){i-=t,setTimeout(o,1)}),setTimeout(o,1)},u.extend(e.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),e.register({name:"image",makeThumb:function(e,t,n,i){var r,o;(e=this.request("get-file",e)).type.match(/^image/)?(r=u.extend({},this.options.thumb),u.isPlainObject(n)&&(r=u.extend(r,n),n=null),n=n||r.width,i=i||r.height,(o=new a(r)).once("load",function(){e._info=e._info||o.info(),e._meta=e._meta||o.meta(),n<=1&&0<n&&(n=e._info.width*n),i<=1&&0<i&&(i=e._info.height*i),o.resize(n,i)}),o.once("complete",function(){t(!1,o.getAsDataUrl(r.type)),o.destroy()}),o.once("error",function(e){t(e||!0),o.destroy()}),s(o,e.source.size,function(){e._info&&o.info(e._info),e._meta&&o.meta(e._meta),o.loadFromBlob(e.source)})):t(!0)},beforeSendFile:function(n){var i,r,o=this.options.compress||this.options.resize,e=o&&o.compressSize||0,s=o&&o.noCompressIfLarger||!1;if(n=this.request("get-file",n),o&&~"image/jpeg,image/jpg".indexOf(n.type)&&!(n.size<e)&&!n._compressed)return o=u.extend({},o),r=t.Deferred(),i=new a(o),r.always(function(){i.destroy(),i=null}),i.once("error",r.reject),i.once("load",function(){var e=o.width,t=o.height;n._info=n._info||i.info(),n._meta=n._meta||i.meta(),e<=1&&0<e&&(e=n._info.width*e),t<=1&&0<t&&(t=n._info.height*t),i.resize(e,t)}),i.once("complete",function(){var e,t;try{e=i.getAsBlob(o.type),t=n.size,(!s||e.size<t)&&(n.source=e,n.size=e.size,n.trigger("resize",e.size,t)),n._compressed=!0,r.resolve()}catch(e){r.resolve()}}),n._info&&i.info(n._info),n._meta&&i.meta(n._meta),i.loadFromBlob(n.source),r.promise()}})}),e("file",["base","mediator"],function(e,t){var e=e.$,n="WU_FILE_",i=0,r=/\.([^.]+)$/,o={};function s(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||+new Date,this.id=n+i++,this.ext=r.exec(this.name)?RegExp.$1:"",this.statusText="",o[this.id]=s.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(s.Status.ERROR,e)})}return e.extend(s.prototype,{setStatus:function(e,t){var n=o[this.id];void 0!==t&&(this.statusText=t),e!==n&&(o[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return o[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete o[this.id]}}),t.installTo(s.prototype),s.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},s}),e("queue",["base","mediator","file"],function(e,t,n){var o=e.$,r=n.Status;function i(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}return o.extend(i.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,i=this._queue.length;for(e=e||r.QUEUED,t=0;t<i;t++)if(e===(n=this._queue[t]).getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],i=0,r=this._queue.length;i<r;i++)e=this._queue[i],t.length&&!~o.inArray(e.getStatus(),t)||n.push(e);return n},removeFile:function(e){this._map[e.id]&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var n=this;this._map[e.id]||(this._map[e.id]=e).on("statuschange",function(e,t){n._onFileStatusChange(e,t)})},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case r.PROGRESS:n.numOfProgress--;break;case r.QUEUED:n.numOfQueue--;break;case r.ERROR:n.numOfUploadFailed--;break;case r.INVALID:n.numOfInvalid--;break;case r.INTERRUPT:n.numofInterrupt--}switch(e){case r.QUEUED:n.numOfQueue++;break;case r.PROGRESS:n.numOfProgress++;break;case r.ERROR:n.numOfUploadFailed++;break;case r.COMPLETE:n.numOfSuccess++;break;case r.CANCELLED:n.numOfCancel++;break;case r.INVALID:n.numOfInvalid++;break;case r.INTERRUPT:n.numofInterrupt++}}}),t.installTo(i.prototype),i}),e("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(c,e,l,t,n,d){var f=c.$,i=/\.\w+$/,o=t.Status;return e.register({name:"queue",init:function(e){var t,n,i,r,o,s,a,u=this;if(f.isPlainObject(e.accept)&&(e.accept=[e.accept]),e.accept){for(o=[],i=0,n=e.accept.length;i<n;i++)(r=e.accept[i].extensions)&&o.push(r);o.length&&(s="\\."+o.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),u.accept=new RegExp(s,"i")}if(u.queue=new l,u.stats=u.queue.stats,"html5"===this.request("predict-runtime-type"))return t=c.Deferred(),this.placeholder=a=new d("Placeholder"),a.connectRuntime({runtimeOrder:"html5"},function(){u._ruid=a.getRuid(),t.resolve()}),t.promise()},_wrapFile:function(e){if(!(e instanceof t)){if(!(e instanceof n)){if(!this._ruid)throw new Error("Can't add external files.");e=new n(this._ruid,e)}e=new t(e)}return e},acceptFile:function(e){return!(!e||!e.size||this.accept&&i.exec(e.name)&&!this.accept.test(e.name))},_addFile:function(e){var t=this;if(e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e)){if(t.acceptFile(e))return t.queue.append(e),t.owner.trigger("fileQueued",e),e;t.owner.trigger("error","Q_TYPE_DENIED",e)}},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=f.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){return this.stats},removeFile:function(e,t){e=e.id?e:this.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,i,r;if(e)return(e=e.id?e:this.queue.getFile(e)).setStatus(o.QUEUED),void(t||this.request("start-upload"));for(i=0,r=(n=this.queue.getFiles(o.ERROR)).length;i<r;i++)(e=n[i]).setStatus(o.QUEUED);this.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new l,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),e("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,r){return e.support=function(){return r.hasRuntime.apply(r,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,t,n=this.options.runtimeOrder||r.orders,i=this.type;if(!i)for(e=0,t=(n=n.split(/\s*,\s*/g)).length;e<t;e++)if(r.hasRuntime(n[e])){this.type=i=n[e];break}return i}})}),e("lib/transport",["base","runtime/client","mediator"],function(e,n,t){var i=e.$;function r(e){var t=this;e=t.options=i.extend(!0,{},r.options,e||{}),n.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){t.trigger("progress",1),clearTimeout(t._timer)})}return r.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},i.extend(r.prototype,{appendBlob:function(e,t,n){var i=this,r=i.options;i.getRuid()&&i.disconnectRuntime(),i.connectRuntime(t.ruid,function(){i.exec("init")}),i._blob=t,r.fileVal=e||r.fileVal,r.filename=n||r.filename},append:function(e,t){"object"==typeof e?i.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==typeof e?i.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),t.installTo(r.prototype),r}),e("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(l,e,t,d){var f=l.$,s=l.isPromise,h=t.Status;f.extend(e.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),e.register({name:"upload",init:function(){var e=this.owner,t=this;this.runing=!1,this.progress=!1,e.on("startUpload",function(){t.progress=!0}).on("uploadFinished",function(){t.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=l.bindFn(this._tick,this),e.on("uploadComplete",function(e){e.blocks&&f.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(n){var i=this;if(f.each(i.request("get-files",h.INVALID),function(){i.request("remove-file",this)}),n)if((n=n.id?n:i.request("get-file",n)).getStatus()===h.INTERRUPT)f.each(i.pool,function(e,t){t.file===n&&t.transport&&t.transport.send()}),n.setStatus(h.QUEUED);else{if(n.getStatus()===h.PROGRESS)return;n.setStatus(h.QUEUED)}else f.each(i.request("get-files",[h.INITED]),function(){this.setStatus(h.QUEUED)});if(!i.runing){i.runing=!0;var r=[];for(f.each(i.pool,function(e,t){var n=t.file;n.getStatus()===h.INTERRUPT&&(r.push(n),i._trigged=!1,t.transport&&t.transport.send())});n=r.shift();)n.setStatus(h.PROGRESS);n||f.each(i.request("get-files",h.INTERRUPT),function(){this.setStatus(h.PROGRESS)}),i._trigged=!1,l.nextTick(i.__tick),i.owner.trigger("startUpload")}},stopUpload:function(n,e){var i=this;if(!0===n&&(e=n,n=null),!1!==i.runing){if(n)return(n=n.id?n:i.request("get-file",n)).getStatus()!==h.PROGRESS&&n.getStatus()!==h.QUEUED?void 0:(n.setStatus(h.INTERRUPT),f.each(i.pool,function(e,t){t.file===n&&(t.transport&&t.transport.abort(),i._putback(t),i._popBlock(t))}),l.nextTick(i.__tick));i.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(h.INTERRUPT),e&&f.each(i.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(h.INTERRUPT)}),i.owner.trigger("stopUpload")}},cancelFile:function(e){(e=e.id?e:this.request("get-file",e)).blocks&&f.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(h.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){(e=e.id?e:this.request("get-file",e)).setStatus(t||h.COMPLETE),e.skipped=!0,e.blocks&&f.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var e,t=this,n=t.options;if(t._promise)return t._promise.always(t.__tick);t.pool.length<n.threads&&(e=t._nextBlock())?(t._trigged=!1,n=function(e){t._promise=null,e&&e.file&&t._startSend(e),l.nextTick(t.__tick)},t._promise=s(e)?e.always(n):n(e)):t.remaning||t._getStats().numOfQueue||t._getStats().numofInterrupt||(t.runing=!1,t._trigged||l.nextTick(function(){t.owner.trigger("uploadFinished")}),t._trigged=!0)},_putback:function(e){e.cuted.unshift(e),~this.stack.indexOf(e.cuted)||this.stack.unshift(e.cuted)},_getStack:function(){for(var e,t=0;e=this.stack[t++];){if(e.has()&&e.file.getStatus()===h.PROGRESS)return e;e.has()&&(e.file.getStatus()===h.PROGRESS||e.file.getStatus()===h.INTERRUPT)||this.stack.splice(--t,1)}return null},_nextBlock:function(){var t,e,n,i,r=this,o=r.options;return(t=this._getStack())?(o.prepareNextFile&&!r.pending.length&&r._prepareNextFile(),t.shift()):r.runing?(!r.pending.length&&r._getStats().numOfQueue&&r._prepareNextFile(),e=r.pending.shift(),n=function(e){return e?(t=function(e,t){for(var n,i=[],r=e.source.size,o=t?Math.ceil(r/t):1,s=0,a=0,u={file:e,has:function(){return!!i.length},shift:function(){return i.shift()},unshift:function(e){i.unshift(e)}};a<o;)n=Math.min(t,r-s),i.push({file:e,start:s,end:t?s+n:r,total:r,chunks:o,chunk:a++,cuted:u}),s+=n;return e.blocks=i.concat(),e.remaning=i.length,u}(e,o.chunked?o.chunkSize:0),r.stack.push(t),t.shift()):null},s(e)?(i=e.file,(e=e[e.pipe?"pipe":"then"](n)).file=i,e):n(e)):void 0},_prepareNextFile:function(){var t,n=this,i=n.request("fetch-file"),r=n.pending;i&&(t=n.request("before-send-file",i,function(){return i.getStatus()===h.PROGRESS||i.getStatus()===h.INTERRUPT?i:n._finishFile(i)}),n.owner.trigger("uploadStart",i),i.setStatus(h.PROGRESS),t.file=i,t.done(function(){var e=f.inArray(t,r);~e&&r.splice(e,1,i)}),t.fail(function(e){i.setStatus(h.ERROR,e),n.owner.trigger("uploadError",i,e),n.owner.trigger("uploadComplete",i)}),r.push(t))},_popBlock:function(e){var t=f.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(e){var t=this,n=e.file;n.getStatus()===h.PROGRESS?(t.pool.push(e),t.remaning++,e.blob=1===e.chunks?n.source:n.source.slice(e.start,e.end),t.request("before-send",e,function(){n.getStatus()===h.PROGRESS?t._doSend(e):(t._popBlock(e),l.nextTick(t.__tick))}).fail(function(){1===n.remaning?t._finishFile(n).always(function(){e.percentage=1,t._popBlock(e),t.owner.trigger("uploadComplete",n),l.nextTick(t.__tick)}):(e.percentage=1,t.updateFileProgress(n),t._popBlock(e),l.nextTick(t.__tick))})):n.getStatus()===h.INTERRUPT&&t._putback(e)},_doSend:function(n){var i,r,t=this,o=t.owner,s=t.options,a=n.file,u=new d(s),e=f.extend({},s.formData),c=f.extend({},s.headers);(n.transport=u).on("destroy",function(){delete n.transport,t._popBlock(n),l.nextTick(t.__tick)}),u.on("progress",function(e){n.percentage=e,t.updateFileProgress(a)}),i=function(t){var e;return(r=u.getResponseAsJson()||{})._raw=u.getResponse(),e=function(e){t=e},t=!o.trigger("uploadAccept",n,r,e)?t||"server":t},u.on("error",function(e,t){n.retried=n.retried||0,1<n.chunks&&~"http,abort".indexOf(e)&&n.retried<s.chunkRetry?(n.retried++,u.send()):(t||"server"!==e||(e=i(e)),a.setStatus(h.ERROR,e),o.trigger("uploadError",a,e),o.trigger("uploadComplete",a))}),u.on("load",function(){var e;(e=i())?u.trigger("error",e,!0):1===a.remaning?t._finishFile(a,r):u.destroy()}),e=f.extend(e,{id:a.id,name:a.name,type:a.type,lastModifiedDate:a.lastModifiedDate,size:a.size}),1<n.chunks&&f.extend(e,{chunks:n.chunks,chunk:n.chunk}),o.trigger("uploadBeforeSend",n,e,c),u.appendBlob(s.fileVal,n.blob,a.name),u.append(e),u.setRequestHeader(c),u.send()},_finishFile:function(t,e,n){var i=this.owner;return i.request("after-send-file",arguments,function(){t.setStatus(h.COMPLETE),i.trigger("uploadSuccess",t,e,n)}).fail(function(e){t.getStatus()===h.PROGRESS&&t.setStatus(h.ERROR,e),i.trigger("uploadError",t,e)}).always(function(){i.trigger("uploadComplete",t)})},updateFileProgress:function(e){var t,n=0;e.blocks&&(f.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0))}})}),e("widgets/validator",["base","uploader","file","widgets/widget"],function(t,e,n){var i=t.$,r={},o={addValidator:function(e,t){r[e]=t},removeValidator:function(e){delete r[e]}};return e.register({name:"validator",init:function(){var e=this;t.nextTick(function(){i.each(r,function(){this.call(e.owner)})})}}),o.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,i=parseInt(t.fileNumLimit,10),r=!0;i&&(e.on("beforeFileQueued",function(e){return i<=n&&r&&(r=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",i,e),setTimeout(function(){r=!0},1)),!(i<=n)}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0}))}),o.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,i=parseInt(t.fileSizeLimit,10),r=!0;i&&(e.on("beforeFileQueued",function(e){var t=n+e.size>i;return t&&r&&(r=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",i,e),setTimeout(function(){r=!0},1)),!t}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0}))}),o.addValidator("fileSingleSizeLimit",function(){var t=this.options.fileSingleSizeLimit;t&&this.on("beforeFileQueued",function(e){if(e.size>t)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",t,e),!1})}),o.addValidator("duplicate",function(){var e=this,t=e.options,n={};t.duplicate||(e.on("beforeFileQueued",function(e){var t=e.__hash||(e.__hash=function(e){for(var t=0,n=0,i=e.length;n<i;n++)t=e.charCodeAt(n)+(t<<6)+(t<<16)-t;return t}(e.name+e.size+e.lastModifiedDate));if(n[t])return this.trigger("error","F_DUPLICATE",e),!1}),e.on("fileQueued",function(e){e=e.__hash;e&&(n[e]=!0)}),e.on("fileDequeued",function(e){e=e.__hash;e&&delete n[e]}),e.on("reset",function(){n={}}))}),o}),e("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),e("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(s,e,a,u){return e.register({name:"md5",md5File:function(e,t,n){var i=new a,r=s.Deferred(),o=e instanceof u?e:this.request("get-file",e).source;return i.on("progress load",function(e){e=e||{},r.notify(e.total?e.loaded/e.total:1)}),i.on("complete",function(){r.resolve(i.getResult())}),i.on("error",function(e){r.reject(e)}),1<arguments.length&&(n=n||0,(t=t||0)<0&&(t=o.size+t),n<0&&(n=o.size+n),n=Math.min(n,o.size),o=o.slice(t,n)),i.loadFromBlob(o),r.promise()}})}),e("runtime/compbase",[],function(){return function(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}}),e("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(a,t,n){var u={};function e(){var o={},s=this,e=this.destroy;t.apply(s,arguments),s.type="html5",s.exec=function(e,t){var n,i=this.uid,r=a.slice(arguments,2);if(u[e]&&(n=o[i]=o[i]||new u[e](this,s))[t])return n[t].apply(n,r)},s.destroy=function(){return e&&e.apply(this,arguments)}}return a.inherits(t,{constructor:e,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),e.register=function(e,t){return u[e]=a.inherits(n,t)},h.Blob&&h.FileReader&&h.DataView&&t.addRuntime("html5",e),e}),e("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,i){return e.register("Blob",{slice:function(e,t){var n=((n=this.owner.source).slice||n.webkitSlice||n.mozSlice).call(n,e,t);return new i(this.getRuid(),n)}})}),e("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(d,e,s){var a=d.$,u="webuploader-dnd-";return e.register("DragAndDrop",{init:function(){var e=this.elem=this.options.container;this.dragEnterHandler=d.bindFn(this._dragEnterHandler,this),this.dragOverHandler=d.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=d.bindFn(this._dragLeaveHandler,this),this.dropHandler=d.bindFn(this._dropHandler,this),this.dndOver=!1,e.on("dragenter",this.dragEnterHandler),e.on("dragover",this.dragOverHandler),e.on("dragleave",this.dragLeaveHandler),e.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(a(document).on("dragover",this.dragOverHandler),a(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t,n=this,i=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,(t=e.dataTransfer.items)&&t.length&&(n._denied=i=!n.trigger("accept",t)),n.elem.addClass(u+"over"),n.elem[i?"addClass":"removeClass"](u+"denied")),e.dataTransfer.dropEffect=i?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return t&&!a.contains(t,e.currentTarget)||(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e)),!1},_dragLeaveHandler:function(){var e=this,t=function(){e.dndOver=!1,e.elem.removeClass(u+"over "+u+"denied")};return clearTimeout(e._leaveTimer),e._leaveTimer=setTimeout(t,100),!1},_dropHandler:function(e){var t,n,i=this,r=i.getRuid(),o=i.elem.parent().get(0);if(o&&!a.contains(o,e.currentTarget))return!1;t=(e=e.originalEvent||e).dataTransfer;try{n=t.getData("text/html")}catch(e){}return n?void 0:(i._getTansferFiles(t,function(e){i.trigger("drop",a.map(e,function(e){return new s(r,e)}))}),i.dndOver=!1,i.elem.removeClass(u+"over"),!1)},_getTansferFiles:function(e,t){for(var n,i,r=[],o=[],s=e.items,a=e.files,u=!(!s||!s[0].webkitGetAsEntry),c=0,l=a.length;c<l;c++)n=a[c],i=s&&s[c],u&&i.webkitGetAsEntry().isDirectory?o.push(this._traverseDirectoryTree(i.webkitGetAsEntry(),r)):r.push(n);d.when.apply(d,o).done(function(){r.length&&t(r)})},_traverseDirectoryTree:function(e,o){var s=d.Deferred(),a=this;return e.isFile?e.file(function(e){o.push(e),s.resolve()}):e.isDirectory&&e.createReader().readEntries(function(e){for(var t=e.length,n=[],i=[],r=0;r<t;r++)n.push(a._traverseDirectoryTree(e[r],i));d.when.apply(d,n).then(function(){o.push.apply(o,i),s.resolve()},s.reject)}),s.promise()},destroy:function(){var e=this.elem;e&&(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(a(document).off("dragover",this.dragOverHandler),a(document).off("drop",this.dropHandler)))}})}),e("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(a,e,u){return e.register("FilePaste",{init:function(){var e,t,n,i,r=this.options,o=this.elem=r.container,s=".*";if(r.accept){for(e=[],t=0,n=r.accept.length;t<n;t++)(i=r.accept[t].mimeTypes)&&e.push(i);e.length&&(s=(s=e.join(",")).replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=s=new RegExp(s,"i"),this.hander=a.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(e){for(var t,n,i,r=[],o=this.getRuid(),s=0,a=(t=(e=e.originalEvent||e).clipboardData.items).length;s<a;s++)"file"===(n=t[s]).kind&&(i=n.getAsFile())&&r.push(new u(o,i));r.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",r))},destroy:function(){this.elem.off("paste",this.hander)}})}),e("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var d=e.$;return t.register("FilePicker",{init:function(){var e,t,n,i=this.getRuntime().getContainer(),r=this,o=r.owner,s=r.options,a=this.label=d(document.createElement("label")),u=this.input=d(document.createElement("input"));if(u.attr("type","file"),u.attr("name",s.name),u.addClass("webuploader-element-invisible"),a.on("click",function(){u.trigger("click")}),a.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),s.multiple&&u.attr("multiple","multiple"),s.accept&&0<s.accept.length){for(e=[],t=0,n=s.accept.length;t<n;t++)e.push(s.accept[t].mimeTypes);u.attr("accept",e.join(","))}i.append(u),i.append(a);function c(e,t){r.files=t.target.files,(t=e.cloneNode(!0)).value=null,e.parentNode.replaceChild(t,e),u.off(),u=d(t).on("change",function(e){c(this,e)}).on("mouseenter mouseleave",l),o.trigger("change")}var l=function(e){o.trigger(e.type)};u.on("change",function(e){c(this,e)}),a.on("mouseenter mouseleave",l)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),e("runtime/html5/util",["base"],function(e){var t=h.createObjectURL&&h||h.URL&&URL.revokeObjectURL&&URL||h.webkitURL,n=e.noop,e=n;return t&&(n=function(){return t.createObjectURL.apply(t,arguments)},e=function(){return t.revokeObjectURL.apply(t,arguments)}),{createObjectURL:n,revokeObjectURL:e,dataURL2Blob:function(e){for(var t=e.split(","),n=(~t[0].indexOf("base64")?atob:decodeURIComponent)(t[1]),e=new ArrayBuffer(n.length),i=new Uint8Array(e),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return t=t[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(e,t)},dataURL2ArrayBuffer:function(e){for(var e=e.split(","),t=(~e[0].indexOf("base64")?atob:decodeURIComponent)(e[1]),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n.buffer},arrayBufferToBlob:function(e,t){var n=h.BlobBuilder||h.WebKitBlobBuilder;return n?((n=new n).append(e),n.getBlob(t)):new Blob([e],t?{type:t}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),e("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var d={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,i=new FileReader;i.onload=function(){t(!1,n._parse(this.result)),i=i.onload=i.onerror=null},i.onerror=function(e){t(e.message),i=i.onload=i.onerror=null},e=e.slice(0,n.maxMetaDataSize),i.readAsArrayBuffer(e.getSource())},_parse:function(e,t){if(!(e.byteLength<6)){var n,i,r,o,s=new DataView(e),a=2,u=s.byteLength-4,c=a,l={};if(65496===s.getUint16(0)){for(;a<u&&(65504<=(n=s.getUint16(a))&&n<=65519||65534===n)&&!(a+(i=s.getUint16(a+2)+2)>s.byteLength);){if(r=d.parsers[n],!t&&r)for(o=0;o<r.length;o+=1)r[o].call(d,s,a,i,l);c=a+=i}6<c&&(e.slice?l.imageHead=e.slice(2,c):l.imageHead=new Uint8Array(e).subarray(2,c))}return l}},updateImageHead:function(e,t){var n=this._parse(e,!0),i=2;return n.imageHead&&(i=2+n.imageHead.byteLength),e=e.slice?e.slice(i):new Uint8Array(e).subarray(i),(i=new Uint8Array(t.byteLength+2+e.byteLength))[0]=255,i[1]=216,i.set(new Uint8Array(t),2),i.set(new Uint8Array(e),t.byteLength+2),i.buffer}};return e.parseMeta=function(){return d.parse.apply(d,arguments)},e.updateImageHead=function(){return d.updateImageHead.apply(d,arguments)},d}),e("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(f,e){var h={ExifMap:function(){return this}};return h.ExifMap.prototype.map={Orientation:274},h.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},h.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},h.exifTagTypes[7]=h.exifTagTypes[1],h.getExifValue=function(e,t,n,i,r,o){var s,a,u,c,l,d=h.exifTagTypes[i];if(d){if(!((s=4<(i=d.size*r)?t+e.getUint32(n+8,o):n+8)+i>e.byteLength)){if(1===r)return d.getValue(e,s,o);for(a=[],u=0;u<r;u+=1)a[u]=d.getValue(e,s+u*d.size,o);if(d.ascii){for(c="",u=0;u<a.length&&"\0"!==(l=a[u]);u+=1)c+=l;return c}return a}f.log("Invalid Exif data: Invalid data offset.")}else f.log("Invalid Exif data: Invalid tag type.")},h.parseExifTag=function(e,t,n,i,r){var o=e.getUint16(n,i);r.exif[o]=h.getExifValue(e,t,n,e.getUint16(n+2,i),e.getUint32(n+4,i),i)},h.parseExifTags=function(e,t,n,i,r){var o,s,a;if(n+6>e.byteLength)f.log("Invalid Exif data: Invalid directory offset.");else{if(!((s=n+2+12*(o=e.getUint16(n,i)))+4>e.byteLength)){for(a=0;a<o;a+=1)this.parseExifTag(e,t,n+2+12*a,i,r);return e.getUint32(s,i)}f.log("Invalid Exif data: Invalid directory size.")}},h.parseExifData=function(e,t,n,i){var r,o=t+10;if(1165519206===e.getUint32(t+4))if(o+8>e.byteLength)f.log("Invalid Exif data: Invalid segment size.");else if(0===e.getUint16(t+8)){switch(e.getUint16(o)){case 18761:r=!0;break;case 19789:r=!1;break;default:return void f.log("Invalid Exif data: Invalid byte alignment marker.")}42===e.getUint16(o+2,r)?(t=e.getUint32(o+4,r),i.exif=new h.ExifMap,t=h.parseExifTags(e,o,o+t,r,i)):f.log("Invalid Exif data: Missing TIFF marker.")}else f.log("Invalid Exif data: Missing byte alignment offset.")},e.parsers[65505].push(h.parseExifData),h}),e("runtime/html5/jpegencoder",[],function(e,t,n){function i(e){Math.round;var _,w,x,R,t,d=Math.floor,k=new Array(64),E=new Array(64),S=new Array(64),F=new Array(64),g=new Array(65535),m=new Array(65535),O=new Array(64),v=new Array(64),T=[],U=0,A=7,D=new Array(64),I=new Array(64),C=new Array(64),n=new Array(256),q=new Array(2048),b=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],N=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function i(e,t){for(var n=0,i=0,r=new Array,o=1;o<=16;o++){for(var s=1;s<=e[o];s++)r[t[i]]=[],r[t[i]][0]=n,r[t[i]][1]=o,i++,n++;n*=2}return r}function $(e){for(var t=e[0],n=e[1]-1;0<=n;)t&1<<n&&(U|=1<<A),n--,--A<0&&(255==U?(Q(255),Q(0)):Q(U),A=7,U=0)}function Q(e){T.push(n[e])}function V(e){Q(e>>8&255),Q(255&e)}function G(e,t,n,i,r){for(var o,s=r[0],a=r[240],u=function(e,t){for(var n,i=0,r=0;r<8;++r){var o,s=e[i],a=e[i+1],u=e[i+2],c=e[i+3],l=e[i+4],d=e[i+5],f=e[i+6],h=s+(o=e[i+7]),p=s-o,g=a+f,m=a-f,v=u+d,b=u-d,y=c+l,_=c-l,w=h+y,h=h-y,y=g+v,g=g-v;e[i]=w+y,e[i+4]=w-y;v=.707106781*(g+h);e[i+2]=h+v,e[i+6]=h-v;_=.382683433*((w=_+b)-(g=m+p)),w=.5411961*w+_,_=1.306562965*g+_,m=.707106781*(y=b+m),y=p+m,m=p-m;e[i+5]=m+w,e[i+3]=m-w,e[i+1]=y+_,e[i+7]=y-_,i+=8}for(r=i=0;r<8;++r){s=e[i],a=e[i+8],u=e[i+16],c=e[i+24],l=e[i+32],d=e[i+40],f=e[i+48];var x=s+(o=e[i+56]),R=s-o,k=a+f,E=a-f,S=u+d,F=u-d,T=c+l,U=c-l,A=x+T,x=x-T,T=k+S,k=k-S;e[i]=A+T,e[i+32]=A-T;S=.707106781*(k+x);e[i+16]=x+S,e[i+48]=x-S;U=.382683433*((A=U+F)-(k=E+R)),A=.5411961*A+U,U=1.306562965*k+U,E=.707106781*(T=F+E),T=R+E,E=R-E;e[i+40]=E+A,e[i+24]=E-A,e[i+8]=T+U,e[i+56]=T-U,i++}for(r=0;r<64;++r)n=e[r]*t[r],O[r]=0<n?.5+n|0:n-.5|0;return O}(e,t),c=0;c<64;++c)v[b[c]]=u[c];t=v[0]-n;n=v[0],0==t?$(i[0]):($(i[m[o=32767+t]]),$(g[o]));for(var l=63;0<l&&0==v[l];l--);if(0==l)return $(s),n;for(var d=1;d<=l;){for(var f=d;0==v[d]&&d<=l;++d);f=d-f;if(16<=f){for(var h=f>>4,p=1;p<=h;++p)$(a);f&=15}o=32767+v[d],$(r[(f<<4)+m[o]]),$(g[o]),d++}return 63!=l&&$(s),n}function W(e){100<(e=e<=0?1:e)&&(e=100),t!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=d((t[n]*e+50)/100);i<1?i=1:255<i&&(i=255),k[b[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var s=d((r[o]*e+50)/100);s<1?s=1:255<s&&(s=255),E[b[o]]=s}for(var a=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],u=0,c=0;c<8;c++)for(var l=0;l<8;l++)S[u]=1/(k[b[u]]*a[c]*a[l]*8),F[u]=1/(E[b[u]]*a[c]*a[l]*8),u++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),t=e)}this.encode=function(e,t){t&&W(t),T=new Array,U=0,A=7,V(65496),V(65504),V(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),V(1),V(1),Q(0),Q(0),function(){V(65499),V(132),Q(0);for(var e=0;e<64;e++)Q(k[e]);Q(1);for(var t=0;t<64;t++)Q(E[t])}(),g=e.width,t=e.height,V(65472),V(17),Q(8),V(t),V(g),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1),function(){V(65476),V(418),Q(0);for(var e=0;e<16;e++)Q(L[e+1]);for(var t=0;t<=11;t++)Q(B[t]);Q(16);for(var n=0;n<16;n++)Q(P[n+1]);for(var i=0;i<=161;i++)Q(z[i]);Q(1);for(var r=0;r<16;r++)Q(M[r+1]);for(var o=0;o<=11;o++)Q(j[o]);Q(17);for(var s=0;s<16;s++)Q(H[s+1]);for(var a=0;a<=161;a++)Q(N[a])}(),V(65498),V(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var n=0,i=0,r=0;U=0,A=7,this.encode.displayName="_encode_";for(var o,s,a,u,c,l,d,f,h,p=e.data,g=e.width,m=e.height,v=4*g,b=0;b<m;){for(o=0;o<v;){for(l=c=v*b+o,h=0;h<64;h++)l=c+(f=h>>3)*v+(d=4*(7&h)),m<=b+f&&(l-=v*(b+1+f-m)),v<=o+d&&(l-=o+d-v+4),s=p[l++],a=p[l++],u=p[l++],D[h]=(q[s]+q[a+256>>0]+q[u+512>>0]>>16)-128,I[h]=(q[s+768>>0]+q[a+1024>>0]+q[u+1280>>0]>>16)-128,C[h]=(q[s+1280>>0]+q[a+1536>>0]+q[u+1792>>0]>>16)-128;n=G(D,S,n,_,x),i=G(I,F,i,w,R),r=G(C,F,r,w,R),o+=32}b+=8}0<=A&&((y=[])[1]=A+1,y[0]=(1<<A+1)-1,$(y)),V(65497);var y="data:image/jpeg;base64,"+btoa(T.join(""));return T=[],y},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)n[t]=e(t)}(),_=i(L,B),w=i(M,j),x=i(P,z),R=i(H,N),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var i=e;i<t;i++)m[32767+i]=n,g[32767+i]=[],g[32767+i][1]=n,g[32767+i][0]=i;for(var r=-(t-1);r<=-e;r++)m[32767+r]=n,g[32767+r]=[],g[32767+r][1]=n,g[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)q[e]=19595*e,q[e+256>>0]=38470*e,q[e+512>>0]=7471*e+32768,q[e+768>>0]=-11059*e,q[e+1024>>0]=-21709*e,q[e+1280>>0]=32768*e+8421375,q[e+1536>>0]=-27439*e,q[e+1792>>0]=-5329*e}(),W(e)}return i.encode=function(e,t){return new i(t).encode(e)},i}),e("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,s,a){var u,c=e.canvasToDataUrl;e.canvasToDataUrl=function(e,t,n){var i,r,o;return a.os.android?("image/jpeg"===t&&void 0===u&&(r=(r=(~(o=(r=c.apply(null,arguments)).split(","))[0].indexOf("base64")?atob:decodeURIComponent)(o[1])).substring(0,2),u=255===r.charCodeAt(0)&&216===r.charCodeAt(1)),"image/jpeg"!==t||u?c.apply(null,arguments):(i=e.width,o=e.height,r=e.getContext("2d"),s.encode(r.getImageData(0,0,i,o),n))):c.apply(null,arguments)}}),e("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(i,e,r){return e.register("Image",{modified:!1,init:function(){var n=this,e=new Image;e.onload=function(){n._info={type:n.type,width:this.width,height:this.height},n._metas||"image/jpeg"!==n.type?n.owner.trigger("load"):r.parseMeta(n._blob,function(e,t){n._metas=t,n.owner.trigger("load")})},e.onerror=function(){n.owner.trigger("error")},n._img=e},loadFromBlob:function(e){var t=this._img;this._blob=e,this.type=e.type,t.src=r.createObjectURL(e.getSource()),this.owner.once("load",function(){r.revokeObjectURL(t.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,i,r){var o=this._canvas||(this._canvas=document.createElement("canvas")),s=this.options,a=this._img,u=a.naturalWidth,c=a.naturalHeight,l=this.getOrientation();r=r||1,o.width=n,o.height=i,s.preserveHeaders||this._rotate2Orientaion(o,l),this._renderImageToCanvas(o,a,-e,-t,u*r,c*r),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,n=this._blob,i=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(n=r.canvasToDataUrl(t,e,i.quality),i.preserveHeaders&&this._metas&&this._metas.imageHead)return n=r.dataURL2ArrayBuffer(n),n=r.updateImageHead(n,this._metas.imageHead),n=r.arrayBufferToBlob(n,e)}else n=r.canvasToDataUrl(t,e);n=r.dataURL2Blob(n)}return n},getAsDataUrl:function(e){var t=this.options;return"image/jpeg"===(e=e||this.type)?r.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",this._img=this._blob=null},_resize:function(e,t,n,i){var r,o=this.options,s=e.width,a=e.height,u=this.getOrientation();~[5,6,7,8].indexOf(u)&&(n^=i,n^=i^=n),r=Math[o.crop?"max":"min"](n/s,i/a),s=s*(r=!o.allowMagnify?Math.min(1,r):r),r=a*r,o.crop?(t.width=n,t.height=i):(t.width=s,t.height=r),n=(t.width-s)/2,i=(t.height-r)/2,o.preserveHeaders||this._rotate2Orientaion(t,u),this._renderImageToCanvas(t,e,n,i,s,r)},_rotate2Orientaion:function(e,t){var n=e.width,i=e.height,r=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=i,e.height=n}switch(t){case 2:r.translate(n,0),r.scale(-1,1);break;case 3:r.translate(n,i),r.rotate(Math.PI);break;case 4:r.translate(0,i),r.scale(1,-1);break;case 5:r.rotate(.5*Math.PI),r.scale(1,-1);break;case 6:r.rotate(.5*Math.PI),r.translate(0,-i);break;case 7:r.rotate(.5*Math.PI),r.translate(n,-i),r.scale(-1,1);break;case 8:r.rotate(-.5*Math.PI),r.translate(-n,0)}},_renderImageToCanvas:i.os.ios?7<=i.os.ios?function(e,t,n,i,r,o){var s=t.naturalWidth,a=t.naturalHeight,u=_(t,0,a);return e.getContext("2d").drawImage(t,0,0,s*u,a*u,n,i,r,o)}:function(e,t,n,i,r,o){var s,a,u,c,l,d,f,h,p=t.naturalWidth,g=t.naturalHeight,m=e.getContext("2d"),e=1048576<(e=(f=t).naturalWidth)*f.naturalHeight&&((h=document.createElement("canvas")).width=h.height=1,(h=h.getContext("2d")).drawImage(f,1-e,0),0===h.getImageData(0,0,1,1).data[3]),h="image/jpeg"===this.type,v=1024,b=0,y=0;for(e&&(p/=2,g/=2),m.save(),(s=document.createElement("canvas")).width=s.height=v,a=s.getContext("2d"),h=h?_(t,0,g):1,u=Math.ceil(v*r/p),c=Math.ceil(v*o/g/h);b<g;){for(d=l=0;l<p;)a.clearRect(0,0,v,v),a.drawImage(t,-l,-b),m.drawImage(s,0,0,v,v,n+d,i+y,u,c),l+=v,d+=u;b+=v,y+=c}m.restore(),s=a=null}:function(e){var t=i.slice(arguments,1),n=e.getContext("2d");n.drawImage.apply(n,t)}});function _(e,t,n){var i,r=document.createElement("canvas"),o=r.getContext("2d"),s=0,a=n,u=n;for(r.width=1,r.height=n,o.drawImage(e,0,0),i=o.getImageData(0,0,1,n).data;s<u;)0===i[4*(u-1)+3]?a=u:s=u,u=a+s>>1;return 0==(n=u/n)?1:n}}),e("runtime/html5/transport",["base","runtime/html5/runtime"],function(u,e){var i=u.noop,c=u.$;return e.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var n,e,t,i=this.owner,r=this.options,o=this._initAjax(),s=i._blob,a=r.server;r.sendAsBinary?(a+=(/\?/.test(a)?"&":"?")+c.param(i._formData),e=s.getSource()):(n=new FormData,c.each(i._formData,function(e,t){n.append(e,t)}),n.append(r.fileVal,s.getSource(),r.filename||i._formData.name||"")),r.withCredentials&&"withCredentials"in o?(o.open(r.method,a,!0),o.withCredentials=!0):o.open(r.method,a),this._setRequestHeader(o,r.headers),e?(o.overrideMimeType&&o.overrideMimeType("application/octet-stream"),u.os.android?((t=new FileReader).onload=function(){o.send(this.result),t=t.onload=null},t.readAsArrayBuffer(e)):o.send(e)):o.send(n)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=i,e.onreadystatechange=i,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var n=this,e=new XMLHttpRequest,t=this.options;return(e=t.withCredentials&&!("withCredentials"in e)&&"undefined"!=typeof XDomainRequest?new XDomainRequest:e).upload.onprogress=function(e){var t=0;return e.lengthComputable&&(t=e.loaded/e.total),n.trigger("progress",t)},e.onreadystatechange=function(){if(4===e.readyState)return e.upload.onprogress=i,e.onreadystatechange=i,n._xhr=null,n._status=e.status,200<=e.status&&e.status<300?(n._response=e.responseText,n.trigger("load")):500<=e.status&&e.status<600?(n._response=e.responseText,n.trigger("error","server")):n.trigger("error",n._status?"http":"abort")},n._xhr=e},_setRequestHeader:function(n,e){c.each(e,function(e,t){n.setRequestHeader(e,t)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){t={}}return t}})}),e("runtime/html5/md5",["runtime/html5/runtime"],function(e){function a(e,t,n,i,r,o){return t=p(p(t,e),p(i,o)),p(t<<r|t>>>32-r,n)}function s(e,t,n,i,r,o,s){return a(t&n|~t&i,e,t,r,o,s)}function u(e,t,n,i,r,o,s){return a(t&i|n&~i,e,t,r,o,s)}function c(e,t,n,i,r,o,s){return a(t^n^i,e,t,r,o,s)}function l(e,t,n,i,r,o,s){return a(n^(t|~i),e,t,r,o,s)}function d(e,t){var n=e[0],i=e[1],r=e[2],o=e[3],n=s(n,i,r,o,t[0],7,-680876936),o=s(o,n,i,r,t[1],12,-389564586),r=s(r,o,n,i,t[2],17,606105819),i=s(i,r,o,n,t[3],22,-1044525330);n=s(n,i,r,o,t[4],7,-176418897),o=s(o,n,i,r,t[5],12,1200080426),r=s(r,o,n,i,t[6],17,-1473231341),i=s(i,r,o,n,t[7],22,-45705983),n=s(n,i,r,o,t[8],7,1770035416),o=s(o,n,i,r,t[9],12,-1958414417),r=s(r,o,n,i,t[10],17,-42063),i=s(i,r,o,n,t[11],22,-1990404162),n=s(n,i,r,o,t[12],7,1804603682),o=s(o,n,i,r,t[13],12,-40341101),r=s(r,o,n,i,t[14],17,-1502002290),i=s(i,r,o,n,t[15],22,1236535329),n=u(n,i,r,o,t[1],5,-165796510),o=u(o,n,i,r,t[6],9,-1069501632),r=u(r,o,n,i,t[11],14,643717713),i=u(i,r,o,n,t[0],20,-373897302),n=u(n,i,r,o,t[5],5,-701558691),o=u(o,n,i,r,t[10],9,38016083),r=u(r,o,n,i,t[15],14,-660478335),i=u(i,r,o,n,t[4],20,-405537848),n=u(n,i,r,o,t[9],5,568446438),o=u(o,n,i,r,t[14],9,-1019803690),r=u(r,o,n,i,t[3],14,-187363961),i=u(i,r,o,n,t[8],20,1163531501),n=u(n,i,r,o,t[13],5,-1444681467),o=u(o,n,i,r,t[2],9,-51403784),r=u(r,o,n,i,t[7],14,1735328473),i=u(i,r,o,n,t[12],20,-1926607734),n=c(n,i,r,o,t[5],4,-378558),o=c(o,n,i,r,t[8],11,-2022574463),r=c(r,o,n,i,t[11],16,1839030562),i=c(i,r,o,n,t[14],23,-35309556),n=c(n,i,r,o,t[1],4,-1530992060),o=c(o,n,i,r,t[4],11,1272893353),r=c(r,o,n,i,t[7],16,-155497632),i=c(i,r,o,n,t[10],23,-1094730640),n=c(n,i,r,o,t[13],4,681279174),o=c(o,n,i,r,t[0],11,-358537222),r=c(r,o,n,i,t[3],16,-722521979),i=c(i,r,o,n,t[6],23,76029189),n=c(n,i,r,o,t[9],4,-640364487),o=c(o,n,i,r,t[12],11,-421815835),r=c(r,o,n,i,t[15],16,530742520),i=c(i,r,o,n,t[2],23,-995338651),n=l(n,i,r,o,t[0],6,-198630844),o=l(o,n,i,r,t[7],10,1126891415),r=l(r,o,n,i,t[14],15,-1416354905),i=l(i,r,o,n,t[5],21,-57434055),n=l(n,i,r,o,t[12],6,1700485571),o=l(o,n,i,r,t[3],10,-1894986606),r=l(r,o,n,i,t[10],15,-1051523),i=l(i,r,o,n,t[1],21,-2054922799),n=l(n,i,r,o,t[8],6,1873313359),o=l(o,n,i,r,t[15],10,-30611744),r=l(r,o,n,i,t[6],15,-1560198380),i=l(i,r,o,n,t[13],21,1309151649),n=l(n,i,r,o,t[4],6,-145523070),o=l(o,n,i,r,t[11],10,-1120210379),r=l(r,o,n,i,t[2],15,718787259),i=l(i,r,o,n,t[9],21,-343485551),e[0]=p(n,e[0]),e[1]=p(i,e[1]),e[2]=p(r,e[2]),e[3]=p(o,e[3])}function f(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return t}function h(e){for(var t=[],n=0;n<64;n+=4)t[n>>2]=e[n]+(e[n+1]<<8)+(e[n+2]<<16)+(e[n+3]<<24);return t}function n(e){for(var t,n,i,r,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=o;a+=64)d(s,f(e.substring(a-64,a)));for(t=(e=e.substring(a-64)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)n[a>>2]|=e.charCodeAt(a)<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),55<a)for(d(s,n),a=0;a<16;a+=1)n[a]=0;return r=(r=8*o).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),r=parseInt(r[1],16)||0,n[14]=i,n[15]=r,d(s,n),s}function o(e){for(var t=0;t<e.length;t+=1)e[t]=function(e){for(var t="",n=0;n<4;n+=1)t+=i[e>>8*n+4&15]+i[e>>8*n&15];return t}(e[t]);return e.join("")}function t(){this.reset()}var p=function(e,t){return e+t&4294967295},i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==o(n("hello"))&&(p=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}),t.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},t.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;for(var t=this._buff.length,n=64;n<=t;n+=64)d(this._state,f(this._buff.substring(n-64,n)));return this._buff=this._buff.substr(n-64),this},t.prototype.end=function(e){for(var t=this._buff,n=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<n;r+=1)i[r>>2]|=t.charCodeAt(r)<<(r%4<<3);return this._finish(i,n),e=e?this._state:o(this._state),this.reset(),e},t.prototype._finish=function(e,t){var n,i=t;if(e[i>>2]|=128<<(i%4<<3),55<i)for(d(this._state,e),i=0;i<16;i+=1)e[i]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),t=parseInt(n[2],16),n=parseInt(n[1],16)||0,e[14]=t,e[15]=n,d(this._state,e)},t.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},t.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},t.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));e=n(e);return t?e:o(e)},t.hashBinary=function(e,t){e=n(e);return t?e:o(e)},(t.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),i=n.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)d(this._state,h(n.subarray(t-64,t)));return this._buff=t-64<i?n.subarray(t-64):new Uint8Array(0),this},t.ArrayBuffer.prototype.end=function(e){for(var t=this._buff,n=t.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<n;r+=1)i[r>>2]|=t[r]<<(r%4<<3);return this._finish(i,n),e=e?this._state:o(this._state),this.reset(),e},t.ArrayBuffer.prototype._finish=t.prototype._finish,t.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},t.ArrayBuffer.prototype.destroy=t.prototype.destroy,t.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,i=new Uint8Array(n+t.byteLength);return i.set(e),i.set(new Uint8Array(t),n),i},t.ArrayBuffer.hash=function(e,t){e=function(e){for(var t,n,i,r,o=e.length,s=[1732584193,-271733879,-1732584194,271733878],a=64;a<=o;a+=64)d(s,h(e.subarray(a-64,a)));for(t=(e=a-64<o?e.subarray(a-64):new Uint8Array(0)).length,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=0;a<t;a+=1)n[a>>2]|=e[a]<<(a%4<<3);if(n[a>>2]|=128<<(a%4<<3),55<a)for(d(s,n),a=0;a<16;a+=1)n[a]=0;return r=(r=8*o).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),r=parseInt(r[1],16)||0,n[14]=i,n[15]=r,d(s,n),s}(new Uint8Array(e));return t?e:o(e)},e.register("Md5",{init:function(){},loadFromBlob:function(n){var i=n.getSource(),r=2097152,o=Math.ceil(i.size/r),s=0,a=this.owner,u=new t.ArrayBuffer,c=this,l=i.mozSlice||i.webkitSlice||i.slice,d=new FileReader,f=function(){var e=s*r,t=Math.min(e+r,i.size);d.onload=function(e){u.append(e.target.result),a.trigger("progress",{total:n.size,loaded:t})},d.onloadend=function(){d.onloadend=d.onload=null,++s<o?setTimeout(f,1):setTimeout(function(){a.trigger("load"),c.result=u.end(),f=n=i=u=null,a.trigger("complete")},50)},d.readAsArrayBuffer(l.call(i,e,t))};f()},getResult:function(){return this.result}})}),e("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(u,n,i){var r=u.$,c={};function e(){var o={},s={},e=this.destroy,a=this,t=u.guid("webuploader_");n.apply(a,arguments),a.type="flash",a.exec=function(e,t){var n,i=this.uid,r=u.slice(arguments,2);return s[i]=this,c[e]&&(o[i]||(o[i]=new c[e](this,a)),(n=o[i])[t])?n[t].apply(n,r):a.flashExec.apply(this,arguments)},h[t]=function(){var e=arguments;setTimeout(function(){!function(e,t){var n=e.type||e,i=n.split("::"),r=i[0];"Ready"===(n=i[1])&&r===a.uid?a.trigger("ready"):s[r]&&s[r].trigger(n.toLowerCase(),e,t)}.apply(null,e)},1)},this.jsreciver=t,this.destroy=function(){return e&&e.apply(this,arguments)},this.flashExec=function(e,t){var n=a.getFlash(),i=u.slice(arguments,2);return n.exec(this.uid,e,t,i)}}return u.inherits(n,{constructor:e,init:function(){var e,t=this.getContainer(),n=this.options;t.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+n.swf+'" ',u.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',t.html(e)},getFlash:function(){return this._flash||(this._flash=r("#"+this.uid).get(0),this._flash)}}),e.register=function(e,t){return t=c[e]=u.inherits(i,r.extend({flashExec:function(){var e=this.owner;return this.getRuntime().flashExec.apply(e,arguments)}},t))},11.4<=function(){var t;try{t=(t=navigator.plugins["Shockwave Flash"]).description}catch(e){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(e){t="0.0"}}return t=t.match(/\d+/g),parseFloat(t[0]+"."+t[1],10)}()&&n.addRuntime("flash",e),e}),e("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var r=e.$;return t.register("FilePicker",{init:function(e){for(var t=r.extend({},e),n=t.accept&&t.accept.length,i=0;i<n;i++)t.accept[i].title||(t.accept[i].title="Files");delete t.button,delete t.id,delete t.container,this.flashExec("FilePicker","init",t)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),e("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),e("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(e,t,n){var s=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,n=this.options,i=this._initAjax(),r=t._blob,o=n.server;i.connectRuntime(r.ruid),n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+s.param(t._formData),e=r.uid):(s.each(t._formData,function(e,t){i.exec("append",e,t)}),i.exec("appendBlob",n.fileVal,r.uid,n.filename||t._formData.name||"")),this._setRequestHeader(i,n.headers),i.exec("send",{method:n.method,url:o,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var i=this,r=new n("XMLHttpRequest");return r.on("uploadprogress progress",function(e){e=e.loaded/e.total,e=Math.min(1,Math.max(0,e));return i.trigger("progress",e)}),r.on("load",function(){var e=r.exec("getStatus"),t=!1,n="";return r.off(),i._xhr=null,200<=e&&e<300?t=!0:n=500<=e&&e<600?(t=!0,"server"):"http",t&&(i._response=r.exec("getResponse"),i._response=decodeURIComponent(i._response),t=h.JSON&&h.JSON.parse||function(e){try{return new Function("return "+e).call()}catch(e){return{}}},i._responseJson=i._response?t(i._response):{}),r.destroy(),r=null,n?i.trigger("error",n):i.trigger("load")}),r.on("error",function(){r.off(),i._xhr=null,i.trigger("error","http")}),i._xhr=r},_setRequestHeader:function(n,e){s.each(e,function(e,t){n.exec("setRequestHeader",e,t)})}})}),e("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,n){return e.register("Blob",{slice:function(e,t){t=this.flashExec("Blob","slice",e,t);return new n(t.uid,t)}})}),e("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),e("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),e("widgets/log",["base","uploader","widgets/widget"],function(e,t){var n,i=e.$,e=(location.hostname||location.host||"protected").toLowerCase();if(e&&/baidu/i.exec(e))return n={dv:3,master:"webuploader",online:/test/.exec(e)?0:1,module:"",product:e,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,n=0;e.on("error",function(e){r({type:2,c_error_code:e})}).on("uploadError",function(e,t){r({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,n+=e.size}).on("uploadFinished",function(){r({c_count:t,c_size:n}),t=n=0}),r({c_usage:1})}});function r(e){e=i.extend({},n,e),e=" http://static.tieba.baidu.com/tb/pms/img/st.gif??".replace(/^(.*)\?/,"$1"+i.param(e));(new Image).src=e}}),e("webuploader",["preset/all","widgets/log"],function(e){return e}),t("webuploader")));var h,t}var e,a={},o=function(e,t,n){var i={exports:t};"function"==typeof t&&(n.length||(n=[r,i.exports,i]),void 0!==(n=t.apply(null,n))&&(i.exports=n)),a[e]=i.exports},s=function(e){var t=a[e]||n[e];if(!t)throw new Error("`"+e+"` is undefined");return t};"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(["jquery"],t):window.layui&&layui.define?layui.define("jquery",function(e){e("webuploader",t(layui.jquery))}):(e=n.WebUploader,n.WebUploader=t(),n.WebUploader.noConflict=function(){n.WebUploader=e})}(window),layui.define(["webuploader","admin"],function(e){"use strict";function t(e){var t=this;t.uploadObj={},t.uploadFiles=[],t.config=x.extend({},t.config,n.config,e),t.render()}var x=layui.jquery,R=layui.layer,k=(layui.admin,layui.webuploader),n={config:{},set:function(e){return this.config=x.extend({},this.config,e),this},on:function(e,t){return layui.onevent.call(this,"upload",e,t)},open:function(){}};t.prototype.config={fileNumLimit:9,imgVal:".img_val"},t.prototype.render=function(){var i,r=this.config,o=this,s=0,e=['<div class="p-4"><input type="text" placeholder="请输入网络图片地址" id="push_img" class="border w-full h-12 px-4"></div>'].join("");o.$el=x(this),i=R.tab({area:["660px","535px"],skin:"m-upload-dialog layui-layer-tab",tab:[{title:"图片上传",content:'<div id="uploader">                <div class="queueList">                    <div id="dndArea" class="placeholder">                        <div id="filePicker"></div>                        <p>或将照片拖到这里，单次最多可选300张</p>                    </div>                </div>                <div class="statusBar" style="display:none;">                    <div class="progress">                        <span class="text">0%</span>                        <span class="percentage"></span>                    </div><div class="info"></div>                </div>            </div>'},{title:"网络图片",content:e},{title:"相册",content:"内容3"}],btn:["确认使用","取消"],yes:function(t,e){var n;0==s?o.done(i,t):1==s?(n=x("#push_img").val(),layui.util.request.post(r.url,{type:"fetch",url:n},function(e){o.uploadFiles.push(e.data.url),o.done(i,t)})):2==s&&o.done(i,t)},btn2:function(e,t){return!0},success:function(t,e){t.find(".layui-layer-title").children().on("mousedown",function(e){s=t.find(".layui-this").index()}),o.uploadFiles=[],o.uploadObj=k.create({pick:{id:"#filePicker",label:"点击选择图片"},auto:!0,dnd:"#dndArea",paste:"#uploader",swf:layui.cache.base+"/extends/upload/webuploader/Uploader.swf",server:r.url,headers:x.extend({"X-CSRF-TOKEN":x('meta[name="csrf-token"]').attr("content"),"X-Requested-With":"XMLHttpRequest"},r.headers),fileNumLimit:9,fileSizeLimit:209715200,fileSingleSizeLimit:52428800,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/gif,image/jpg,image/jpeg,image/bmp,image/png"}}),o.events(),o.uploadObj.refresh()}})},t.prototype.events=function(e){var n=this,c=n.uploadObj,i=(n.config,""),t=x("#uploader"),l=x('<ul class="filelist"></ul>').appendTo(t.find(".queueList")),d=t.find(".statusBar"),r=d.find(".info"),o=t.find(".uploadBtn"),f=t.find(".placeholder"),s=d.find(".progress").hide(),h=0,p=0,a=window.devicePixelRatio||1,g=110*a,m=110*a,u="pedding",v={},b=(a="transition"in(t=document.createElement("p").style)||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t,t=null,a);function y(){var e,n=0,i=0,t=s.children();x.each(v,function(e,t){i+=t[0],n+=t[0]*t[1]}),e=i?n/i:0,t.eq(0).text(Math.round(100*e)+"%"),t.eq(1).css("width",Math.round(100*e)+"%"),_()}function _(){var e,t="";"ready"===u?t="选中"+h+"张图片，共"+k.formatSize(p)+"。":"confirm"===u?(e=c.getStats()).uploadFailNum&&(t="已成功上传"+e.successNum+"张照片至XX相册，"+e.uploadFailNum+'张照片上传失败，<a class="retry" href="#">重新上传</a>失败图片或<a class="ignore" href="#">忽略</a>'):"error"===u?t='Error: <strong class="text-error">'+i+"</strong>":(e=c.getStats(),t="共"+h+"张（"+k.formatSize(p)+"），已上传"+e.successNum+"张",e.uploadFailNum&&(t+="，失败"+e.uploadFailNum+"张")),r.html(t)}function w(e){var t;if(e!==u){switch(o.removeClass("state-"+u),o.addClass("state-"+e),u=e){case"pedding":f.removeClass("element-invisible"),l.hide(),d.addClass("element-invisible"),c.refresh();break;case"ready":f.addClass("element-invisible"),l.show(),d.removeClass("element-invisible"),c.refresh();break;case"uploading":s.show(),o.text("暂停上传");break;case"paused":s.show(),o.text("继续上传");break;case"confirm":if(s.hide(),o.text("开始上传").addClass("disabled"),t=c.getStats(),!i&&t.successNum&&!t.uploadFailNum)return void w("finish");w("error");break;case"finish":(t=c.getStats()).successNum||(u="done",location.reload())}_()}}c.onUploadProgress=function(e,t){x("#"+e.id).find(".progress span").css("width",100*t+"%"),v[e.id][1]=t,y()},c.onFileQueued=function(e){function n(e){switch(e){case"exceed_size":t="文件大小超出";break;case"interrupt":t="上传暂停";break;default:t="上传失败，请重试"}u.text(t).appendTo(r)}var i,r,t,o,s,a,u;h++,p+=e.size,1===h&&(f.addClass("element-invisible"),d.show()),r=x('<li id="'+(i=e).id+'"><p class="title">'+i.name+'</p><p class="imgWrap"></p><p class="progress"><span></span></p></li>'),t="",o=x('<div class="file-panel"><span class="cancel">删除</span><span class="rotateRight">向右旋转</span><span class="rotateLeft">向左旋转</span></div>').appendTo(r),s=r.find("p.progress span"),a=r.find("p.imgWrap"),u=x('<p class="error"></p>'),"invalid"===i.getStatus()?n(i.statusText):(a.text("预览中"),c.makeThumb(i,function(e,t){e?a.text("不能预览"):(t=x('<img src="'+t+'">'),a.empty().append(t))},g,m),v[i.id]=[i.size,0],i.rotation=0),i.on("statuschange",function(e,t){"progress"===t?s.hide().width(0):"queued"===t&&(r.off("mouseenter mouseleave"),o.remove()),"error"===e||"invalid"===e?(n(i.statusText),v[i.id][1]=1):"interrupt"===e?n("interrupt"):"queued"===e?v[i.id][1]=0:"progress"===e?(u.remove(),s.css("display","block")):"complete"===e&&r.append('<span class="success"></span>'),r.removeClass("state-"+t).addClass("state-"+e)}),r.on("mouseenter",function(){o.stop().animate({height:30})}),r.on("mouseleave",function(){o.stop().animate({height:0})}),o.on("click","span",function(){var e;switch(x(this).index()){case 0:return void c.removeFile(i);case 1:i.rotation+=90;break;case 2:i.rotation-=90}b?(e="rotate("+i.rotation+"deg)",a.css({"-webkit-transform":e,"-mos-transform":e,"-o-transform":e,transform:e})):a.css("filter","progid:DXImageTransform.Microsoft.BasicImage(rotation="+~~(i.rotation/90%4+4)%4+")")}),r.appendTo(l),w("ready"),y()},c.onFileDequeued=function(e){var t;h--,p-=e.size,h||w("pedding"),e=x("#"+(t=e).id),delete v[t.id],y(),e.off().find(".file-panel").off().end().remove(),y()},c.onUploadSuccess=function(e,t){0==t.errcode?n.uploadFiles.push(t.data.url):(w("error"),i=t.msg||"未知错误",n.uploadFailNum+=1)},c.onUploadError=function(e){var t=x("#"+e.id),e=t.find("div.error");(e=!e.length?x('<div class="error"></div>').appendTo(t):e).text("上传失败")},c.on("all",function(e){switch(e){case"uploadFinished":w("confirm");break;case"startUpload":w("uploading");break;case"stopUpload":w("paused")}}),c.onError=function(e){R.msg("Eroor: "+e)},o.on("click",function(){return!x(this).hasClass("disabled")&&void("ready"===u||"paused"===u?c.upload():"uploading"===u&&c.stop())}),r.on("click",".retry",function(){c.retry()}),r.on("click",".ignore",function(){alert("todo")}),o.addClass("state-"+u),y()},t.prototype.done=function(e,t){var n=this;n.uploadFiles.length<1?R.msg("请选择图片",{icon:5}):(R.close(e),n.$el.next(n.config.imgVal).val(n.uploadFiles[0]),"function"==typeof n.config.done&&n.config.done(n.uploadFiles,n.$el))},n.render=function(e){return new t(e)},e("upload",n)});!function(){function t(n){return q(n)&&en.call(n,"callee")&&!an.call(n,"callee")}function f(n,t){return n.push.apply(n,t),n}function r(t){return function(n){return null==n?U:n[t]}}function o(n){return n instanceof e?n:new e(n)}function e(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t}function u(n,t,r){if("function"!=typeof n)throw new TypeError("Expected a function");return setTimeout(function(){n.apply(U,r)},t)}function i(n,t,r){for(var e=-1,u=n.length;++e<u;){var o,i,c=n[e],f=t(c);null!=f&&(o===U?f==f:r(f,o))&&(o=f,i=c)}return i}function c(n,e){var u=[];return _n(n,function(n,t,r){e(n,t,r)&&u.push(n)}),u}function a(n,t,r,e,u){var o=-1,i=n.length;for(r=r||A,u=u||[];++o<i;){var c=n[o];0<t&&r(c)?1<t?a(c,t-1,r,e,u):f(u,c):e||(u[u.length]=c)}return u}function n(n,t){return n&&jn(n,t,Tn)}function l(t,n){return c(n,function(n){return I(t[n])})}function p(n,t){return t<n}function s(n,t,r,e,u){return n===t||(null==n||null==t||!q(n)&&!q(t)?n!=n&&t!=t:function(t,r,n,e,u,o){var i=En(t),c=En(r),f=i?"[object Array]":on.call(t),a=c?"[object Array]":on.call(r),l="[object Object]"==(f="[object Arguments]"==f?"[object Object]":f),c="[object Object]"==(a="[object Arguments]"==a?"[object Object]":a),a=f==a,p=mn(o=o||[],function(n){return n[0]==t}),s=mn(o,function(n){return n[0]==r});if(p&&s)return p[1]==r;if(o.push([t,r]),o.push([r,t]),!a||l)return 1&n||(i=l&&en.call(t,"__wrapped__"),f=c&&en.call(r,"__wrapped__"),!i&&!f)?!!a&&(n=function(n,t,r,e,u,o){var i=1&r,c=Tn(n),f=c.length,a=Tn(t).length;if(f!=a&&!i)return!1;for(var l=f;l--;){var p=c[l];if(!(i?p in t:en.call(t,p)))return!1}for(a=!0;++l<f;){var p=c[l],s=n[p],h=t[p];if(void 0!==U||s!==h&&!u(s,h,r,e,o)){a=!1;break}i=i||"constructor"==p}return a&&!i&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!("function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)&&(a=!1)),a}(t,r,n,e,u,o),o.pop(),n):(i=i?t.value():t,f=f?r.value():r,n=u(i,f,n,e,o),o.pop(),n);if(i)n=function(n,t,r,e,u,o){var i=n.length,c=t.length;if(i!=c&&!(1&r&&i<c))return!1;for(var c=-1,f=!0,a=2&r?[]:U;++c<i;){var l=n[c],p=t[c];if(void 0!==U){f=!1;break}if(a){if(!d(t,function(n,t){if(!F(a,t)&&(l===n||u(l,n,r,e,o)))return a.push(t)})){f=!1;break}}else if(l!==p&&!u(l,p,r,e,o)){f=!1;break}}return f}(t,r,n,e,u,o);else n:{switch(f){case"[object Boolean]":case"[object Date]":case"[object Number]":n=R(+t,+r);break n;case"[object Error]":n=t.name==r.name&&t.message==r.message;break n;case"[object RegExp]":case"[object String]":n=t==r+"";break n}n=!1}return o.pop(),n}(n,t,r,e,s,u))}function h(n){return"function"==typeof n?n:null==n?J:("object"==typeof n?v:r)(n)}function b(n,t){return n<t}function y(n,e){var u=-1,o=D(n)?Array(n.length):[];return _n(n,function(n,t,r){o[++u]=e(n,t,r)}),o}function v(e){var u=pn(e);return function(n){var t=u.length;if(null==n)return!t;for(n=Object(n);t--;){var r=u[t];if(!(r in n&&s(e[r],n[r],3)))return!1}return!0}}function g(n){return dn(w(n,void 0,J),n+"")}function _(n,t,r){var e=-1,u=n.length;for((r=u<r?u:r)<0&&(r+=u),u=r<(t=t<0?u<-t?0:u+t:t)?0:r-t>>>0,t>>>=0,r=Array(u);++e<u;)r[e]=n[e+t];return r}function j(n){return _(n,0,n.length)}function d(n,e){var u;return _n(n,function(n,t,r){return!(u=e(n,t,r))}),!!u}function m(n,t,r){var e=!r;r=r||{};for(var u=-1,o=t.length;++u<o;){var i,c,f=t[u],a=U;a===U&&(a=n[f]),e?r[f]=a:(c=(i=r)[f],en.call(i,f)&&R(c,a)&&(a!==U||f in i)||(i[f]=a))}return r}function O(i){return g(function(n,t){var r=-1,e=t.length,u=1<e?t[e-1]:U,u=3<i.length&&"function"==typeof u?(e--,u):U;for(n=Object(n);++r<e;){var o=t[r];o&&i(n,o,r,u)}return n})}function x(c,f,a){if("function"!=typeof c)throw new TypeError("Expected a function");var r,l=(r=c,function(){var n=arguments,t=hn(r.prototype);return $(n=r.apply(t,n))?n:t});return function n(){for(var t=-1,r=arguments.length,e=-1,u=a.length,o=Array(u+r),i=this&&this!==Y&&this instanceof n?l:c;++e<u;)o[e]=a[e];for(;r--;)o[e++]=arguments[++t];return i.apply(f,o)}}function A(n){return En(n)||t(n)}function E(n){var t=[];if(null!=n)for(var r in Object(n))t.push(r);return t}function w(u,o,i){return o=sn(o===U?u.length-1:o,0),function(){for(var n=arguments,t=-1,r=sn(n.length-o,0),e=Array(r);++t<r;)e[t]=n[o+t];for(t=-1,r=Array(o+1);++t<o;)r[t]=n[t];return r[o]=i(e),u.apply(this,r)}}function k(n){return null!=n&&n.length?a(n,1):[]}function N(n){return n&&n.length?n[0]:U}function F(n,t,r){var e=null==n?0:n.length;r=((r="number"==typeof r?r<0?sn(e+r,0):r:0)||0)-1;for(var u=t==t;++r<e;){var o=n[r];if(u?o===t:o!=o)return r}return-1}function S(n,t){return _n(n,h(t))}function T(n,t,r){return e=n,u=h(t),o=r,i=arguments.length<3,_n(e,function(n,t,r){o=i?(i=!1,n):u(o,n,t,r)}),o;var e,u,o,i}function B(n,t){var r;if("function"!=typeof t)throw new TypeError("Expected a function");return n=wn(n),function(){return 0<--n&&(r=t.apply(this,arguments)),n<=1&&(t=U),r}}function R(n,t){return n===t||n!=n&&t!=t}function D(n){var t;return(t=(t=null!=n)?"number"==typeof(t=n.length)&&-1<t&&0==t%1&&t<=9007199254740991:t)&&!I(n)}function I(n){return!!$(n)&&("[object Function]"==(n=on.call(n))||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function $(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function q(n){return null!=n&&"object"==typeof n}function P(n){return"number"==typeof n||q(n)&&"[object Number]"==on.call(n)}function z(n){return"string"==typeof n||!En(n)&&q(n)&&"[object String]"==on.call(n)}function C(n){return"string"==typeof n?n:null==n?"":n+""}function G(n){return null==n?[]:y(Tn(t=n),function(n){return t[n]});var t}function J(n){return n}function M(e,t,n){var r=Tn(t),u=l(t,r);null!=n||$(t)&&(u.length||!r.length)||(n=t,t=e,e=this,u=l(t,Tn(t)));var o=!($(n)&&"chain"in n&&!n.chain),i=I(e);return _n(u,function(n){var r=t[n];e[n]=r,i&&(e.prototype[n]=function(){var n=this.__chain__;if(o||n){var t=e(this.__wrapped__);return(t.__actions__=j(this.__actions__)).push({func:r,args:arguments,thisArg:e}),t.__chain__=n,t}return r.apply(e,f([this.value()],arguments))})}),e}var U,V,H,K,L=/[&<>"']/g,Q=RegExp(L.source),W=/^(?:0|[1-9]\d*)$/,X="object"==typeof self&&self&&self.Object===Object&&self,Y="object"==typeof global&&global&&global.Object===Object&&global||X||Function("return this")(),Z=(X="object"==typeof exports&&exports&&!exports.nodeType&&exports)&&"object"==typeof module&&module&&!module.nodeType&&module,nn=(K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(n){return null==K?U:K[n]}),tn=Array.prototype,rn=Object.prototype,en=rn.hasOwnProperty,un=0,on=rn.toString,cn=Y._,fn=Object.create,an=rn.propertyIsEnumerable,ln=Y.isFinite,pn=(V=Object.keys,H=Object,function(n){return V(H(n))}),sn=Math.max,hn=function(n){return $(n)?fn?fn(n):(bn.prototype=n,n=new bn,bn.prototype=U,n):{}};function bn(){}(e.prototype=hn(o.prototype)).constructor=e;var yn,vn,gn,_n=(vn=n,function(n,t){if(null==n)return n;if(!D(n))return vn(n,t);for(var r=n.length,e=-1,u=Object(n);++e<r&&!1!==t(u[e],e,u););return n}),jn=function(n,t,r){for(var e=-1,u=Object(n),o=(r=r(n)).length;o--;){var i=r[++e];if(!1===t(u[i],i,u))break}return n},dn=J,mn=function(n,t,r){var e,u=Object(n);return D(n)||(e=h(t),n=Tn(n),t=function(n){return e(u[n],n,u)}),-1<(t=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;0>(r=null==r?0:wn(r))&&(r=sn(e+r,0));n:{for(t=h(t),e=n.length,r+=-1;++r<e;)if(t(n[r],r,n)){n=r;break n}n=-1}return n}(n,t,r))?u[e?n[t]:t]:U},On=g(x),xn=g(function(n,t){return u(n,1,t)}),An=g(function(n,t,r){return u(n,kn(t)||0,r)}),En=Array.isArray,wn=Number,kn=Number,Nn=O(function(n,t){m(t,pn(t),n)}),Fn=O(function(n,t){m(t,E(t),n)}),Sn=g(function(n,t){n=Object(n);var r,e,u,o=-1,i=t.length,c=2<i?t[2]:U;(r=c)&&(r=t[0],e=t[1],r=!!$(c)&&("number"==(u=typeof e)?(u=D(c))&&(f=typeof e,u=!!(u=null==(u=c.length)?9007199254740991:u)&&("number"==f||"symbol"!=f&&W.test(e))&&-1<e&&0==e%1&&e<u):u="string"==u&&e in c,!!u&&R(c[e],r)));for(r&&(i=1);++o<i;)for(c=t[o],e=-1,u=(r=Bn(c)).length;++e<u;){var f,a=n[f=r[e]];(a===U||R(a,rn[f])&&!en.call(n,f))&&(n[f]=c[f])}return n}),Tn=pn,Bn=E,yn=dn(w(yn=function(n,t){return null==n?{}:(r=n,t=t,r=Object(r),T(t,function(n,t){return t in r&&(n[t]=r[t]),n},{}));var r},U,k),yn+"");o.assignIn=Fn,o.before=B,o.bind=On,o.chain=function(n){return(n=o(n)).__chain__=!0,n},o.compact=function(n){return c(n,Boolean)},o.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Array(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return f(En(r)?j(r):[r],a(t,1))},o.create=function(n,t){n=hn(n);return null==t?n:Nn(n,t)},o.defaults=Sn,o.defer=xn,o.delay=An,o.filter=function(n,t){return c(n,h(t))},o.flatten=k,o.flattenDeep=function(n){return null!=n&&n.length?a(n,1/0):[]},o.iteratee=h,o.keys=Tn,o.map=function(n,t){return y(n,h(t))},o.matches=function(n){return v(Nn({},n))},o.mixin=M,o.negate=function(n){if("function"!=typeof n)throw new TypeError("Expected a function");return function(){return!n.apply(this,arguments)}},o.once=function(n){return B(2,n)},o.pick=yn,o.slice=function(n,t,r){var e=null==n?0:n.length;return r=r===U?e:+r,e?_(n,null==t?0:+t,r):[]},o.sortBy=function(n,e){var u=0;return e=h(e),y(y(n,function(n,t,r){return{value:n,index:u++,criteria:e(n,t,r)}}).sort(function(n,t){n:{var r=n.criteria,e=t.criteria;if(r!==e){var u=r!==U,o=null===r,i=r==r,c=e!==U,f=null===e,a=e==e;if(!f&&e<r||o&&c&&a||!u&&a||!i){r=1;break n}if(!o&&r<e||f&&u&&i||!c&&i||!a){r=-1;break n}}r=0}return r||n.index-t.index}),r("value"))},o.tap=function(n,t){return t(n),n},o.thru=function(n,t){return t(n)},o.toArray=function(n){return D(n)?n.length?j(n):[]:G(n)},o.values=G,o.extend=Fn,M(o,o),o.clone=function(n){return $(n)?En(n)?j(n):m(n,pn(n)):n},o.escape=function(n){return(n=C(n))&&Q.test(n)?n.replace(L,nn):n},o.every=function(n,t,r){return n=n,e=h(t=r?U:t),u=!0,_n(n,function(n,t,r){return u=!!e(n,t,r)}),u;var e,u},o.find=mn,o.forEach=S,o.has=function(n,t){return null!=n&&en.call(n,t)},o.head=N,o.identity=J,o.indexOf=F,o.isArguments=t,o.isArray=En,o.isBoolean=function(n){return!0===n||!1===n||q(n)&&"[object Boolean]"==on.call(n)},o.isDate=function(n){return q(n)&&"[object Date]"==on.call(n)},o.isEmpty=function(n){return D(n)&&(En(n)||z(n)||I(n.splice)||t(n))?!n.length:!pn(n).length},o.isEqual=function(n,t){return s(n,t)},o.isFinite=function(n){return"number"==typeof n&&ln(n)},o.isFunction=I,o.isNaN=function(n){return P(n)&&n!=+n},o.isNull=function(n){return null===n},o.isNumber=P,o.isObject=$,o.isRegExp=function(n){return q(n)&&"[object RegExp]"==on.call(n)},o.isString=z,o.isUndefined=function(n){return n===U},o.last=function(n){var t=null==n?0:n.length;return t?n[t-1]:U},o.max=function(n){return n&&n.length?i(n,J,p):U},o.min=function(n){return n&&n.length?i(n,J,b):U},o.noConflict=function(){return Y._===this&&(Y._=cn),this},o.noop=function(){},o.reduce=T,o.result=function(n,t,r){return I(t=(t=null==n?U:n[t])===U?r:t)?t.call(n):t},o.size=function(n){return null==n?0:(n=D(n)?n:pn(n)).length},o.some=function(n,t,r){return d(n,h(t=r?U:t))},o.uniqueId=function(n){var t=++un;return C(n)+t},o.each=S,o.first=N,M(o,(gn={},n(o,function(n,t){en.call(o.prototype,t)||(gn[t]=n)}),gn),{chain:!1}),o.VERSION="4.17.15",_n("pop join replace reverse split push shift sort splice unshift".split(" "),function(n){var r=(/^(?:replace|split)$/.test(n)?String.prototype:tn)[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",u=/^(?:pop|join|replace|shift)$/.test(n);o.prototype[n]=function(){var t=arguments;if(!u||this.__chain__)return this[e](function(n){return r.apply(En(n)?n:[],t)});var n=this.value();return r.apply(En(n)?n:[],t)}}),o.prototype.toJSON=o.prototype.valueOf=o.prototype.value=function(){return n=this.__wrapped__,T(this.__actions__,function(n,t){return t.func.apply(t.thisArg,f([n],t.args))},n);var n},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Y._=o,define(function(){return o})):Z?((Z.exports=o)._=o,X._=o):Y._=o}.call(this);layui.define(function(e){"use strict";function r(e){this.tpl=e}var o={open:"{{",close:"}}"},p=function(e,r,n){e=["#([\\s\\S])+?","([^{#}])*?"][e||0];return u((r||"")+o.open+e+o.close+(n||""))},a=function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},l=function(e,r){var n="Laytpl Error：";return"object"==typeof console&&console.error(n+e+"\n"+(r||"")),n+e},u=function(e){return new RegExp(e,"g")};r.pt=r.prototype,window.errors=0,r.pt.parse=function(e,r){var n=e,c=u("^"+o.open+"#",""),t=u(o.close+"$","");e='"use strict";var view = "'+(e=e.replace(/\s+|\r|\t|\n/g," ").replace(u(o.open+"#"),o.open+"# ").replace(u(o.close+"}"),"} "+o.close).replace(/\\/g,"\\\\").replace(u(o.open+"!(.+?)!"+o.close),function(e){return e=e.replace(u("^"+o.open+"!"),"").replace(u("!"+o.close),"").replace(u(o.open+"|"+o.close),function(e){return e.replace(/(.)/g,"\\$1")})}).replace(/(?="|')/g,"\\").replace(p(),function(e){return'";'+(e=e.replace(c,"").replace(t,"")).replace(/\\/g,"")+';view+="'}).replace(p(1),function(e){var r='"+(';return e.replace(/\s/g,"")===o.open+o.close?"":(e=e.replace(u(o.open+"|"+o.close),""),/^=/.test(e)&&(e=e.replace(/^=/,""),r='"+_escape_('),r+e.replace(/\\/g,"")+')+"')}))+'";return view;';try{return this.cache=e=new Function("d, _escape_",e),e(r,a)}catch(e){return delete this.cache,l(e,n)}},r.pt.render=function(e,r){var n=this;return e?(e=n.cache?n.cache(e,a):n.parse(n.tpl,e),r?void r(e):e):l("no data")};function n(e){return"string"!=typeof e?l("Template not found"):new r(e)}n.config=function(e){for(var r in e=e||{})o[r]=e[r]},n.v="1.2.0",e("laytpl",n)});layui.define(function(a){"use strict";function e(a){var e=this;e.config=a||{},e.config.index=++o.index,e.render(!0)}var r=document,s="getElementById",c="getElementsByTagName",u="layui-disabled";e.prototype.type=function(){var a=this.config;if("object"==typeof a.elem)return void 0===a.elem.length?2:3},e.prototype.view=function(){var n=this.config,r=n.groups="groups"in n?0|n.groups:5;n.layout="object"==typeof n.layout?n.layout:["prev","page","next"],n.count=0|n.count,n.curr=0|n.curr||1,n.limits="object"==typeof n.limits?n.limits:[10,20,30,40,50],n.limit=0|n.limit||10,n.pages=Math.ceil(n.count/n.limit)||1,n.curr>n.pages&&(n.curr=n.pages),r<0?r=1:r>n.pages&&(r=n.pages),n.prev="prev"in n?n.prev:"&#x4E0A;&#x4E00;&#x9875;",n.next="next"in n?n.next:"&#x4E0B;&#x4E00;&#x9875;";var t,i,s=n.pages>r?Math.ceil((n.curr+(1<r?1:0))/(0<r?r:1)):1,l={prev:n.prev?'<a href="javascript:;" class="layui-laypage-prev'+(1==n.curr?" "+u:"")+'" data-page="'+(n.curr-1)+'">'+n.prev+"</a>":"",page:function(){var a=[];if(n.count<1)return"";1<s&&!1!==n.first&&0!==r&&a.push('<a href="javascript:;" class="layui-laypage-first" data-page="1"  title="&#x9996;&#x9875;">'+(n.first||1)+"</a>");var e=Math.floor((r-1)/2),t=1<s?n.curr-e:1,i=1<s?(e=n.curr+(r-e-1))>n.pages?n.pages:e:r;for(i-t<r-1&&(t=i-r+1),!1!==n.first&&2<t&&a.push('<span class="layui-laypage-spr">&#x2026;</span>');t<=i;t++)t===n.curr?a.push('<span class="layui-laypage-curr"><em class="layui-laypage-em" '+(/^#/.test(n.theme)?'style="background-color:'+n.theme+';"':"")+"></em><em>"+t+"</em></span>"):a.push('<a href="javascript:;" data-page="'+t+'">'+t+"</a>");return n.pages>r&&n.pages>i&&!1!==n.last&&(i+1<n.pages&&a.push('<span class="layui-laypage-spr">&#x2026;</span>'),0!==r&&a.push('<a href="javascript:;" class="layui-laypage-last" title="&#x5C3E;&#x9875;"  data-page="'+n.pages+'">'+(n.last||n.pages)+"</a>")),a.join("")}(),next:n.next?'<a href="javascript:;" class="layui-laypage-next'+(n.curr==n.pages?" "+u:"")+'" data-page="'+(n.curr+1)+'">'+n.next+"</a>":"",count:'<span class="layui-laypage-count">共 '+n.count+" 条</span>",limit:(t=['<span class="layui-laypage-limits"><select lay-ignore>'],layui.each(n.limits,function(a,e){t.push('<option value="'+e+'"'+(e===n.limit?"selected":"")+">"+e+" 条/页</option>")}),t.join("")+"</select></span>"),refresh:['<a href="javascript:;" data-page="'+n.curr+'" class="layui-laypage-refresh">','<i class="fa fa-refresh"></i>',"</a>"].join(""),skip:['<span class="layui-laypage-skip">&#x5230;&#x7B2C;','<input type="text" min="1" value="'+n.curr+'" class="layui-input">','&#x9875;<button type="button" class="layui-laypage-btn">&#x786e;&#x5b9a;</button>',"</span>"].join("")};return['<div class="layui-box layui-laypage layui-laypage-'+(n.theme?/^#/.test(n.theme)?"molv":n.theme:"default")+'" id="layui-laypage-'+n.index+'">',(i=[],layui.each(n.layout,function(a,e){l[e]&&i.push(l[e])}),i.join("")),"</div>"].join("")},e.prototype.jump=function(a,e){if(a){var t=this,i=t.config,n=a.children,r=a[c]("button")[0],s=a[c]("input")[0],a=a[c]("select")[0],l=function(){var a=0|s.value.replace(/\s|\D/g,"");a&&(i.curr=a,t.render())};if(e)return l();for(var u=0,p=n.length;u<p;u++)"a"===n[u].nodeName.toLowerCase()&&o.on(n[u],"click",function(){var a=0|this.getAttribute("data-page");a<1||a>i.pages||(i.curr=a,t.render())});a&&o.on(a,"change",function(){var a=this.value;i.curr*a>i.count&&(i.curr=Math.ceil(i.count/a)),i.limit=a,t.render()}),r&&o.on(r,"click",function(){l()})}},e.prototype.skip=function(t){var i,a;t&&(i=this,(a=t[c]("input")[0])&&o.on(a,"keyup",function(a){var e=this.value,a=a.keyCode;/^(37|38|39|40)$/.test(a)||(/\D/.test(e)&&(this.value=e.replace(/\D/,"")),13===a&&i.jump(t,!0))}))},e.prototype.render=function(a){var e=this,t=e.config,i=e.type(),n=e.view();2===i?t.elem&&(t.elem.innerHTML=n):3===i?t.elem.html(n):r[s](t.elem)&&(r[s](t.elem).innerHTML=n),t.jump&&t.jump(t,a);n=r[s]("layui-laypage-"+t.index);e.jump(n),t.hash&&!a&&(location.hash="!"+t.hash+"="+t.curr),e.skip(n)};var o={render:function(a){return new e(a).index},index:layui.laypage?layui.laypage.index+1e4:0,on:function(e,a,t){return e.attachEvent?e.attachEvent("on"+a,function(a){a.target=a.srcElement,t.call(e,a)}):e.addEventListener(a,t,!1),this}};a("laypage",o)});layui.define("jquery",function(e){"use strict";function i(e){var i=this;i.index=++t.index,i.config=h.extend({},i.config,t.config,e),i.render()}var h=layui.jquery,t={config:{},index:layui.slider?layui.slider.index+1e4:0,set:function(e){var i=this;return i.config=h.extend({},i.config,e),i},on:function(e,i){return layui.onevent.call(this,a,e,i)}},a="slider",d="layui-disabled",y="layui-slider-bar",g="layui-slider-wrap",b="layui-slider-wrap-btn",x="layui-slider-tips",T="layui-slider-input-txt",n="layui-slider-input-btn",w="layui-slider-hover";i.prototype.config={type:"default",min:0,max:100,value:0,step:1,showstep:!1,tips:!0,input:!1,range:!1,height:200,disabled:!1,theme:"#17a2b8"},i.prototype.render=function(){var e,t=this,a=t.config;a.step<1&&(a.step=1),a.max<a.min&&(a.max=a.min+a.step),a.range?(a.value="object"==typeof a.value?a.value:[a.min,a.value],n=Math.min(a.value[0],a.value[1]),i=Math.max(a.value[0],a.value[1]),a.value[0]=n>a.min?n:a.min,a.value[1]=i>a.min?i:a.min,a.value[0]=a.value[0]>a.max?a.max:a.value[0],a.value[1]=a.value[1]>a.max?a.max:a.value[1],e=Math.floor((a.value[0]-a.min)/(a.max-a.min)*100),n=(l=Math.floor((a.value[1]-a.min)/(a.max-a.min)*100))-e+"%",e+="%",l+="%"):("object"==typeof a.value&&(a.value=Math.min.apply(null,a.value)),a.value<a.min&&(a.value=a.min),a.value>a.max&&(a.value=a.max),n=Math.floor((a.value-a.min)/(a.max-a.min)*100)+"%");var i=a.disabled?"#c2c2c2":a.theme,n='<div class="layui-slider '+("vertical"===a.type?"layui-slider-vertical":"")+'">'+(a.tips?'<div class="layui-slider-tips"></div>':"")+'<div class="layui-slider-bar" style="background:'+i+"; "+("vertical"===a.type?"height":"width")+":"+n+";"+("vertical"===a.type?"bottom":"left")+":"+(e||0)+';"></div><div class="layui-slider-wrap" style="'+("vertical"===a.type?"bottom":"left")+":"+(e||n)+';"><div class="layui-slider-wrap-btn" style="border: 2px solid '+i+';"></div></div>'+(a.range?'<div class="layui-slider-wrap" style="'+("vertical"===a.type?"bottom":"left")+":"+l+';"><div class="layui-slider-wrap-btn" style="border: 2px solid '+i+';"></div></div>':"")+"</div>",l=h(a.elem),i=l.next(".layui-slider");if(i[0]&&i.remove(),t.elemTemp=h(n),a.range?(t.elemTemp.find("."+g).eq(0).data("value",a.value[0]),t.elemTemp.find("."+g).eq(1).data("value",a.value[1])):t.elemTemp.find("."+g).data("value",a.value),l.html(t.elemTemp),"vertical"===a.type&&t.elemTemp.height(a.height+"px"),a.showstep){for(var s=(a.max-a.min)/a.step,r="",o=1;o<1+s;o++){var u=100*o/s;u<100&&(r+='<div class="layui-slider-step" style="'+("vertical"===a.type?"bottom":"left")+":"+u+'%"></div>')}t.elemTemp.append(r)}a.input&&!a.range&&(n=h('<div class="layui-slider-input layui-input"><div class="layui-slider-input-txt"><input type="text" class="layui-input"></div><div class="layui-slider-input-btn"><i class="fa fa-up"></i><i class="fa fa-down"></i></div></div>'),l.css("position","relative"),l.append(n),l.find("."+T).children("input").val(a.value),"vertical"===a.type?n.css({left:0,top:-48}):t.elemTemp.css("margin-right",n.outerWidth()+15)),a.disabled?(t.elemTemp.addClass(d),t.elemTemp.find("."+b).addClass(d)):t.slide(),t.elemTemp.find("."+b).on("mouseover",function(){var e="vertical"===a.type?a.height:t.elemTemp[0].offsetWidth,i=t.elemTemp.find("."+g),i=("vertical"===a.type?e-h(this).parent()[0].offsetTop-i.height():h(this).parent()[0].offsetLeft)/e*100,e=h(this).parent().data("value"),e=a.setTips?a.setTips(e):e;t.elemTemp.find("."+x).html(e),"vertical"===a.type?t.elemTemp.find("."+x).css({bottom:i+"%","margin-bottom":"20px",display:"inline-block"}):t.elemTemp.find("."+x).css({left:i+"%",display:"inline-block"})}).on("mouseout",function(){t.elemTemp.find("."+x).css("display","none")})},i.prototype.slide=function(e,i,t){function r(){return"vertical"===u.type?u.height:d[0].offsetWidth}function o(e,i){e=100<(e=100<Math.ceil(e)*m?Math.ceil(e)*m:Math.round(e)*m)?100:e,v.eq(i).css("vertical"===u.type?"bottom":"left",e+"%");var t=p(v[0].offsetLeft),a=u.range?p(v[1].offsetLeft):0;"vertical"===u.type?(d.find("."+x).css({bottom:e+"%","margin-bottom":"20px"}),t=p(r()-v[0].offsetTop-v.height()),a=u.range?p(r()-v[1].offsetTop-v.height()):0):d.find("."+x).css("left",e+"%");var t=100<t?100:t,a=100<a?100:a,n=Math.min(t,a),a=Math.abs(t-a);"vertical"===u.type?d.find("."+y).css({height:a+"%",bottom:n+"%"}):d.find("."+y).css({width:a+"%",left:n+"%"});var l,e=u.min+Math.round((u.max-u.min)*e/100);c=e,s.children("."+T).children("input").val(c),v.eq(i).data("value",e),e=u.setTips?u.setTips(e):e,d.find("."+x).html(e),!u.range||(l=[v.eq(0).data("value"),v.eq(1).data("value")])[0]>l[1]&&l.reverse(),u.change&&u.change(u.range?l:e)}var u=this.config,d=this.elemTemp,v=d.find("."+g),s=d.next(".layui-slider-input"),c=s.children("."+T).children("input").val(),m=100/((u.max-u.min)/Math.ceil(u.step)),p=function(e){var i=e/r()*100/m,t=Math.round(i)*m;return t=e==r()?Math.ceil(i)*m:t},f=h(['<div class="layui-auxiliar-moving" id="LAY-slider-moving"></div'].join(""));if("set"===e)return o(i,t);d.find("."+b).each(function(l){var s=h(this);s.on("mousedown",function(e){e=e||window.event;var t=s.parent()[0].offsetLeft,a=e.clientX;"vertical"===u.type&&(t=r()-s.parent()[0].offsetTop-v.height(),a=e.clientY);var i;function n(){i&&i(),f.remove()}e=function(e){e=e||window.event;var i=t+("vertical"===u.type?a-e.clientY:e.clientX-a),i=(i=(i=i<0?0:i)>r()?r():i)/r()*100/m;o(i,l),s.addClass(w),d.find("."+x).show(),e.preventDefault()},i=function(){s.removeClass(w),d.find("."+x).hide()},h("#LAY-slider-moving")[0]||h("body").append(f),f.on("mousemove",e),f.on("mouseup",n).on("mouseleave",n)})}),d.on("click",function(e){var i,t=h("."+b);!t.is(event.target)&&0===t.has(event.target).length&&t.length&&(t=(i=(i=(i="vertical"===u.type?r()-e.clientY+h(this).offset().top:e.clientX-h(this).offset().left)<0?0:i)>r()?r():i)/r()*100/m,i=u.range?"vertical"===u.type?Math.abs(i-parseInt(h(v[0]).css("bottom")))>Math.abs(i-parseInt(h(v[1]).css("bottom")))?1:0:Math.abs(i-v[0].offsetLeft)>Math.abs(i-v[1].offsetLeft)?1:0:0,o(t,i),e.preventDefault())}),s.hover(function(){h(this).children("."+n).fadeIn("fast")},function(){h(this).children("."+n).fadeOut("fast")}),s.children("."+n).children("i").each(function(i){h(this).on("click",function(){var e=((c=1==i?c-u.step<u.min?u.min:Number(c)-u.step:Number(c)+u.step>u.max?u.max:Number(c)+u.step)-u.min)/(u.max-u.min)*100/m;o(e,0)})});function a(){var e=this.value;e=(e=(e=isNaN(e)?0:e)<u.min?u.min:e)>u.max?u.max:e,e=((this.value=e)-u.min)/(u.max-u.min)*100/m,o(e,0)}s.children("."+T).children("input").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),a.call(this))}).on("change",a)},i.prototype.events=function(){this.config},t.render=function(e){e=new i(e);return function(){var t=this;return{setValue:function(e,i){return t.slide("set",e,i||0)},config:t.config}}.call(e)},e(a,t)});layui.define("jquery",function(e){"use strict";function k(e){var i={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),t=r-o;return i.b=r,i.s=0!=r?255*t/r:0,0!=i.s?e.r==r?i.h=(e.g-e.b)/t:e.g==r?i.h=2+(e.b-e.r)/t:i.h=4+(e.r-e.g)/t:i.h=-1,r==o&&(i.h=0),i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i}function y(e){var i={},o=e.h,r=255*e.s/100,t=255*e.b/100;return 0==r?i.r=i.g=i.b=t:(t=o%60*((e=t)-(r=(255-r)*t/255))/60,(o=360==o?0:o)<60?(i.r=e,i.b=r,i.g=r+t):o<120?(i.g=e,i.b=r,i.r=e-t):o<180?(i.g=e,i.r=r,i.b=r+t):o<240?(i.b=e,i.r=r,i.g=e-t):o<300?(i.b=e,i.g=r,i.r=r+t):o<360?(i.r=e,i.g=r,i.b=e-t):(i.r=0,i.g=0,i.b=0)),{r:Math.round(i.r),g:Math.round(i.g),b:Math.round(i.b)}}function d(e){var o=[(e=y(e)).r.toString(16),e.g.toString(16),e.b.toString(16)];return C.each(o,function(e,i){1==i.length&&(o[e]="0"+i)}),o.join("")}function x(e){return{r:(e=e.match(/[0-9]{1,3}/g)||[])[0],g:e[1],b:e[2]}}function t(e){this.index=++i.index,this.config=C.extend({},this.config,i.config,e),this.render()}var C=layui.jquery,i={config:{},index:layui.colorpicker?layui.colorpicker.index+1e4:0,set:function(e){var i=this;return i.config=C.extend({},i.config,e),i},on:function(e,i){return layui.onevent.call(this,"colorpicker",e,i)}},r="layui-colorpicker",n=".layui-colorpicker-main",P="fa-down",B="fa-close",w="layui-colorpicker-trigger-span",D="layui-colorpicker-trigger-i",E="layui-colorpicker-side-slider",H="layui-colorpicker-basis",W="layui-colorpicker-alpha-bgcolor",j="layui-colorpicker-alpha-slider",F="layui-colorpicker-basis-cursor",L="layui-colorpicker-main-input",M=C(window),l=C(document);t.prototype.config={color:"",size:null,alpha:!1,format:"hex",predefine:!1,colors:["#17a2b8","#5FB878","#1E9FFF","#FF5722","#FFB800","#01AAED","#999","#c00","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgb(0, 186, 189)","rgb(255, 120, 0)","rgb(250, 212, 0)","#393D49","rgba(0,0,0,.5)","rgba(255, 69, 0, 0.68)","rgba(144, 240, 144, 0.5)","rgba(31, 147, 255, 0.73)"]},t.prototype.render=function(){var e=this,i=e.config,o=C(['<div class="layui-unselect layui-colorpicker">',"<span "+("rgb"==i.format&&i.alpha?'class="layui-colorpicker-trigger-bgcolor"':"")+">",'<span class="layui-colorpicker-trigger-span" ','lay-type="'+("rgb"==i.format?i.alpha?"rgba":"torgb":"")+'" ','style="'+(r="",i.color?(r=i.color,3<(i.color.match(/[0-9]{1,3}/g)||[]).length&&(i.alpha&&"rgb"==i.format||(r="#"+d(k(x(i.color))))),"background: "+r):r)+'">','<i class="fa layui-colorpicker-trigger-i '+(i.color?P:B)+'"></i>',"</span>","</span>","</div>"].join("")),r=C(i.elem);i.size&&o.addClass("layui-colorpicker-"+i.size),r.addClass("layui-inline").html(e.elemColorBox=o),e.color=e.elemColorBox.find("."+w)[0].style.background,e.events()},t.prototype.renderPicker=function(){var e=this,i=e.config,o=e.elemColorBox[0],r=e.elemPicker=C(['<div id="layui-colorpicker'+e.index+'" data-index="'+e.index+'" class="layui-anim layui-anim-upbit layui-colorpicker-main">','<div class="layui-colorpicker-main-wrapper">','<div class="layui-colorpicker-basis">','<div class="layui-colorpicker-basis-white"></div>','<div class="layui-colorpicker-basis-black"></div>','<div class="layui-colorpicker-basis-cursor"></div>',"</div>",'<div class="layui-colorpicker-side">','<div class="layui-colorpicker-side-slider"></div>',"</div>","</div>",'<div class="layui-colorpicker-main-alpha '+(i.alpha?"layui-show":"")+'">','<div class="layui-colorpicker-alpha-bgcolor">','<div class="layui-colorpicker-alpha-slider"></div>',"</div>","</div>",function(){if(i.predefine){var o=['<div class="layui-colorpicker-main-pre">'];return layui.each(i.colors,function(e,i){o.push(['<div class="layui-colorpicker-pre'+(3<(i.match(/[0-9]{1,3}/g)||[]).length?" layui-colorpicker-pre-isalpha":"")+'">','<div style="background:'+i+'"></div>',"</div>"].join(""))}),o.push("</div>"),o.join("")}return""}(),'<div class="layui-colorpicker-main-input">','<div class="layui-inline">','<input type="text" class="layui-input">',"</div>",'<div class="layui-btn-container">','<button class="layui-btn layui-btn-primary layui-btn-sm" colorpicker-events="clear">清空</button>','<button class="layui-btn layui-btn-sm" colorpicker-events="confirm">确定</button>',"</div","</div>","</div>"].join(""));e.elemColorBox.find("."+w)[0];C(n)[0]&&C(n).data("index")==e.index?e.removePicker(t.thisElemInd):(e.removePicker(t.thisElemInd),C("body").append(r)),t.thisElemInd=e.index,t.thisColor=o.style.background,e.position(),e.pickerEvents()},t.prototype.removePicker=function(e){this.config;return C("#layui-colorpicker"+(e||this.index)).remove(),this},t.prototype.position=function(){function e(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]}function i(e){return document.documentElement[e?"clientWidth":"clientHeight"]}var o=this.config,r=this.bindElem||this.elemColorBox[0],t=this.elemPicker[0],n=r.getBoundingClientRect(),l=t.offsetWidth,c=t.offsetHeight,a=n.left,s=n.bottom;s+=5,(a-=(l-r.offsetWidth)/2)+l+5>i("width")?a=i("width")-l-5:a<5&&(a=5),s+c+5>i()&&(s=n.top>c?n.top-c:i()-c,s-=10),o.position&&(t.style.position=o.position),t.style.left=a+("fixed"===o.position?0:e(1))+"px",t.style.top=s+("fixed"===o.position?0:e())+"px"},t.prototype.val=function(){var e,i=this,o=(i.config,i.elemColorBox.find("."+w)),r=i.elemPicker.find("."+L),t=o[0].style.backgroundColor;t?(e=k(x(t)),o=o.attr("lay-type"),i.select(e.h,e.s,e.b),"torgb"===o&&r.find("input").val(t),"rgba"===o&&(o=x(t),3==(t.match(/[0-9]{1,3}/g)||[]).length?(r.find("input").val("rgba("+o.r+", "+o.g+", "+o.b+", 1)"),i.elemPicker.find("."+j).css("left",280)):(r.find("input").val(t),t=280*t.slice(t.lastIndexOf(",")+1,t.length-1),i.elemPicker.find("."+j).css("left",t)),i.elemPicker.find("."+W)[0].style.background="linear-gradient(to right, rgba("+o.r+", "+o.g+", "+o.b+", 0), rgb("+o.r+", "+o.g+", "+o.b+"))")):(i.select(0,100,100),r.find("input").val(""),i.elemPicker.find("."+W)[0].style.background="",i.elemPicker.find("."+j).css("left",280))},t.prototype.side=function(){function s(e,i,o,r){t.select(e,i,o),i=y({h:e,s:i,b:o}),m.addClass(P).removeClass(B),l[0].style.background="rgb("+i.r+", "+i.g+", "+i.b+")","torgb"===c&&t.elemPicker.find("."+L).find("input").val("rgb("+i.r+", "+i.g+", "+i.b+")"),"rgba"===c&&(o=0,o=280*r,u.css("left",o),t.elemPicker.find("."+L).find("input").val("rgba("+i.r+", "+i.g+", "+i.b+", "+r+")"),l[0].style.background="rgba("+i.r+", "+i.g+", "+i.b+", "+r+")",d[0].style.background="linear-gradient(to right, rgba("+i.r+", "+i.g+", "+i.b+", 0), rgb("+i.r+", "+i.g+", "+i.b+"))"),n.change&&n.change(t.elemPicker.find("."+L).find("input").val())}function i(e){C("#LAY-colorpicker-moving")[0]||C("body").append(b),b.on("mousemove",e),b.on("mouseup",function(){b.remove()}).on("mouseleave",function(){b.remove()})}var t=this,n=t.config,l=t.elemColorBox.find("."+w),c=l.attr("lay-type"),a=t.elemPicker.find(".layui-colorpicker-side"),e=t.elemPicker.find("."+E),f=t.elemPicker.find("."+H),r=t.elemPicker.find("."+F),d=t.elemPicker.find("."+W),u=t.elemPicker.find("."+j),p=e[0].offsetTop/180*360,g=100-(r[0].offsetTop+3)/180*100,h=(r[0].offsetLeft+3)/260*100,v=Math.round(u[0].offsetLeft/280*100)/100,m=t.elemColorBox.find("."+D),o=t.elemPicker.find(".layui-colorpicker-pre").children("div"),b=C(['<div class="layui-auxiliar-moving" id="LAY-colorpicker-moving"></div'].join(""));e.on("mousedown",function(e){var r=this.offsetTop,t=e.clientY;i(function(e){var i=r+(e.clientY-t),o=a[0].offsetHeight,i=(i=o<(i=i<0?0:i)?o:i)/180*360;s(p=i,h,g,v),e.preventDefault()}),e.preventDefault()}),a.on("click",function(e){var i=e.clientY-C(this).offset().top,i=(i=(i=i<0?0:i)>this.offsetHeight?this.offsetHeight:i)/180*360;s(p=i,h,g,v),e.preventDefault()}),r.on("mousedown",function(e){var n=this.offsetTop,l=this.offsetLeft,c=e.clientY,a=e.clientX;layui.stope(e),i(function(e){var i=n+(e.clientY-c),o=l+(e.clientX-a),r=f[0].offsetHeight-3,t=f[0].offsetWidth-3,o=((o=t<(o=o<-3?-3:o)?t:o)+3)/260*100,i=100-((i=r<(i=i<-3?-3:i)?r:i)+3)/180*100;s(p,h=o,g=i,v),e.preventDefault()}),e.preventDefault()}),f.on("mousedown",function(e){var i=e.clientY-C(this).offset().top-3+M.scrollTop(),o=e.clientX-C(this).offset().left-3+M.scrollLeft();(i=i<-3?-3:i)>this.offsetHeight-3&&(i=this.offsetHeight-3);o=((o=(o=o<-3?-3:o)>this.offsetWidth-3?this.offsetWidth-3:o)+3)/260*100,i=100-(i+3)/180*100;s(p,h=o,g=i,v),e.preventDefault(),r.trigger(e,"mousedown")}),u.on("mousedown",function(e){var r=this.offsetLeft,t=e.clientX;i(function(e){var i=r+(e.clientX-t),o=d[0].offsetWidth;o<(i=i<0?0:i)&&(i=o);i=Math.round(i/280*100)/100;s(p,h,g,v=i),e.preventDefault()}),e.preventDefault()}),d.on("click",function(e){var i=e.clientX-C(this).offset().left;(i=i<0?0:i)>this.offsetWidth&&(i=this.offsetWidth);i=Math.round(i/280*100)/100;s(p,h,g,v=i),e.preventDefault()}),o.each(function(){C(this).on("click",function(){C(this).parent(".layui-colorpicker-pre").addClass("selected").siblings().removeClass("selected");var e=this.style.backgroundColor,i=k(x(e)),o=e.slice(e.lastIndexOf(",")+1,e.length-1);p=i.h,h=i.s,g=i.b,3==(e.match(/[0-9]{1,3}/g)||[]).length&&(o=1),v=o,s(i.h,i.s,i.b,o)})})},t.prototype.select=function(e,i,o,r){var t=this,n=(t.config,d({h:e,s:100,b:100})),l=d({h:e,s:i,b:o}),e=e/360*180,o=180-o/100*180-3,i=i/100*260-3;t.elemPicker.find("."+E).css("top",e),t.elemPicker.find("."+H)[0].style.background="#"+n,t.elemPicker.find("."+F).css({top:o,left:i}),"change"!==r&&t.elemPicker.find("."+L).find("input").val("#"+l)},t.prototype.pickerEvents=function(){var c=this,a=c.config,s=c.elemColorBox.find("."+w),f=c.elemPicker.find("."+L+" input"),o={clear:function(e){s[0].style.background="",c.elemColorBox.find("."+D).removeClass(P).addClass(B),c.color="",a.done&&a.done(""),c.removePicker()},confirm:function(e,i){var o,r,t=f.val(),n=t,l={};if(-1<t.indexOf(",")?(l=k(x(t)),c.select(l.h,l.s,l.b),s[0].style.background=n="#"+d(l),3<(t.match(/[0-9]{1,3}/g)||[]).length&&"rgba"===s.attr("lay-type")&&(r=280*t.slice(t.lastIndexOf(",")+1,t.length-1),c.elemPicker.find("."+j).css("left",r),n=s[0].style.background=t)):(3==(o=-1<(o=t).indexOf("#")?o.substring(1):o).length&&(o=(r=o.split(""))[0]+r[0]+r[1]+r[1]+r[2]+r[2]),o=parseInt(o,16),l=k({r:o>>16,g:(65280&o)>>8,b:255&o}),s[0].style.background=n="#"+d(l),c.elemColorBox.find("."+D).removeClass(B).addClass(P)),"change"===i)return c.select(l.h,l.s,l.b,i),void(a.change&&a.change(n));c.color=t,a.done&&a.done(t),c.removePicker()}};c.elemPicker.on("click","*[colorpicker-events]",function(){var e=C(this),i=e.attr("colorpicker-events");o[i]&&o[i].call(this,e)}),f.on("keyup",function(e){var i=C(this);o.confirm.call(this,i,13===e.keyCode?null:"change")})},t.prototype.events=function(){var i=this,e=i.config,o=i.elemColorBox.find("."+w);i.elemColorBox.on("click",function(){i.renderPicker(),C(n)[0]&&(i.val(),i.side())}),e.elem[0]&&!i.elemColorBox[0].eventHandler&&(l.on("click",function(e){C(e.target).hasClass(r)||C(e.target).parents("."+r)[0]||C(e.target).hasClass(n.replace(/\./g,""))||C(e.target).parents(n)[0]||i.elemPicker&&(i.color?(e=k(x(i.color)),i.select(e.h,e.s,e.b)):i.elemColorBox.find("."+D).removeClass(P).addClass(B),o[0].style.background=i.color||"",i.removePicker())}),M.on("resize",function(){return!(!i.elemPicker||!C(n)[0])&&void i.position()}),i.elemColorBox[0].eventHandler=!0)},i.render=function(e){e=new t(e);return function(){return{config:this.config}}.call(e)},e("colorpicker",i)});layui.extend({upload:"extends/upload/upload"}).define(["laydate","upload","util","admin"],function(e){"use strict";var k=layui.$,r=layui.laydate,d=layui.upload,f=layui.layer,h=(layui.util,layui.admin),t=layui.hint(),v=layui.device(),b="form",p=".layui-form",C="layui-this",w="layui-hide",I="layui-disabled",a=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:function(e){if(!e||isNaN(e))return"只能填写数字"},date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};a.prototype.set=function(e){return k.extend(!0,this.config,e),this},a.prototype.verify=function(e){return k.extend(!0,this.config.verify,e),this},a.prototype.on=function(e,a){return layui.onevent.call(this,b,e,a)},a.prototype.val=function(e,i){k(p+'[lay-filter="'+e+'"]').each(function(e,a){var t=k(this);layui.each(i,function(e,a){var i=t.find('[name="'+e+'"]');i[0]&&("checkbox"===(e=i[0].type)?i[0].checked=a:"radio"===e?i.each(function(){this.value===a&&(this.checked=!0)}):i.val(a))})}),y.render(null,e)},a.prototype.render=function(e,c){var o=this,i=k(p+(c?'[lay-filter="'+c+'"]':"")),a={select:function(){function v(e,a){k(e.target).parent().hasClass(m)&&!a||(k("."+y).removeClass(y+"ed "+y+"up"),p&&x&&p.val(x)),p=null}var p,s="请选择",y="layui-form-select",m="layui-select-title",g="layui-select-none",x="",e=i.find("select");e.each(function(e,a){var i=k(this),t=i.next("."+y),n=this.disabled,l=a.value,r=k(a.options[a.selectedIndex]),d=a.options[0];if("string"==typeof i.attr("lay-ignore"))return i.show();var o,a="string"==typeof i.attr("lay-search"),d=d&&!d.value&&d.innerHTML||s,r=k(['<div class="'+(a?"":"layui-unselect ")+y,(n?" layui-select-disabled":"")+'">','<div class="'+m+'">','<input type="text" placeholder="'+d+'" value="'+(l?r.html():"")+'"'+(a?"":" readonly")+' class="layui-input'+(a?"":" layui-unselect")+(n?" "+I:"")+'">','<i class="layui-edge"></i></div>','<dl class="fa'+(i.find("optgroup")[0]?" layui-select-group":"")+'">',(r=i.find("*"),o=[],layui.each(r,function(e,a){0!==e||a.value?"optgroup"===a.tagName.toLowerCase()?o.push("<dt>"+a.label+"</dt>"):o.push('<dd lay-value="'+a.value+'" class="'+(l===a.value?C:"")+(a.disabled?" "+I:"")+'">'+a.innerHTML+"</dd>"):o.push('<dd lay-value="" class="layui-select-tips">'+(a.innerHTML||s)+"</dd>")}),0===o.length&&o.push('<dd lay-value="" class="'+I+'">没有选项</dd>'),o.join("")+"</dl>"),"</div>"].join(""));t[0]&&t.remove(),i.after(r),function(t,e,a){var d,i,n,o,l,r=k(this),s=t.find("."+m),c=s.find("input"),u=t.find("dl"),f=u.children("dd"),h=this.selectedIndex;e||(i=function(){var e=t.offset().top+t.outerHeight()+5-L.scrollTop(),a=u.outerHeight();h=r[0].selectedIndex,t.addClass(y+"ed"),f.removeClass(w),d=null,f.eq(h).addClass(C).siblings().removeClass(C),e+a>L.height()&&a<=e&&t.addClass(y+"up"),o()},n=function(e){t.removeClass(y+"ed "+y+"up"),c.blur(),d=null,e||l(c.val(),function(e){var a=r[0].selectedIndex;e&&(x=k(r[0].options[a]).html(),0===a&&x===c.attr("placeholder")&&(x=""),c.val(x||""))})},o=function(){var e,a,i=u.children("dd."+C);i[0]&&(e=i.position().top,a=u.height(),i=i.height(),a<e&&u.scrollTop(e+u.scrollTop()-a+i-5),e<0&&u.scrollTop(e+u.scrollTop()-5))},s.on("click",function(e){t.hasClass(y+"ed")?n():(v(e,!0),i()),u.find("."+g).remove()}),s.find(".layui-edge").on("click",function(){c.focus()}),c.on("keyup",function(e){9===e.keyCode&&i()}).on("keydown",function(l){var e=l.keyCode;9===e&&n();var r=function(t,n){l.preventDefault();var e=function(){var e=u.children("dd."+C);if(u.children("dd."+w)[0]&&"next"===t){var a=u.children("dd:not(."+w+",."+I+")"),i=a.eq(0).index();if(0<=i&&i<e.index()&&!a.hasClass(C))return a.eq(0).prev()[0]?a.eq(0).prev():u.children(":last")}return n&&n[0]?n:d&&d[0]?d:e}(),a=e[t](),i=e[t]("dd:not(."+w+")");return a[0]?(d=e[t](),i[0]&&!i.hasClass(I)||!d[0]?(i.addClass(C).siblings().removeClass(C),void o()):r(t,d)):d=null};38===e&&r("prev"),40===e&&r("next"),13===e&&(l.preventDefault(),u.children("dd."+C).trigger("click"))}),l=function(t,e,n){var l=0;layui.each(f,function(){var e=k(this),a=e.text(),i=-1===a.indexOf(t);(""===t||"blur"===n?t!==a:i)&&l++,"keyup"===n&&e[i?"addClass":"removeClass"](w)});var a=l===f.length;return e(a),a},a&&c.on("keyup",function(e){var a=this.value,e=e.keyCode;if(9===e||13===e||37===e||38===e||39===e||40===e)return!1;l(a,function(e){e?u.find("."+g)[0]||u.append('<p class="'+g+'">无匹配项</p>'):u.find("."+g).remove()},"keyup"),""===a&&u.find("."+g).remove(),o()}).on("blur",function(e){var a=r[0].selectedIndex;p=c,x=k(r[0].options[a]).html(),0===a&&x===c.attr("placeholder")&&(x=""),setTimeout(function(){l(c.val(),function(e){x||c.val("")},"blur")},200)}),f.on("click",function(){var e=k(this),a=e.attr("lay-value"),i=r.attr("lay-filter");return e.hasClass(I)||(e.hasClass("layui-select-tips")?c.val(""):(c.val(e.text()),e.addClass(C)),e.siblings().removeClass(C),r.val(a).removeClass("layui-form-danger"),layui.event.call(this,b,"select("+i+")",{elem:r[0],value:a,othis:t}),n(!0)),!1}),t.find("dl>dt").on("click",function(e){return!1}),k(document).off("click",v).on("click",v))}.call(this,r,n,a)})},checkbox:function(){var o={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},e=i.find("input[type=checkbox]");e.each(function(e,a){var i=k(this),t=i.attr("lay-skin"),n=(i.attr("lay-text")||"").split("|"),l=this.disabled,r=o[t="switch"===t?"_"+t:t]||o.checkbox;if("string"==typeof i.attr("lay-ignore"))return i.show();var d=i.next("."+r[0]),n=k(['<div class="layui-unselect '+r[0],a.checked?" "+r[1]:"",l?" layui-checkbox-disbaled "+I:"",'"',t?' lay-skin="'+t+'"':"",">",(n={checkbox:[a.title.replace(/\s/g,"")?"<span>"+a.title+"</span>":"",'<i class="fa fa-check"></i>'].join(""),_switch:"<em>"+((a.checked?n[0]:n[1])||"")+"</em><i></i>"})[t]||n.checkbox,"</div>"].join(""));d[0]&&d.remove(),i.after(n),function(i,t){var n=k(this);i.on("click",function(){var e=n.attr("lay-filter"),a=(n.attr("lay-text")||"").split("|");n[0].disabled||(n[0].checked?(n[0].checked=!1,i.removeClass(t[1]).find("em").text(a[1])):(n[0].checked=!0,i.addClass(t[1]).find("em").text(a[0])),layui.event.call(n[0],b,t[2]+"("+e+")",{elem:n[0],value:n[0].value,othis:i}))})}.call(this,n,r)})},radio:function(){var d="layui-form-radio",e=i.find("input[type=radio]");e.each(function(e,a){var i=k(this),t=i.next("."+d),n=this.disabled;if("string"==typeof i.attr("lay-ignore"))return i.show();t[0]&&t.remove();a=k(['<div class="layui-unselect '+d,a.checked?" "+d+"ed":"",(n?" layui-radio-disbaled "+I:"")+'">','<i class="fa '+(a.checked?"fa-dot-circle-o":"fa-circle-o")+'"></i>',"<div>"+(a=a.title||"","string"==typeof i.next().attr("lay-radio")&&(a=i.next().html(),i.next().remove()),a)+"</div>","</div>"].join(""));i.after(a),function(t){var n=k(this),l="fa-circle-o",r="fa-dot-circle-o";t.on("click",function(){var e=n[0].name,a=n.parents(p),i=n.attr("lay-filter"),e=a.find("input[name="+e.replace(/(\.|#|\[|\])/g,"\\$1")+"]");n[0].disabled||(layui.each(e,function(){var e=k(this).next("."+d);this.checked=!1,e.removeClass(d+"ed"),e.find(".fa").removeClass(r).addClass(l)}),n[0].checked=!0,t.addClass(d+"ed"),t.find(".fa").addClass(r).removeClass(l),layui.event.call(n[0],b,"radio("+i+")",{elem:n[0],value:n[0].value,othis:t}))})}.call(this,a)})},img:function(){function l(e,a){var i=a.parents("."+o),t=a.find(".uploader__files"),n=a.find(".img__picker"),l=i.find("input[type=hidden]"),r=n.data("limit");if(c=i.attr("lay-filter"),1==r&&void 0!==e[0]&&0<e[0].length)t.append(s.replace(new RegExp(/(UPLOADEDFILE)/g),e[0])),l.val(e[0]),n.hide();else{var d=l.val();if((d=void 0!==d&&1<d.length?d.split(","):[]).length>=r)return;k.each(e,function(e,a){d.push(a),d.length>=r&&n.hide(),t.append(s.replace(new RegExp(/(UPLOADEDFILE)/g),a))}),l.val(d.join(","))}t.on("mouseenter",".uploader__file",function(){k(this).find(".uploader__mask").show()}).on("mouseleave",".uploader__file",function(){k(this).find(".uploader__mask").hide()}),t.on("click",".j_delete",function(){var e,a;1==r?(t.remove(),n.show(),l.val("")):(k(this).parents(".uploader__file").remove(),a=k(this).attr("data-id"),-1<(a=(e=1<(e=l.val()).length?e.split(","):[]).indexOf(a))&&e.splice(a,1),n.show(),l.val(e))}),layui.event.call(e[0],b,"img("+c+")",{elem:e[0],value:l.val(),othis:a})}var o="layui-form-img",e=i.find("."+o),s='<li class="uploader__file" style="background-image: url(UPLOADEDFILE)"><div class="uploader__mask" style="display: none"><div class="mask__delete"><a href="javascript:;" class="j_delete" data-id="UPLOADEDFILE"><i class="fa fa-close"></i></a></div></div></li>';e.each(function(e,a){var i=k(this),t=i.find("input[type=hidden]").val(),n=i.data("limit")||1,n=k(['<div class="m-uploader clearfix">','<ul class="uploader__files"></ul>','<div class="img__picker" data-limit="'+n+'" ></div>',"</div>"].join(""));0<i.find(".m-uploader").length||(i.append(n),l(void 0!==t&&0<t.length?t.split(","):[],n),function(a){var e=k(this),i=a.find(".img__picker"),t=e.data("limit");i.on("click",function(){d.render({url:"/api/upload",fileNumLimit:t,done:function(e){l(e,a)}})})}.call(this,n))})},date:function(){i.find(".layui-form-date").each(function(e,a){r.render({elem:a,type:k(a).attr("date-type")||"date"})}),i.find(".layui-form-daterange").each(function(e,a){var i=k(this),t="",n="",l=i.data("options"),t=r.render({elem:i.find(".start_at")[0],min:l.min||"1900-1-1",max:l.max||"2999-12-31",type:l.type||"date",value:i.find(".start_at")[0].value,done:function(e,a){n.config.min=lay.extend({},a,{month:a.month-1})}}),n=r.render({elem:i.find(".end_at")[0],min:l.min||"1900-1-1",max:l.max||"2999-12-31",type:l.type||"date",value:i.find(".end_at")[0].value,done:function(e,a){t.config.max=lay.extend({},a,{month:a.month-1})}})})},region:function(){var a="layui-region",r=function(i,e){var t=i.data("id"),n=i.parents("."+a).data("mode")||"id",l=!1;k.each(e,function(e,a){!1===l&&!1===l&&(l=0<t&&t===a.id);a='<option value="'+("id"==n?a.id:a.label)+'">'+a.label+"</option>";i.append(a)}),l&&i.val(t),o.render("select")},d=function(e){e.find("option").remove()};i.find("."+a).each(function(e,a){var i=k(a),t=k.parseJSON(i.find("input[name=_data]").val()),a=i.find("[data-province]"),n=i.find("[data-city]"),l=i.find("[data-region]");o.on("select(province)",function(e){var a=Number(e.value),e=[{id:"",label:""}];0<a&&(d(n),d(l),n.data("provinceId",a),e=e.concat(_.find(t,{id:a}).children),r(n,e),n.parent("div").show(),l.parent("div").hide())}),o.on("select(city)",function(e){k(this);var a=n.data("provinceId"),e=Number(e.value);0<e&&(d(l),l.data("cityId",e),a=_.find(t,{id:a}).children,r(l,_.find(a,{id:e}).children),l.parent("div").show())}),r(a,t)})}};return e?a[e]?a[e]():t.error("不支持的"+e+"表单渲染"):layui.each(a,function(e,a){a()}),o};function i(){var e=k(this),o=y.config.verify,s=null,c="layui-form-danger",t={},a=(r=e.parents(p)).find("*[lay-verify]"),i=e.parents("form")[0],n=r.find("input,select,textarea"),l=e.attr("lay-filter"),r=e.hasClass("J_ajax");if(layui.each(a,function(e,n){var l=k(this),a=l.attr("lay-verify").split("|"),r=l.attr("lay-verType"),d=l.val();if(l.removeClass(c),layui.each(a,function(e,a){var i="",t="function"==typeof o[a];if(o[a]){t=t?i=o[a](d,n):!o[a][0].test(d),i=i||o[a][1];if(t)return"tips"===r?f.tips(i,"string"==typeof l.attr("lay-ignore")||"select"!==n.tagName.toLowerCase()&&!/^checkbox|radio$/.test(n.type)?l:l.next(),{tips:1}):"alert"===r?f.alert(i,{title:"提示",shadeClose:!0}):f.msg(i,{icon:5,shift:6}),v.android||v.ios||n.focus(),l.addClass(c),s=!0}}),s)return s}),s)return!1;var d={};layui.each(n,function(e,a){var i;a.name=(a.name||"").replace(/^\s*|\s*&/,""),a.name&&(/^.*\[\]$/.test(a.name)&&(i=a.name.match(/^(.*)\[\]$/g)[0],d[i]=0|d[i],a.name=a.name.replace(/^(.*)\[\]$/,"$1["+d[i]+++"]")),/^checkbox|radio$/.test(a.type)&&!a.checked||(t[a.name]=a.value))});var u=e.parents("form");return r?(layui.util.request.ajax({type:u.attr("method"),url:u.attr("action"),data:t,success:function(e){if(0==e.errcode){if(f.msg(e.msg),e.data.hasOwnProperty("redirect"))return void setTimeout(function(){h.openTab(e.data.redirect,"列表")},1500);parent.layer&&window.name&&setTimeout(function(){parent.layer.close(parent.layer.getFrameIndex(window.name))},1500),u[0].reset()}else f.alert(e.msg,{title:"提示",shadeClose:!0});return layui.event.call(this,b,"submit("+l+")",{elem:this,form:i,field:t})}}),!1):layui.event.call(this,b,"submit("+l+")",{elem:this,form:i,field:t})}var y=new a,a=k("body"),L=k(window);y.render(),a.on("reset",p,function(){var e=k(this).attr("lay-filter");setTimeout(function(){y.render(null,e)},50)}),a.on("submit",p,i).on("click","*[lay-submit]",i),a.on("click","*[lay-submit-cancel]",function(){parent.layer.close(parent.layer.getFrameIndex(window.name))}),e(b,y)});layui.define("form",function(e){"use strict";function i(e){var i=this;i.index=++r.index,i.config=k.extend({},i.config,r.config,e),i.render()}var k=layui.$,a=layui.form,n="tree",r={config:{},index:layui[n]?layui[n].index+1e4:0,set:function(e){var i=this;return i.config=k.extend({},i.config,e),i},on:function(e,i){return layui.onevent.call(this,n,e,i)}},t=function(){var i=this,e=i.config,a=e.id||i.index;return t.that[a]=i,{config:t.config[a]=e,reload:function(e){i.reload.call(i,e)},getChecked:function(){return i.getChecked.call(i)},setChecked:function(e){return i.setChecked.call(i,e)}}},g="layui-hide",s="layui-disabled",x="layui-tree-set",b="layui-tree-iconClick",w="fa-plus-square-o",T="fa-minus-square-o",L="layui-tree-entry",c="layui-tree-main",y="layui-tree-txt",q="layui-tree-pack",N="layui-tree-spread",A="layui-tree-setLineShort",F="layui-tree-showLine",I="layui-tree-lineExtend";i.prototype.config={data:[],showCheckbox:!1,showLine:!0,accordion:!1,onlyIconControl:!1,isJump:!1,edit:!1,text:{defaultNodeName:"未命名",none:"无数据"}},i.prototype.reload=function(e){var a=this;layui.each(e,function(e,i){i.constructor===Array&&delete a.config[e]}),a.config=k.extend(!0,{},a.config,e),a.render()},i.prototype.render=function(){var e=this,i=e.config,a=k('<div class="layui-tree'+(i.showCheckbox?" layui-form":"")+(i.showLine?" layui-tree-line":"")+'" lay-filter="LAY-tree-'+e.index+'"></div>');e.tree(a);var n=i.elem=k(i.elem);if(n[0]){if(i.showSearch&&a.prepend('<input type="text" class="layui-input layui-tree-search" placeholder="请输入关键字进行过滤">'),e.key=i.id||e.index,e.elem=a,e.elemNone=k('<div class="layui-tree-emptyText">'+i.text.none+"</div>"),n.html(e.elem),0==e.elem.find(".layui-tree-set").length)return e.elem.append(e.elemNone);i.drag&&e.drag(),i.showCheckbox&&e.renderForm("checkbox"),e.elem.find(".layui-tree-set").each(function(){var e=k(this);e.parent(".layui-tree-pack")[0]||e.addClass("layui-tree-setHide"),!e.next()[0]&&e.parents(".layui-tree-pack").eq(1).hasClass("layui-tree-lineExtend")&&e.addClass(A),e.next()[0]||e.parents(".layui-tree-set").eq(0).next()[0]||e.addClass(A)}),e.events()}},i.prototype.renderForm=function(e){a.render(e,"LAY-tree-"+this.index)},i.prototype.tree=function(t,e){var l=this,d=l.config,e=e||d.data;layui.each(e,function(e,i){var a=i.children&&0<i.children.length,n=k('<div class="layui-tree-pack" '+(i.spread?'style="display: block;"':"")+'"></div>'),r=k(['<div data-id="'+i.id+'" class="layui-tree-set'+(i.spread?" layui-tree-spread":"")+(i.checked?" layui-tree-checkedFirst":"")+'">',"<div "+(d.drag&&!i.fixed?'draggable="true"':"")+' class="layui-tree-entry">','<div class="layui-tree-main">',d.showLine?a?'<span class="layui-tree-iconClick layui-tree-icon"><i class="fa '+(i.spread?"fa-minus-square-o":"fa-plus-square-o")+'"></i></span>':'<span class="layui-tree-iconClick"><i class="fa fa-file"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-tree-iconArrow '+(a?"":g)+'"></i></span>',d.showCheckbox?'<input type="checkbox" name="layuiTreeCheck" lay-skin="primary" '+(i.disabled?"disabled":"")+'  value="'+i.id+'">':"",d.isJump&&i.href?'<a href="'+i.href+'" target="_blank" class="'+y+'">'+(i.text||i.label||d.text.defaultNodeName)+"</a>":'<span class="'+y+(i.disabled?" "+s:"")+'">'+(i.text||i.label||d.text.defaultNodeName)+"</span>","</div>",function(){if(!d.edit)return"";var a={add:'<i class="fa fa-add-1"  data-type="add"></i>',update:'<i class="fa fa-edit" data-type="update"></i>',del:'<i class="fa fa-delete" data-type="del"></i>'},n=['<div class="layui-btn-group layui-tree-btnGroup">'];return!0===d.edit&&(d.edit=["update","del"]),"object"==typeof d.edit?(layui.each(d.edit,function(e,i){n.push(a[i]||"")}),n.join("")+"</div>"):void 0}(),"</div></div>"].join(""));a&&(r.append(n),l.tree(n,i.children)),t.append(r),r.prev("."+x)[0]&&r.prev().children(".layui-tree-pack").addClass("layui-tree-showLine"),a||r.parent(".layui-tree-pack").addClass("layui-tree-lineExtend"),l.spread(r,i),d.showCheckbox&&l.checkClick(r,i),d.edit&&l.operate(r,i)})},i.prototype.spread=function(n,e){var r=this.config,i=n.children("."+L),a=i.children("."+c),t=i.find("."+b),i=i.find("."+y),l=r.onlyIconControl?t:a,d="";l.on("click",function(e){var i=n.children("."+q),a=(l.children(".fa")[0]?l:l.find(".layui-tree-icon")).children(".fa");i[0]?n.hasClass(N)?(n.removeClass(N),i.slideUp(200),a.removeClass(T).addClass(w)):(n.addClass(N),i.slideDown(200),a.addClass(T).removeClass(w),r.accordion&&((a=n.siblings("."+x)).removeClass(N),a.children("."+q).slideUp(200),a.find(".layui-tree-icon").children(".fa").removeClass(T).addClass(w))):d="normal"}),i.on("click",function(){k(this).hasClass(s)||(d=n.hasClass(N)?r.onlyIconControl?"open":"close":r.onlyIconControl?"close":"open",r.click&&r.click({elem:n,state:d,data:e}))})},i.prototype.setCheckbox=function(e,i,a){this.config;var r=a.prop("checked");"object"!=typeof i.children&&!e.find("."+q)[0]||e.find("."+q).find('input[name="layuiTreeCheck"]').each(function(){this.disabled||(this.checked=r)});var t=function(e){var i,a,n;e.parents("."+x)[0]&&(n=(a=e.parent("."+q)).parent(),e=a.prev().find('input[name="layuiTreeCheck"]'),r?e.prop("checked",r):(a.find('input[name="layuiTreeCheck"]').each(function(){this.checked&&(i=!0)}),i||e.prop("checked",!1)),t(n))};t(e),this.renderForm("checkbox")},i.prototype.checkClick=function(a,n){var r=this,t=r.config;a.children("."+L).children("."+c).on("click",'input[name="layuiTreeCheck"]+',function(e){layui.stope(e);var i=k(this).prev(),e=i.prop("checked");i.prop("disabled")||(r.setCheckbox(a,n,i),t.oncheck&&t.oncheck({elem:a,checked:e,data:n}))})},i.prototype.operate=function(h,o){var u=this,f=u.config,e=h.children("."+L),p=e.children("."+c);e.children(".layui-tree-btnGroup").on("click",".fa",function(e){layui.stope(e);var t,i=k(this).data("type"),a=h.children("."+q),n={data:o,type:i,elem:h};if("add"==i){a[0]||(f.showLine?(p.find("."+b).addClass("layui-tree-icon"),p.find("."+b).children(".fa").addClass(w).removeClass("fa-file")):p.find(".layui-tree-iconArrow").removeClass(g),h.append('<div class="layui-tree-pack"></div>'));var r,l,d,s=f.operate&&f.operate(n),e={};if(e.text=f.text.defaultNodeName,e.id=s,u.tree(h.children("."+q),[e]),f.showLine&&(a[0]?(a.hasClass(I)||a.addClass(I),h.find("."+q).each(function(){k(this).children("."+x).last().addClass(A)}),(a.children("."+x).last().prev().hasClass(A)?a.children("."+x).last().prev():a.children("."+x).last()).removeClass(A),!h.parent("."+q)[0]&&h.next()[0]&&a.children("."+x).last().removeClass(A)):(r=h.siblings("."+x),l=1,d=h.parent("."+q),layui.each(r,function(e,i){k(i).children("."+q)[0]||(l=0)}),1==l?(r.children("."+q).addClass(F),r.children("."+q).children("."+x).removeClass(A),h.children("."+q).addClass(F),d.removeClass(I),d.children("."+x).last().children("."+q).children("."+x).last().addClass(A)):h.children("."+q).children("."+x).addClass(A))),!f.showCheckbox)return;p.find('input[name="layuiTreeCheck"]')[0].checked&&(h.children("."+q).children("."+x).last().find('input[name="layuiTreeCheck"]')[0].checked=!0),u.renderForm("checkbox")}else if("update"==i){i=p.children("."+y).html();p.children("."+y).html(""),p.append('<input type="text" class="layui-tree-editInput">'),p.children(".layui-tree-editInput").val(i).focus();var c=function(e){var i=(i=e.val().trim())||f.text.defaultNodeName;e.remove(),p.children("."+y).html(i),n.data.text=i,f.operate&&f.operate(n)};p.children(".layui-tree-editInput").blur(function(){c(k(this))}),p.children(".layui-tree-editInput").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),c(k(this)))})}else{if(f.operate&&f.operate(n),n.status="remove",!h.prev("."+x)[0]&&!h.next("."+x)[0]&&!h.parent("."+q)[0])return h.remove(),void u.elem.append(u.elemNone);h.siblings("."+x).children("."+L)[0]?(f.showCheckbox&&(t=function(e){var i,a,n,r;e.parents("."+x)[0]&&(i=e.siblings("."+x).children("."+L),e=(a=e.parent("."+q).prev()).find('input[name="layuiTreeCheck"]')[0],n=1,(r=0)==e.checked&&(i.each(function(e,i){i=k(i).find('input[name="layuiTreeCheck"]')[0];0!=i.checked||i.disabled||(n=0),i.disabled||(r=1)}),1==n&&1==r&&(e.checked=!0,u.renderForm("checkbox"),t(a.parent("."+x)))))})(h),f.showLine&&(r=h.siblings("."+x),l=1,d=h.parent("."+q),layui.each(r,function(e,i){k(i).children("."+q)[0]||(l=0)}),1==l?(a[0]||(d.removeClass(I),r.children("."+q).addClass(F),r.children("."+q).children("."+x).removeClass(A)),(h.next()[0]?d.children("."+x).last():h.prev()).children("."+q).children("."+x).last().addClass(A),h.next()[0]||h.parents("."+x)[1]||h.parents("."+x).eq(0).next()[0]||h.prev("."+x).addClass(A)):!h.next()[0]&&h.hasClass(A)&&h.prev().addClass(A))):(r=h.parent("."+q).prev(),f.showLine?(r.find("."+b).removeClass("layui-tree-icon"),r.find("."+b).children(".fa").removeClass(T).addClass("fa-file"),(d=r.parents("."+q).eq(0)).addClass(I),d.children("."+x).each(function(){k(this).children("."+q).children("."+x).last().addClass(A)})):r.find(".layui-tree-iconArrow").addClass(g),h.parents("."+x).eq(0).removeClass(N),h.parent("."+q).remove()),h.remove()}})},i.prototype.drag=function(){var v=this,m=v.config;v.elem.on("dragstart","."+L,function(){var e=k(this).parent("."+x),i=e.parents("."+x)[0]?e.parents("."+x).eq(0):"未找到父节点";m.dragstart&&m.dragstart(e,i)}),v.elem.on("dragend","."+L,function(e){var d,l,i,s,c,h,o=(e=e||event).clientY,u=k(this).parent("."+x),f=u.height(),p=u.offset().top,e=v.elem.find("."+x),y=v.elem.height()+v.elem.offset().top-13,n=u.parents("."+x)[0],r=u.next()[0];n&&(d=u.parent("."+q),l=u.parents("."+x).eq(0),i=l.parent("."+q),s=l.offset().top,c=u.siblings(),h=l.children("."+q).children("."+x).length);function C(t){var a,l;n||r||v.elem.children("."+x).last().children("."+q).children("."+x).last().addClass(A),n?1==h?(m.showLine?(t.find("."+b).removeClass("layui-tree-icon"),t.find("."+b).children(".fa").removeClass(T).addClass("fa-file"),i.addClass(I),i.children("."+x).children("."+q).each(function(){k(this).children("."+x).last().addClass(A)})):t.find(".layui-tree-iconArrow").addClass(g),t.children("."+q).remove(),t.removeClass(N)):(m.showLine&&(a=1,layui.each(c,function(e,i){k(i).children("."+q)[0]||(a=0)}),1==a?(u.children("."+q)[0]||(d.removeClass(I),c.children("."+q).addClass(F),c.children("."+q).children("."+x).removeClass(A)),d.children("."+x).last().children("."+q).children("."+x).last().addClass(A),r||t.parents("."+x)[0]||t.next()[0]||d.children("."+x).last().addClass(A)):!r&&u.hasClass(A)&&d.children("."+x).last().addClass(A)),m.showCheckbox&&(l=function(e){if(e){if(!e.parents("."+x)[0])return}else if(!t[0])return;var i=(e?e.siblings():c).children("."+L),a=(e?e.parent("."+q):d).prev(),e=a.find('input[name="layuiTreeCheck"]')[0],n=1,r=0;0==e.checked&&(i.each(function(e,i){i=k(i).find('input[name="layuiTreeCheck"]')[0];0!=i.checked||i.disabled||(n=0),i.disabled||(r=1)}),1==n&&1==r&&(e.checked=!0,v.renderForm("checkbox"),l(a.parent("."+x)||t)))})()):u.removeClass("layui-tree-setHide")}e.each(function(){if(0!=k(this).height()){if(p<o&&o<p+f)return void(m.dragend&&m.dragend("drag error"));if(1==h&&s<o&&o<p+f)return void(m.dragend&&m.dragend("drag error"));var e,i,a,n,r,t=k(this).offset().top;if(t<o&&o<t+15)return k(this).children("."+q)[0]||(m.showLine?(k(this).find("."+b).eq(0).addClass("layui-tree-icon"),k(this).find("."+b).eq(0).children(".fa").addClass(w).removeClass("fa-file")):k(this).find(".layui-tree-iconArrow").removeClass(g),k(this).append('<div class="layui-tree-pack"></div>')),k(this).children("."+q).append(u),C(l),m.showLine&&(e=k(this).children("."+q).children("."+x),u.children("."+q).children("."+x).last().addClass(A),1==e.length?(n=k(this).siblings("."+x),r=1,i=k(this).parent("."+q),layui.each(n,function(e,i){k(i).children("."+q)[0]||(r=0)}),1==r?(n.children("."+q).addClass(F),n.children("."+q).children("."+x).removeClass(A),k(this).children("."+q).addClass(F),i.removeClass(I),i.children("."+x).last().children("."+q).children("."+x).last().addClass(A).removeClass("layui-tree-setHide")):k(this).children("."+q).children("."+x).addClass(A).removeClass("layui-tree-setHide")):(u.prev("."+x).hasClass(A)?(u.prev("."+x).removeClass(A),u.addClass(A)):(u.removeClass("layui-tree-setLineShort layui-tree-setHide"),u.children("."+q)[0]?u.prev("."+x).children("."+q).children("."+x).last().removeClass(A):u.siblings("."+x).find("."+q).each(function(){k(this).children("."+x).last().addClass(A)})),k(this).next()[0]||u.addClass(A))),m.showCheckbox&&k(this).children("."+L).find('input[name="layuiTreeCheck"]')[0].checked&&u.children("."+L).find('input[name="layuiTreeCheck"]+').click(),m.dragend&&m.dragend("drag success",u,k(this)),!1;if(o<t)return k(this).before(u),C(l),m.showLine&&(i=u.children("."+q),t=(a=k(this).parents("."+x).eq(0)).children("."+q).children("."+x).last(),i[0]?(u.removeClass(A),i.children("."+x).last().removeClass(A),n=u.siblings("."+x),r=1,layui.each(n,function(e,i){k(i).children("."+q)[0]||(r=0)}),1==r?a[0]&&(n.children("."+q).addClass(F),n.children("."+q).children("."+x).removeClass(A),t.children("."+q).children("."+x).last().addClass(A).removeClass(F)):u.children("."+q).children("."+x).last().addClass(A),!a.parent("."+q)[0]&&a.next()[0]&&t.removeClass(A)):(a.hasClass(I)||a.addClass(I),a.find("."+q).each(function(){k(this).children("."+x).last().addClass(A)})),a[0]||(u.addClass("layui-tree-setHide"),u.children("."+q).children("."+x).last().removeClass(A))),a[0]&&m.showCheckbox&&a.children("."+L).find('input[name="layuiTreeCheck"]')[0].checked&&u.children("."+L).find('input[name="layuiTreeCheck"]+').click(),m.dragend&&m.dragend("拖拽成功，插入目标节点上方",u,k(this)),!1;if(y<o)return v.elem.children("."+x).last().children("."+q).addClass(F),v.elem.append(u),C(l),u.prev().children("."+q).children("."+x).last().removeClass(A),u.addClass("layui-tree-setHide"),u.children("."+q).children("."+x).last().addClass(A),m.dragend&&m.dragend("拖拽成功，插入最外层节点",u,v.elem),!1}})})},i.prototype.events=function(){var i=this,r=i.config,e=i.elem.find(".layui-tree-checkedFirst");layui.each(e,function(e,i){k(i).children("."+L).find('input[name="layuiTreeCheck"]+').trigger("click")}),i.elem.find(".layui-tree-search").on("keyup",function(){var e=k(this),a=e.val(),e=e.nextAll(),n=[];e.find("."+y).each(function(){var i,e=k(this).parents("."+L);-1!=k(this).html().indexOf(a)&&(n.push(k(this).parent()),(i=function(e){e.addClass("layui-tree-searchShow"),e.parent("."+q)[0]&&i(e.parent("."+q).parent("."+x))})(e.parent("."+x)))}),e.find("."+L).each(function(){var e=k(this).parent("."+x);e.hasClass("layui-tree-searchShow")||e.addClass(g)}),0==e.find(".layui-tree-searchShow").length&&i.elem.append(i.elemNone),r.onsearch&&r.onsearch({elem:n})}),i.elem.find(".layui-tree-search").on("keydown",function(){k(this).nextAll().find("."+L).each(function(){k(this).parent("."+x).removeClass("layui-tree-searchShow "+g)}),k(".layui-tree-emptyText")[0]&&k(".layui-tree-emptyText").remove()})},i.prototype.getChecked=function(){var e=this.config,i=[],a=[];this.elem.find(".layui-form-checked").each(function(){i.push(k(this).prev()[0].value)});var r=function(e,n){layui.each(e,function(e,a){layui.each(i,function(e,i){if(a.id==i){i=k.extend({},a);return delete i.children,n.push(i),a.children&&(i.children=[],r(a.children,i.children)),!0}})})};return r(k.extend({},e.data),a),a},i.prototype.setChecked=function(r){this.config;this.elem.find("."+x).each(function(e,i){var a=k(this).data("id"),n=k(i).children("."+L).find('input[name="layuiTreeCheck"]'),i=n.next();if("number"==typeof r){if(a==r)return n[0].checked||i.click(),!1}else-1!=k.inArray(a,r)&&(n[0].checked||i.click())})},t.that={},t.config={},r.reload=function(e,i){e=t.that[e];return e.reload(i),t.call(e)},r.getChecked=function(e){return t.that[e].getChecked()},r.setChecked=function(e,i){return t.that[e].setChecked(i)},r.render=function(e){e=new i(e);return t.call(e)},e(n,r)});layui.define(["laytpl","form"],function(e){"use strict";function a(e){return['<div class="layui-transfer-box" data-index="'+(e=e||{}).index+'">','<div class="layui-transfer-header">','<input type="checkbox" name="'+e.checkAllName+'" lay-filter="layTransferCheckbox" lay-type="all" lay-skin="primary" title="{{ d.data.title['+e.index+"] || 'list"+(e.index+1)+"' }}\">","</div>","{{# if(d.data.showSearch){ }}",'<div class="layui-transfer-search">','<i class="layui-icon layui-icon-search"></i>','<input type="input" class="layui-input" placeholder="关键词搜索">',"</div>","{{# } }}",'<ul class="layui-transfer-data"></ul>',"</div>"].join("")}function t(e){var a=this;a.index=++l.index,a.config=s.extend({},a.config,l.config,e),a.render()}var s=layui.$,i=layui.laytpl,n=layui.form,r="transfer",l={config:{},index:layui[r]?layui[r].index+1e4:0,set:function(e){var a=this;return a.config=s.extend({},a.config,e),a},on:function(e,a){return layui.onevent.call(this,r,e,a)}},c=function(){var a=this,e=a.config,t=e.id||a.index;return c.that[t]=a,{config:c.config[t]=e,reload:function(e){a.reload.call(a,e)},getData:function(){return a.getData.call(a)}}},d="layui-hide",h="layui-btn-disabled",o="layui-none",u="layui-transfer-box",f="layui-transfer-header",y="layui-transfer-search",p="layui-transfer-data",v=['<div class="layui-transfer layui-form layui-border-box" lay-filter="LAY-transfer-{{ d.index }}">',a({index:0,checkAllName:"layTransferLeftCheckAll"}),'<div class="layui-transfer-active">','<button type="button" class="layui-btn layui-btn-sm layui-btn-primary layui-btn-disabled" data-index="0">','<i class="fa fa-arrow-right"></i>',"</button>",'<button type="button" class="layui-btn layui-btn-sm layui-btn-primary layui-btn-disabled" data-index="1">','<i class="fa fa-arrow-left"></i>',"</button>","</div>",a({index:1,checkAllName:"layTransferRightCheckAll"}),"</div>"].join("");t.prototype.config={title:["列表一","列表二"],searchKey:"",width:200,height:360,data:[],value:[],showSearch:!1,id:"",text:{none:"无数据",searchNone:"无匹配数据"}},t.prototype.reload=function(e){var t=this;layui.each(e,function(e,a){a.constructor===Array&&delete t.config[e]}),t.config=s.extend(!0,{},t.config,e),t.render()},t.prototype.render=function(){var e=this,a=e.config,t=e.elem=s(i(v).render({data:a,index:e.index})),n=a.elem=s(a.elem);n[0]&&(a.data=a.data||[],a.value=a.value||[],e.key=a.id||e.index,n.html(e.elem),e.layBox=e.elem.find("."+u),e.layHeader=e.elem.find("."+f),e.laySearch=e.elem.find("."+y),e.layData=t.find("."+p),e.layBtn=t.find(".layui-transfer-active .layui-btn"),e.layBox.css({width:a.width,height:a.height}),e.layData.css({height:a.height-e.layHeader.outerHeight()-e.laySearch.outerHeight()-2}),e.renderData(),e.events())},t.prototype.renderData=function(){var e=this,n=(e.config,[{checkName:"layTransferLeftCheck",views:[]},{checkName:"layTransferRightCheck",views:[]}]);e.parseData(function(e){var a=e.selected?1:0,t=["<li>",'<input type="checkbox" name="'+n[a].checkName+'" lay-skin="primary" lay-filter="layTransferCheckbox" title="'+e.title+'"'+(e.disabled?" disabled":"")+(e.checked?" checked":"")+' value="'+e.value+'">',"</li>"].join("");n[a].views.push(t),delete e.selected}),e.layData.eq(0).html(n[0].views.join("")),e.layData.eq(1).html(n[1].views.join("")),e.renderCheckBtn()},t.prototype.renderForm=function(e){n.render(e,"LAY-transfer-"+this.index)},t.prototype.renderCheckBtn=function(l){var c=this,o=c.config;l=l||{},c.layBox.each(function(e){var a=s(this),t=a.find("."+p),n=a.find("."+f).find('input[type="checkbox"]'),a=t.find('input[type="checkbox"]'),i=0,r=!1;a.each(function(){var e=s(this).data("hide");(this.checked||this.disabled||e)&&i++,this.checked&&!e&&(r=!0)}),n.prop("checked",r&&i===a.length),c.layBtn.eq(e)[r?"removeClass":"addClass"](h),l.stopNone||(e=t.children("li:not(."+d+")").length,c.noneView(t,e?"":o.text.none))}),c.renderForm("checkbox")},t.prototype.noneView=function(e,a){var t=s('<p class="layui-none">'+(a||"")+"</p>");e.find("."+o)[0]&&e.find("."+o).remove(),a.replace(/\s/g,"")&&e.append(t)},t.prototype.setValue=function(){var e=this.config,a=[];return this.layBox.eq(1).find("."+p+' input[type="checkbox"]').each(function(){s(this).data("hide")||a.push(this.value)}),e.value=a,this},t.prototype.parseData=function(a){var n=this.config,i=[];return layui.each(n.data,function(e,t){t=("function"==typeof n.parseData?n.parseData(t):t)||t,i.push(t=s.extend({},t)),layui.each(n.value,function(e,a){a==t.value&&(t.selected=!0)}),a&&a(t)}),n.data=i,this},t.prototype.getData=function(e){var a=this.config,n=[];return layui.each(e||a.value,function(e,t){layui.each(a.data,function(e,a){delete a.selected,t==a.value&&n.push(a)})}),n},t.prototype.events=function(){var r=this,l=r.config;r.elem.on("click",'input[lay-filter="layTransferCheckbox"]+',function(){var e=s(this).prev(),a=e[0].checked,t=e.parents("."+u).eq(0).find("."+p);e[0].disabled||("all"===e.attr("lay-type")&&t.find('input[type="checkbox"]').each(function(){this.disabled||(this.checked=a)}),r.renderCheckBtn({stopNone:!0}))}),r.layBtn.on("click",function(){var e=s(this),a=e.data("index"),n=r.layBox.eq(a),i=[];e.hasClass(h)||(r.layBox.eq(a).each(function(e){s(this).find("."+p).children("li").each(function(){var e=s(this),a=e.find('input[type="checkbox"]'),t=a.data("hide");a[0].checked&&!t&&(a[0].checked=!1,n.siblings("."+u).find("."+p).append(e.clone()),e.remove(),i.push(a[0].value)),r.setValue()})}),r.renderCheckBtn(),""===(e=n.siblings("."+u).find("."+y+" input")).val()||e.trigger("keyup"),l.onchange&&l.onchange(r.getData(i),a))}),r.laySearch.find("input").on("keyup",function(){var e=s(this),n=this.value,a=s(this).parents("."+y).eq(0).siblings("."+p),t=a.children("li");0==e.parents(".layui-transfer-box").data("index")&&-1<l.showSearch.indexOf("http")?setTimeout(function(){s.ajax({url:l.showSearch,headers:{"X-CSRF-TOKEN":s('meta[name="csrf-token"]').attr("content"),Accept:"application/json","X-Requested-With":"XMLHttpRequest"},data:{key:n},dataType:"json",success:function(e){r.reload({data:e.data,searchKey:n})}})},500):(t.each(function(){var e=s(this),a=e.find('input[type="checkbox"]'),t=-1!==a[0].title.indexOf(n);e[t?"removeClass":"addClass"](d),a.data("hide",!t)}),t=t.length===a.children("li."+d).length,r.noneView(a,t?l.text.searchNone:"")),r.renderCheckBtn()})},c.that={},c.config={},l.reload=function(e,a){e=c.that[e];return e.reload(a),c.call(e)},l.getData=function(e){return c.that[e].getData()},l.render=function(e){e=new t(e);return c.call(e)},e(r,l)});layui.define("jquery",function(i){function d(i){t(i.target)&&t(i.target.parentElement)&&t(i.target.parentElement.parentElement)&&a.hide()}var l=layui.$,n=layui.device(),r=(n.android||n.ios,"click"),a=this,n=function(){this.inst=null,this.currReElem=null},t=function(i){return i&&-1==i.className.indexOf("layui-btn-dropdown")&&-1==i.className.indexOf("layui-dropdown-menu")};n.prototype.hide=function(){a&&a.inst&&a.inst.is(":visible")&&(a.inst.css("display","none"),l("body").off(r,d))},n.prototype.render=function(){a=this,l(".layui-btn-dropdown").each(function(i,n){var o=l(n);o.data("id","dropdown-"+i),o[r](function(){var i,n,t,e;a.inst&&a.currReElem.data("id")==o.data("id")&&(a.currReElem.data("id")!=o.data("id")||a.inst.is(":visible"))||(a.hide(),i=o.find(".layui-dropdown-menu"),n=o.offset().left-l(window).scrollLeft(),e=o.offset().top+o.height()-l(window).scrollTop()+8,t=n+o.width(),e={display:"block",position:"fixed",top:e+"px",left:n+"px"},n+(n=i.width())>l(window).width()&&l.extend(!0,e,{left:t-n+"px"}),i.css(e).on("click","li",function(){i.css("display","none")}),a.inst=i,a.currReElem=o,l("body").on(r,d))})})};var e=new n;e.render(),l(window).scroll(function(){e.hide()}),i("dropdown",e)});layui.define("jquery",function(e){"use strict";function i(e){var i=this;i.config=a.extend({},i.config,n.config,e),i.render()}var a=layui.$,n=(layui.hint(),layui.device(),{config:{},set:function(e){var i=this;return i.config=a.extend({},i.config,e),i},on:function(e,i){return layui.onevent.call(this,d,e,i)}}),d="carousel",r="layui-this",s="layui-carousel-left",u="layui-carousel-right",c="layui-carousel-prev",m="layui-carousel-next",t="layui-carousel-arrow",l="layui-carousel-ind";i.prototype.config={width:"600px",height:"280px",full:!1,arrow:"hover",indicator:"inside",autoplay:!0,interval:3e3,anim:"",trigger:"click",index:0},i.prototype.render=function(){var e=this,i=e.config;i.elem=a(i.elem),i.elem[0]&&(e.elemItem=i.elem.find(">*[carousel-item]>*"),i.index<0&&(i.index=0),i.index>=e.elemItem.length&&(i.index=e.elemItem.length-1),i.interval<800&&(i.interval=800),i.full?i.elem.css({position:"fixed",width:"100%",height:"100%",zIndex:9999}):i.elem.css({width:i.width,height:i.height}),i.elem.attr("lay-anim",i.anim),e.elemItem.eq(i.index).addClass(r),e.elemItem.length<=1||(e.indicator(),e.arrow(),e.autoplay(),e.events()))},i.prototype.reload=function(e){var i=this;clearInterval(i.timer),i.config=a.extend({},i.config,e),i.render()},i.prototype.prevIndex=function(){var e=this.config.index-1;return e=e<0?this.elemItem.length-1:e},i.prototype.nextIndex=function(){var e=this.config.index+1;return e=e>=this.elemItem.length?0:e},i.prototype.addIndex=function(e){var i=this.config;e=e||1,i.index=i.index+e,i.index>=this.elemItem.length&&(i.index=0)},i.prototype.subIndex=function(e){var i=this.config;e=e||1,i.index=i.index-e,i.index<0&&(i.index=this.elemItem.length-1)},i.prototype.autoplay=function(){var e=this,i=e.config;i.autoplay&&(e.timer=setInterval(function(){e.slide()},i.interval))},i.prototype.arrow=function(){var i=this,e=i.config,n=a(['<button class="fa '+t+'" lay-type="sub">'+("updown"===e.anim?"&#xe619;":"&#xe603;")+"</button>",'<button class="fa '+t+'" lay-type="add">'+("updown"===e.anim?"&#xe61a;":"&#xe602;")+"</button>"].join(""));e.elem.attr("lay-arrow",e.arrow),e.elem.find("."+t)[0]&&e.elem.find("."+t).remove(),e.elem.append(n),n.on("click",function(){var e=a(this).attr("lay-type");i.slide(e)})},i.prototype.indicator=function(){var i,n=this,t=n.config,e=n.elemInd=a(['<div class="'+l+'"><ul>',(i=[],layui.each(n.elemItem,function(e){i.push("<li"+(t.index===e?' class="layui-this"':"")+"></li>")}),i.join("")),"</ul></div>"].join(""));t.elem.attr("lay-indicator",t.indicator),t.elem.find("."+l)[0]&&t.elem.find("."+l).remove(),t.elem.append(e),"updown"===t.anim&&e.css("margin-top",-e.height()/2),e.find("li").on("hover"===t.trigger?"mouseover":t.trigger,function(){var e=a(this).index();e>t.index?n.slide("add",e-t.index):e<t.index&&n.slide("sub",t.index-e)})},i.prototype.slide=function(e,i){var n=this,t=n.elemItem,a=n.config,l=a.index,o=a.elem.attr("lay-filter");n.haveSlide||("sub"===e?(n.subIndex(i),t.eq(a.index).addClass(c),setTimeout(function(){t.eq(l).addClass(u),t.eq(a.index).addClass(u)},50)):(n.addIndex(i),t.eq(a.index).addClass(m),setTimeout(function(){t.eq(l).addClass(s),t.eq(a.index).addClass(s)},50)),setTimeout(function(){t.removeClass(r+" "+c+" "+m+" "+s+" "+u),t.eq(a.index).addClass(r),n.haveSlide=!1},300),n.elemInd.find("li").eq(a.index).addClass(r).siblings().removeClass(r),n.haveSlide=!0,layui.event.call(this,d,"change("+o+")",{index:a.index,prevIndex:l,item:t.eq(a.index)}))},i.prototype.events=function(){var e=this,i=e.config;i.elem.data("haveEvents")||(i.elem.on("mouseenter",function(){clearInterval(e.timer)}).on("mouseleave",function(){e.autoplay()}),i.elem.data("haveEvents",!0))},n.render=function(e){return new i(e)},e(d,n)});layui.define("jquery",function(e){"use strict";function a(e){var a=this;a.index=++l.index,a.config=r.extend({},a.config,l.config,e),a.render()}var r=layui.jquery,l={config:{},index:layui.rate?layui.rate.index+1e4:0,set:function(e){var a=this;return a.config=r.extend({},a.config,e),a},on:function(e,a){return layui.onevent.call(this,t,e,a)}},t="rate",f="fa-star-o",u="fa-star",s="fa-star-half",o="fa-rate-solid fa-rate-half",c="fa-rate fa-rate-half";a.prototype.config={length:5,text:!1,readonly:!1,half:!1,value:0,theme:""},a.prototype.render=function(){var e=this,a=e.config,l=a.theme?'style="color: '+a.theme+';"':"";a.elem=r(a.elem),parseInt(a.value)!==a.value&&(a.half||(a.value=Math.ceil(a.value)-a.value<.5?Math.ceil(a.value):Math.floor(a.value)));for(var t='<ul class="layui-rate" '+(a.readonly?"readonly":"")+">",n=1;n<=a.length;n++){var i='<li class="layui-inline"><i class="fa '+(n>Math.floor(a.value)?f:u)+'" '+l+"></i></li>";a.half&&parseInt(a.value)!==a.value&&n==Math.ceil(a.value)?t=t+'<li><i class="fa fa-rate-half" '+l+"></i></li>":t+=i}t+="</ul>"+(a.text?'<span class="layui-inline">'+a.value+"星":"")+"</span>";var s=a.elem,o=s.next(".layui-rate");o[0]&&o.remove(),e.elemTemp=r(t),a.span=e.elemTemp.next("span"),a.setText&&a.setText(a.value),s.html(e.elemTemp),s.addClass("layui-inline"),a.readonly||e.action()},a.prototype.setvalue=function(e){this.config.value=e,this.render()},a.prototype.action=function(){var t=this.config,n=this.elemTemp,i=n.find("i").width();n.children("li").each(function(e){var a=e+1,l=r(this);l.on("click",function(e){t.value=a,t.half&&e.pageX-r(this).offset().left<=i/2&&(t.value=t.value-.5),t.text&&n.next("span").text(t.value+"星"),t.choose&&t.choose(t.value),t.setText&&t.setText(t.value)}),l.on("mousemove",function(e){n.find("i").each(function(){r(this).addClass(f).removeClass(o)}),n.find("i:lt("+a+")").each(function(){r(this).addClass(u).removeClass(c).removeClass(f)}),t.half&&e.pageX-r(this).offset().left<=i/2&&l.children("i").addClass(s).removeClass(u)}),l.on("mouseleave",function(){n.find("i").each(function(){r(this).addClass(f).removeClass(o)}),n.find("i:lt("+Math.floor(t.value)+")").each(function(){r(this).addClass(u).removeClass(c).removeClass(f)}),t.half&&parseInt(t.value)!==t.value&&n.children("li:eq("+Math.floor(t.value)+")").children("i").addClass(s).removeClass("fa-rate-solid fa-rate")})})},a.prototype.events=function(){this.config},l.render=function(e){e=new a(e);return function(){var a=this;return{setvalue:function(e){a.setvalue.call(a,e)},config:a.config}}.call(e)},e(t,l)});layui.define("jquery",function(l){"use strict";function e(l){}var h=layui.$;e.prototype.load=function(l){var t,i,n,e=this,o=0,r=h((l=l||{}).elem);if(r[0]){var a=h(l.scrollElem||document),c=l.mb||50,m=!("isAuto"in l)||l.isAuto,f=l.end||"没有更多了",s=l.scrollElem&&l.scrollElem!==document,u="<cite>加载更多</cite>",y=h('<div class="layui-flow-more"><a href="javascript:;">'+u+"</a></div>");r.find(".layui-flow-more")[0]||r.append(y);var d,p=function(l,e){l=h(l),y.before(l),(e=0==e||null)?y.html(f):y.find("a").html(u),i=e,t=null,d&&d()},v=function(){t=!0,y.find("a").html('<i class="layui-anim layui-anim-rotate layui-anim-loop fa ">&#xe63e;</i>'),"function"==typeof l.done&&l.done(++o,p)};return(v(),y.find("a").on("click",function(){h(this);i||t||v()}),l.isLazyimg&&(d=e.lazyimg({elem:l.elem+" img",scrollElem:l.scrollElem})),m)?(a.on("scroll",function(){var e=h(this),o=e.scrollTop();n&&clearTimeout(n),i||(n=setTimeout(function(){var l=(s?e:h(window)).height();(s?e.prop("scrollHeight"):document.documentElement.scrollHeight)-o-l<=c&&(t||v())},100))}),e):e}},e.prototype.lazyimg=function(l){function c(e,l){var o,t=s.scrollTop(),i=t+l,l=y?e.offset().top-s.offset().top+t:e.offset().top;t<=l&&l<=i&&(e.attr("src")||(o=e.attr("lay-src"),layui.img(o,function(){var l=m.lazyimg.elem.eq(f);e.attr("src",o).removeAttr("lay-src"),l[0]&&n(l),f++})))}var e,m=this,f=0,s=h((l=l||{}).scrollElem||document),u=l.elem||"img",y=l.scrollElem&&l.scrollElem!==document,n=function(l,e){var o=(y?e||s:h(window)).height(),t=s.scrollTop(),i=t+o;if(m.lazyimg.elem=h(u),l)c(l,o);else for(var n=0;n<m.lazyimg.elem.length;n++){var r=m.lazyimg.elem.eq(n),a=y?r.offset().top-s.offset().top+t:r.offset().top;if(c(r,o),f=n,i<a)break}};return n(),s.on("scroll",function(){var l=h(this);e&&clearTimeout(e),e=setTimeout(function(){n(null,l)},50)}),n},l("flow",new e)});layui.define(["layer","element"],function(e){var a="lumina_app",n="admin",o=(layui.cache.base,layui.jquery),s=layui.element,l=layui.layer,i=(o(window),o("body")),d=layui.device(),c=o("#"+a),u=o("#xapp_body"),f="layui-show",t="layui-this",m="#lumina_tabs",h="lay_lumina_tabs",b="fa-outdent",v="fa-indent",p="lumina-side-shrink",g={version:"0.0.1",escape:function(e){return String(e||"").replace(/&(?!#?[a-zA-Z0-9]+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},on:function(e,a){return layui.onevent.call(this,n,e,a)},screen:function(){var e=i.width();return 1200<e?3:992<e?2:768<e?1:0},sideFlexible:function(e){var a=c,i=o("#xapp_flexible"),t=(g.screen(),d.mobile?p+"-m":p);"spread"===e?(a.removeClass(t),i.removeClass(v).addClass(b)):(a.addClass(t),i.removeClass(b).addClass(v)),layui.event.call(this,n,"side({*})",{status:e})},tabsPage:{},tabsBody:function(e){return u.find(".lumina-tabsbody-item").eq(e||0)},tabsBodyChange:function(e,a){a=a||{},g.tabsBody(e).addClass(f).siblings().removeClass(f),x.rollPage("auto",e),layui.event.call(this,n,"tabsPage({*})",{url:a.url,text:a.text})},resize:function(e){var a=layui.router().path.join("-");g.resizeFn[a]&&(r.off("resize",g.resizeFn[a]),delete g.resizeFn[a]),"off"!==e&&(e(),g.resizeFn[a]=e,r.on("resize",g.resizeFn[a]))},resizeFn:{},runResize:function(){var e=layui.router().path.join("-");g.resizeFn[e]&&g.resizeFn[e]()},delResize:function(){this.resize("off")},fullScreen:function(){var e=document.documentElement,a=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;void 0!==a&&a&&a.call(e)},exitScreen:function(){document.documentElement,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},x=g.events={flexible:function(e){var a=c.hasClass(p)||c.hasClass(p+"-m");g.sideFlexible(a?"spread":null)},message:function(e){e.find(".layui-badge-dot").remove()},fullscreen:function(e){var a="fa-screen-full",i="fa-screen-restore",e=e.children("i");e.hasClass(a)?(g.fullScreen(),e.addClass(i).removeClass(a)):(g.exitScreen(),e.addClass(a).removeClass(i))},back:function(){history.back()},setTheme:function(e){var a=e.data("index");e.siblings(".layui-this").data("index"),e.hasClass(y)||(e.addClass(y).siblings(".layui-this").removeClass(y),g.initTheme(a))},rollPage:function(e,t){var i,n=o("#lumina_tabs"),s=n.children("li"),l=(n.prop("scrollWidth"),n.outerWidth()),r=parseFloat(n.css("left"));"left"===e?!r&&r<=0||(i=-r-l,s.each(function(e,a){a=o(a).position().left;if(i<=a)return n.css("left",-a),!1})):"auto"===e?function(){var e,i,a=s.eq(t);if(a[0]){if((e=a.position().left)<-r)return n.css("left",-e);e+a.outerWidth()>=l-r&&(i=e+a.outerWidth()-(l-r),s.each(function(e,a){a=o(a).position().left;if(0<a+r&&i<a-r)return n.css("left",-a),!1}))}}():s.each(function(e,a){var i=o(a),a=i.position().left;if(a+i.outerWidth()>=l-r)return n.css("left",-a),!1})},leftPage:function(){x.rollPage("left")},rightPage:function(){x.rollPage()},refreshThisTab:function(){var e=o(m+">li").length;g.tabsPage.index>=e&&(g.tabsPage.index=e-1),g.tabsBody(g.tabsPage.index).find(".lumina-iframe")[0].contentWindow.location.reload(!0)},openThisTab:function(){var e=o(this).data("idx")||g.tabsPage.index,e=o(m+">li").eq(e).attr("lay-attr");window.parent.open(e)},closeThisTabs:function(){var e=o(this).data("idx")||g.tabsPage.index;e&&o(m+">li").eq(e).find(".fa-close").trigger("click")},closeOtherTabs:function(e){var i=o(this).data("idx")||g.tabsPage.index;"all"===e?o(m+">li").each(function(e,a){e&&o(a).find(".fa-close").trigger("click")}):o(m+">li").each(function(e,a){e!=i&&e&&o(a).find(".fa-close").trigger("click")})},closeAllTabs:function(){x.closeOtherTabs("all")},shade:function(){g.sideFlexible()}};g.on("tabsPage(setMenustatus)",function(e){function s(e){return{list:e.children(".layui-nav-child"),a:e.children("*[lay-href]")}}var l=e.url,a=o("#xb-system-side-menu"),r="layui-nav-itemed";a.find("."+t).removeClass(t),g.screen()<2&&g.sideFlexible(),a.children("li").each(function(e,a){var i=o(a),t=s(i),n=t.list.children("dd"),a=l===t.a.attr("lay-href");if(n.each(function(e,a){var i=o(a),t=s(i),n=t.list.children("dd"),a=l===t.a.attr("lay-href");if(n.each(function(e,a){var i=o(a),a=s(i);if(l===a.a.attr("lay-href")){a=a.list[0]?r:y;return i.addClass(a).siblings().removeClass(a),!1}}),a){t.list[0];return i.addClass(f).siblings().removeClass(f),!1}}),a){t.list[0];return i.addClass(f).siblings().removeClass(f),!1}})}),s.on("tab("+h+")",function(e){g.tabsPage.index=e.index}),s.on("nav(lumina-system-side-menu)",function(e){e.siblings(".layui-nav-child")[0]&&c.hasClass(p)&&(g.sideFlexible("spread"),l.close(e.data("index"))),g.tabsPage.type="nav"}),s.on("nav(lumina-pagetabs-nav)",function(e){e=e.parent();e.removeClass(t),e.parent().removeClass("layui-nav-itemed")}),s.on("tabDelete("+h+")",function(e){var a=o("#xapp_tabsheader>li .layui-this").index();e.index&&g.tabsBody(e.index).remove(),g.tabsBodyChange(a),g.delResize()}),i.on("click",m+">li",function(){var e=o(this),a=(e.attr("lay-id"),e.attr("lay-attr")),e=e.index();g.tabsPage.type="tab",g.tabsPage.index=e,g.tabsBodyChange(e,{url:a})}),i.on("click","*[lay-href]",function(){var e=o(this),a=e.attr("lay-href"),i=e.attr("lay-target")||"tab",t=e.attr("lay-text");layui.router(),g.tabsPage.elem=e,"modal"==i?top.layui.admin.openModal(a,t||e.text()):top.layui.admin.openTab(a,t||e.text())}),i.on("click","*[lumina-event]",function(){var e=o(this),a=e.attr("lumina-event");x[a]&&x[a].call(this,e)}),i.on("mouseenter","*[lay-tips]",function(){var e,i,a,t=o(this);t.parent().hasClass("layui-nav-item")&&!c.hasClass(p)||(e=t.attr("lay-tips"),i=t.attr("lay-offset"),a=t.attr("lay-direction"),a=l.tips(e,this,{tips:a||1,time:-1,success:function(e,a){i&&e.css("margin-left",i+"px")}}),t.data("index",a))}).on("mouseleave","*[lay-tips]",function(){l.close(o(this).data("index"))});var C=layui.data.resizeSystem=function(){l.closeAll("tips"),C.lock||setTimeout(function(){g.sideFlexible(g.screen()<2?"":"spread"),delete C.lock},100),C.lock=!0};g.openTab=function(e,a){var i,t=o(m).find("li"),n=e.replace(location.origin,"");t.each(function(e){o(this).attr("lay-id")===n&&(i=!0,g.tabsPage.index=e)}),(a=a||"新标签页")?i||(u.append(['<div class="lumina-tabsbody-item layui-show">','<iframe src="'+e+'" onload="$(this).removeClass(\'layui-line-load\')" frameborder="0" class="lumina-iframe layui-line-load"></iframe>',"</div>"].join("")),g.tabsPage.index=t.length,s.tabAdd(h,{title:"<span>"+a+"</span>",id:n,attr:e,context:!0})):g.tabsBody(g.tabsPage.index).find(".lumina-iframe")[0].contentWindow.location.href=e,s.tabChange(h,n),g.tabsBodyChange(g.tabsPage.index,{url:e,text:a})},g.openModal=function(e,a,i){var t=parent===self?self:parent,n=-1<e.search(/^((https|http)?:\/\/)[^\s]+/)?2:1;return t.layer.open(o.extend({type:n,id:"lumina_drawer_right",anim:-1,title:a,closeBtn:1,offset:"r",shade:.1,content:e,skin:"layui-anim layui-anim-rl layui-layer-adminRight",area:"800px"},i))};var F=['<div id="g-alert"><div class="alert-bd" style="animation-delay: 1s;top:12px;">','<div class="bd shadow border rounded-lg">','<i class="fa fa-spinner fa-pulse mr-1"></i>',"<span>加载中...</span></div></div></div></div>"].join("");g.load={show:function(){o("body").append(F)},hide:function(){o("#g-alert").remove()}},i.on("click","*[lay-ajax-get]",function(e){e.preventDefault();var a=o(this),i="disabled",e=a.attr("href");return o(this).hasClass(i)||(a.addClass(i).append('<i class="fa fa-spinner fa-spin ml-1"></i>'),g.request.get(e,{},function(e){e.msg&&l.msg(e.msg),e.data.redirect&&setTimeout(function(){window.location.href=e.data.redirect},1500),e.data.refresh&&setTimeout(function(){window.location.reload()},1500),a.find("i").remove(),a.removeClass(i)})),!1}),i.on("resize",layui.data.resizeSystem),e("admin",g)});layui.define(["admin","laytpl","laypage","form","dropdown","util"],function(e){"use strict";function i(e){return(e=r.config[e])||f.error("The ID option was not found in the table instance"),e||null}function t(e){return['<table cellspacing="0" cellpadding="0" border="0" class="layui-table uppercase" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<thead>","{{# layui.each(d.data.cols, function(i1, item1){ }}","<tr>","{{# layui.each(item1, function(i2, item2){ }}",'{{# if(item2.fixed && item2.fixed !== "right"){ left = true; } }}','{{# if(item2.fixed === "right"){ right = true; } }}',(e=e||{}).fixed&&"right"!==e.fixed?'{{# if(item2.fixed && item2.fixed !== "right"){ }}':"right"===e.fixed?'{{# if(item2.fixed === "right"){ }}':"","{{# var isSort = !(item2.colGroup) && item2.sort; }}",'<th data-field="{{ item2.field||i2 }}" data-key="{{d.index}}-{{i1}}-{{i2}}" {{# if( item2.parentKey){ }}data-parentkey="{{ item2.parentKey }}"{{# } }} {{# if(item2.minWidth){ }}data-minwidth="{{item2.minWidth}}"{{# } }} {{#if(item2.colspan){}} colspan="{{item2.colspan}}"{{#} if(item2.rowspan){}} rowspan="{{item2.rowspan}}"{{#}}} {{# if(item2.unresize || item2.colGroup){ }}data-unresize="true"{{# } }} class="{{# if(item2.hide){ }}layui-hide{{# } }}{{# if(isSort){ }} layui-unselect{{# } }}{{# if(!item2.field){ }} layui-table-col-special{{# } }}">','<div class="layui-table-cell laytable-cell-',"{{# if(item2.colGroup){ }}","group","{{# } else { }}","{{d.index}}-{{i1}}-{{i2}}",'{{# if(item2.type !== "normal"){ }}'," laytable-cell-{{ item2.type }}","{{# } }}","{{# } }}",'" {{#if(item2.align){}}align="{{item2.align}}"{{#}}}>','{{# if(item2.type === "checkbox"){ }}','<input type="checkbox" name="layTableCheckbox" lay-skin="primary" lay-filter="layTableAllChoose" {{# if(item2[d.data.checkName]){ }}checked{{# }; }}>',"{{# } else { }}",'<span>{{item2.title||""}}</span>',"{{# if(isSort){ }}",'<span class="layui-table-sort layui-inline"><i class="layui-edge fa-sort-asc" title="升序"></i><i class="layui-edge fa-sort-desc" title="降序"></i></span>',"{{# } }}","{{# } }}","</div>","</th>",e.fixed?"{{# }; }}":"","{{# }); }}","</tr>","{{# }); }}","</thead>","</table>"].join("")}function a(e){var t=this;F="",t.index=++k.index,e.treeMode&&(e.tree=g.extend({},t.config.tree,e.tree),e=g.extend({page:!1},e)),t.config=g.extend({},t.config,k.config,e),t.render()}var g=layui.$,b=layui.laytpl,o=layui.laypage,h=layui.layer,y=layui.form,d=layui.util,s=layui.dropdown,f=layui.hint(),p=layui.admin,m=layui.device(),l=!1,v=null,x=null,k={config:{checkName:"LAY_CHECKED",indexName:"LAY_TABLE_INDEX"},cache:{},index:layui.table?layui.table.index+1e4:0,set:function(e){var t=this;return t.config=g.extend({},t.config,e),t},on:function(e,t){return layui.onevent.call(this,w,e,t)}},r=function(){var t=this,e=t.config,a=e.id||e.index;return a&&(r.that[a]=t,r.config[a]=e),{reload:function(e){t.reload.call(t,e)},setColsWidth:function(){t.setColsWidth.call(t)},resize:function(){t.resize.call(t)},config:e}},w="table",C="layui-hide",c="layui-none",n="layui-table-view",u=".layui-table-header",T=".layui-table-body",_=".layui-table-sort",S="layui-table-edit",A="layui-table-hover",L=['<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>',"<tbody></tbody>","</table>"].join(""),W=['<div class="layui-form layui-border-box {{d.VIEW_CLASS}}" lay-filter="LAY-table-{{d.index}}" lay-id="{{ d.data.id }}" style="{{# if(d.data.width){ }}width:{{d.data.width}}px;{{# } }} {{# if(d.data.height){ }}height:{{d.data.height}}px;{{# } }}">',"{{# if(d.data.toolbar){ }}",'<div class="layui-table-tool">','<div class="layui-table-tool-temp"></div>','<div class="layui-table-tool-self"></div>',"</div>","{{# } }}",'<div class="layui-table-box">',"{{# if(d.data.loading){ }}",'<div class="layui-table-init" style="background-color: #fff;">','<i class="fa fa-spin fa-spinner"></i>',"</div>","{{# } }}","{{# var left, right; }}",'<div class="layui-table-header">',t(),"</div>",'<div class="layui-table-body layui-table-main">',L,"</div>","{{# if(left){ }}",'<div class="layui-table-fixed layui-table-fixed-l">','<div class="layui-table-header">',t({fixed:!0}),"</div>",'<div class="layui-table-body">',L,"</div>","</div>","{{# }; }}","{{# if(right){ }}",'<div class="layui-table-fixed layui-table-fixed-r">','<div class="layui-table-header">',t({fixed:"right"}),'<div class="layui-table-mend"></div>',"</div>",'<div class="layui-table-body">',L,"</div>","</div>","{{# }; }}","</div>","{{# if(d.data.totalRow){ }}",'<div class="layui-table-total">','<table cellspacing="0" cellpadding="0" border="0" class="layui-table" ','{{# if(d.data.skin){ }}lay-skin="{{d.data.skin}}"{{# } }} {{# if(d.data.size){ }}lay-size="{{d.data.size}}"{{# } }} {{# if(d.data.even){ }}lay-even{{# } }}>','<tbody><tr><td><div class="layui-table-cell" style="visibility: hidden;">Total</div></td></tr></tbody>',"</table>","</div>","{{# } }}","{{# if(d.data.page){ }}",'<div class="layui-table-page">','<div id="layui-table-page{{d.index}}"></div>',"</div>","{{# } }}","<style>","{{# layui.each(d.data.cols, function(i1, item1){","layui.each(item1, function(i2, item2){ }}",".laytable-cell-{{d.index}}-{{i1}}-{{i2}}{ ","{{# if(item2.width){ }}","width: {{item2.width}}px;","{{# } }}"," }","{{# });","}); }}","</style>","</div>"].join(""),E=g(window),H=g(document),F="";a.prototype.config={limit:15,loading:!0,cellMinWidth:80,defaultToolbar:["filter","exports"],action:null,autoSort:!1,canSearch:!0,autoShow:null,autoShowWidth:"800px",autoShowWidthMobile:"300px",toolbar:"default",searchFields:null,lineHeight:null,height:"full-110",treeMode:!1,tree:{top_value:0,primary_field:"id",parent_field:"parentid",icon_field:"name",is_checkbox:!0,icon_close:"fa-caret-right",icon_open:"fa-caret-down"},page:!0,hasRefresh:!0,export:{url:null,can:!1,all:!1},text:{none:"无数据"}},a.prototype.render=function(){var e=this,t=e.config;if(t.elem=g(t.elem),t.where=t.where||{},t.id=t.id||t.elem.attr("id")||e.index,t.elem.addClass("loading"),t.request=g.extend({pageName:"page",limitName:"limit"},t.request),t.response=g.extend({statusName:"errcode",statusCode:0,msgName:"msg",dataName:"data",countName:"total"},t.response),"object"==typeof t.page&&(t.limit=t.page.limit||t.limit,t.limits=t.page.limits||t.limits,e.page=t.page.curr=t.page.curr||1,delete t.page.elem,delete t.page.jump),!t.elem[0])return e;t.height&&/^full-\d+$/.test(t.height)&&(e.fullHeightGap=t.height.split("-")[1],t.height=E.height()-e.fullHeightGap),e.setInit();var a=t.elem,i=a.next("."+n),l=e.elem=g(b(W).render({VIEW_CLASS:n,data:t,index:e.index}));t.index=e.index,i[0]&&i.remove(),a.after(l),e.layTool=l.find(".layui-table-tool"),e.layBox=l.find(".layui-table-box"),e.layHeader=l.find(u),e.layMain=l.find(".layui-table-main"),e.layBody=l.find(T),e.layFixed=l.find(".layui-table-fixed"),e.layFixLeft=l.find(".layui-table-fixed-l"),e.layFixRight=l.find(".layui-table-fixed-r"),e.layTotal=l.find(".layui-table-total"),e.layPage=l.find(".layui-table-page"),e.renderToolbar(),e.renderFilter(),e.fullSize(),1<t.cols.length&&(t=e.layFixed.find(u).find("th")).height(e.layHeader.height()-1-parseFloat(t.css("padding-top"))-parseFloat(t.css("padding-bottom"))),e.pullData(e.page),e.events()},a.prototype.initOpts=function(e){var t=this.config;e.checkbox&&(e.type="checkbox"),e.space&&(e.type="space"),e.type||(e.type="normal"),"normal"!==e.type&&(e.unresize=!0,e.width=e.width||{checkbox:48,radio:48,space:15,numbers:40}[e.type]),t.autoShow&&!l&&(l=!0,t.cols[0].push({title:"#",toolbar:"<div><a class='px-1 cursor-pointer' lay-event='show'><i class='fa fa-eye'></i></a></div>",fixed:"right",width:50,downoff:!0}))},a.prototype.setInit=function(e){var i,t=this,o=t.config;if(o.clientWidth=o.width||(i=function(e){var t,a=(e=e||o.elem.parent()).width();try{t="none"===e.css("display")}catch(e){}return!e[0]||a&&!t?a:i(e.parent())})(),"width"===e)return o.clientWidth;layui.each(o.cols,function(n,e){layui.each(e,function(a,i){var l;i?(i.key=n+"-"+a,i.hide=i.hide||!1,(i.colGroup||1<i.colspan)&&(l=0,layui.each(o.cols[n+1],function(e,t){t.HAS_PARENT||1<l&&l==i.colspan||(t.HAS_PARENT=!0,t.parentKey=n+"-"+a,l+=parseInt(1<t.colspan?t.colspan:1))}),i.colGroup=!0),t.initOpts(i)):e.splice(a,1)})})},a.prototype.renderFilter=function(){var e,a,l=this,t=l.config,n=['<div class="layui-inline filterbox pull-right cursor-pointer">','<div class="layui-btn-dropdown" data-toggle="dropdown">','<i class="fa fa-filter" title="筛选"></i>','<ul class="layui-dropdown-menu" data-name="{{ d.name }}">{{ d.actionItems }}</ul>',"</div></div></div>"].join("");v&&(e=l.layTool.find(".layui-table-tool-temp"),a="",g.each(x,function(e,t){a+='<span lay-event="clearFilter" data-name="'+e+'" class="layui-badge-rim mr-2 border-red-600">'+t.label+"："+t.val+'<i class="fa fa-trash text-error ml-1"></i></span>'}),e.append(['<div class="layui-inline filterbox pull-right cursor-pointer">',a,"<div>"].join(""))),t.filters&&(g.each(t.filters,function(e,t){var a=l.layHeader.find("th[data-field="+t.name+"]"),i="";g.each(t.options,function(e,t){i+='<li><a lay-event="'+e+'">'+t+"</a></li>"}),a.find(".layui-table-cell").append(b(n).render({actionItems:i,name:t.name}))}),s.render())},a.prototype.renderToolbar=function(){var e,a,t=this,i=t.config,l={create:{title:"新增",layEvent:"create",icon:"fa-plus"},update:{title:"更新",layEvent:"update",icon:"fa-edit"},delete:{title:"删除",layEvent:"delete",icon:"fa-trash"}},n=['<div class="layui-inline tool px-3 py-1 mr-2" lay-event="LAYTABLE_REFRESH"><i class="fa fa-refresh"></i></div>'],o=t.layTool.find(".layui-table-tool-temp");"default"===i.toolbar?(layui.each(l,function(e,t){n.push('<div class="layui-inline tool px-3 py-1" title="'+t.title+'" lay-event="'+t.layEvent+'"><i class="fa '+t.icon+'"></i></div>')}),o.html(n.join(""))):"object"==typeof i.toolbar?(layui.each(i.toolbar,function(e,t){t=l[t];t&&n.push('<div class="layui-inline tool px-3 py-1" title="'+t.title+'" lay-event="'+t.layEvent+'"><i class="fa '+t.icon+'"></i></div>')}),o.html(n.join(""))):"string"!=typeof i.toolbar||(e=g(i.toolbar).html()||"")&&o.html(b(e).render(i)),i.action&&(d=['<div class="layui-inline tool ml-2 px-3 py-1 layui-btn-dropdown" data-toggle="dropdown">','<i class="fa fa-ellipsis-v px-2"></i>','<ul class="layui-dropdown-menu">{{ d.actionItems }}</ul>',"</div></div>"].join(a=""),g.each(i.action,function(e,t){a+='<li><a lay-event="'+t.event+'">'+t.text+"</a></li>"}),o.append(b(d).render({actionItems:a})),s.render());var d,r={filter:{title:"筛选列",layEvent:"LAYTABLE_COLS",icon:"fa-list-ul"},exports:{title:"导出",layEvent:"LAYTABLE_EXPORT",icon:"fa-download"}},c=[];"object"==typeof i.defaultToolbar&&layui.each(i.defaultToolbar,function(e,t){var a=r[t];a&&("exports"!==t||i.export.can)&&c.push('<div class="layui-inline tool px-3 py-1" title="'+a.title+'" lay-event="'+a.layEvent+'"><i class="fa '+a.icon+'"></i></div>')}),t.layTool.find(".layui-table-tool-self").html(c.join("")),i.canSearch&&(o='<div class="layui-table-tool-search"><form class="layui-form"><input type="text" name="wd" value="'+(i.where.search||"")+'"><button lay-submit lay-filter="*" data-table="'+i.id+'" class="fa fa-search"></button></form></div>',t.layTool.prepend(o),t.layTool.find(".layui-table-tool-temp").css("marginLeft","265px"),i.where.search?(o=(d=t.layTool.find(".layui-table-tool-search input[name=wd]")).val(),d.val("").focus().val(o),t.layTool.find("form").append('<button class="j_cancel fa fa-close mr-6" lay-submit lay-filter="*" data-table="'+i.id+'" data-type="cancel"></button>')):t.layTool.find("form .j_cancel").remove())},a.prototype.setParentCol=function(e,t){var a=this.config,i=this.layHeader.find('th[data-key="'+a.index+"-"+t+'"]'),l=parseInt(i.attr("colspan"))||0;i[0]&&(t=t.split("-"),t=a.cols[t[0]][t[1]],e?l--:l++,i.attr("colspan",l),i[l<1?"addClass":"removeClass"](C),t.colspan=l,t.hide=l<1,(i=i.data("parentkey"))&&this.setParentCol(e,i))},a.prototype.setColsPatch=function(){var a=this,e=a.config;layui.each(e.cols,function(e,t){layui.each(t,function(e,t){t.hide&&a.setParentCol(t.hide,t.parentKey)})})},a.prototype.setColsWidth=function(){var i=this,o=i.config,a=0,d=0,r=0,c=0,s=i.setInit("width");i.eachCols(function(e,t){t.hide||a++});var s=s-("line"===o.skin||"nob"===o.skin?2:a+1)-i.getScrollWidth(i.layMain[0])-1,e=function(n){layui.each(o.cols,function(e,l){layui.each(l,function(e,t){var a=0,i=t.minWidth||o.cellMinWidth;t?t.colGroup||t.hide||(n?r&&r<i&&(d--,a=i):(a=t.width||0,/\d+%$/.test(a)?(a=Math.floor(parseFloat(a)/100*s))<i&&(a=i):a||(t.width=a=0,d++)),t.hide&&(a=0),c+=a):l.splice(e,1)})}),c<s&&d&&(r=(s-c)/d)};e(),e(!0),i.autoColNums=d,i.eachCols(function(e,t){var a=t.minWidth||o.cellMinWidth;t.colGroup||t.hide||(0===t.width?i.getCssRule(o.index+"-"+t.key,function(e){e.style.width=Math.floor(a<=r?r:a)+"px"}):/\d+%$/.test(t.width)&&i.getCssRule(o.index+"-"+t.key,function(e){e.style.width=Math.floor(parseFloat(t.width)/100*s)+"px"}))});var t,l,n=i.layMain.width()-i.getScrollWidth(i.layMain[0])-i.layMain.children("table").outerWidth();i.autoColNums&&-a<=n&&n<=a&&(e=(l=(t=function(e){return!(e=e||i.layHeader.eq(0).find("thead th:last-child")).data("field")&&e.prev()[0]?t(e.prev()):e})()).data("key"),i.getCssRule(e,function(e){var t=e.style.width||l.outerWidth();e.style.width=parseFloat(t)+n+"px",0<i.layMain.height()-i.layMain.prop("clientHeight")&&(e.style.width=parseFloat(e.style.width)-1+"px")})),i.loading(!0)},a.prototype.resize=function(){this.fullSize(),this.setColsWidth(),this.scrollPatch()},a.prototype.reload=function(e){var t=this;t.config.data&&t.config.data.constructor===Array&&delete t.config.data,t.config=g.extend({},t.config,e),t.render()},a.prototype.page=1,a.prototype.pullData=function(t){var e,a,i=this,l=i.config,n=l.request,o=l.response;i.startTime=(new Date).getTime(),l.url?((e={})[n.pageName]=t,e[n.limitName]=l.limit,a=g.extend(e,l.where),l.contentType&&0==l.contentType.indexOf("application/json")&&(a=JSON.stringify(a)),d.request.ajax({type:l.method||"get",url:l.url,contentType:l.contentType,data:a,dataType:"json",headers:l.headers||{},success:function(e){l.treeMode&&(e=i.parseTreeData(e)),(e="function"==typeof l.parseData?l.parseData(e)||e:e)[o.statusName]!=o.statusCode?(i.renderForm(),i.layMain.html('<div class="'+c+'">'+(e[o.msgName]||"返回的数据不符合规范，正确的成功状态码 ("+o.statusName+") 应为："+o.statusCode)+"</div>")):(i.renderData(e,t,e.meta?e.meta[o.countName]:e.data.length),l.time=(new Date).getTime()-i.startTime+" ms"),i.setColsWidth(),i.renderDone(e,t,e[o.countName])},error:function(e,t){i.layMain.html('<div class="'+c+'">数据接口请求异常：'+t+"</div>"),i.renderForm(),i.setColsWidth()}})):l.data&&l.data.constructor===Array&&(e={},a=t*l.limit-l.limit,e[o.dataName]=l.data.concat().splice(a,l.limit),e[o.countName]=l.data.length,i.renderData(e,t,l.data.length),i.setColsWidth(),i.renderDone(e,t,e[o.countName]))},a.prototype.renderDone=function(e,t,a){var i,l=this.config;!l.where.orderBy||0<(i=this.layHeader.find("[data-field="+l.where.orderBy+"]").find(".layui-table-sort")).length&&i.attr("lay-sort",l.where.sortedBy),"function"==typeof l.done&&l.done(e,t,a)},a.prototype.parseTreeData=function(e){var a,i,l,t=this.config,o=jQuery,t=t.tree,d=function(a,i,l,n){return i[l]&&(n.push(i[l]),delete i[l]),o.each(a.data,function(e,t){t[a.parent_field]==l&&n.concat(d(a,i,t[a.primary_field],n))}),n};return t.data=e.data,g.extend({},e,{data:(a=t,i=[],l=[],o.each(a.data,function(e,t){i[t[a.primary_field]]=t,l[t[a.parent_field]]||(l[t[a.parent_field]]=[]),l[t[a.parent_field]][t[a.primary_field]]=t}),a.childs=l,d(a,i,a.top_value,[]))})},a.prototype.eachCols=function(e){return k.eachCols(null,e,this.config.cols),this},a.prototype.renderData=function(e,t,a,i){var y,l=this,f=l.config,n=e[f.response.dataName]||[],p=[],m=[],v=[];if(l.key=f.id||f.index,k.cache[l.key]=n,l.layPage[0==a||0===n.length&&1==t?"addClass":"removeClass"](C),0===n.length)return l.renderForm(),l.layFixed.remove(),l.layMain.find("tbody").html(""),l.layMain.find("."+c).remove(),l.layMain.append('<div class="'+c+'">'+f.text.none+"</div>");layui.each(n,function(o,d){var r,c=[],s=[],u=[],h=o+f.limit*(t-1)+1;0!==d.length&&(r=!!f.treeMode&&!f.tree.childs[d[f.tree.primary_field]],l.eachCols(function(e,a){var t=a.field||e,i=f.index+"-"+a.key,l=f.treeMode&&t==f.tree.icon_field,n=d[t];null==n&&(n=""),a.colGroup||(l&&(e=4*d.level,n=(r?'<span class="ml-'+e+'"></span>':'<i class="ml-'+e+" mr-1 fa "+f.tree.icon_close+'"></i>')+n),i=['<td data-field="'+t+'" data-key="'+i+'" '+(t=[],a.edit&&t.push('data-edit="'+a.edit+'"'),a.align&&t.push('align="'+a.align+'"'),a.templet&&t.push('data-content="'+n+'"'),a.toolbar&&t.push('data-off="true"'),a.event&&t.push('lay-event="'+a.event+'"'),a.style&&t.push('style="'+a.style+'"'),a.minWidth&&t.push('data-minwidth="'+a.minWidth+'"'),a.downoff&&t.push('data-downoff="true"'),l&&t.push("data-down"),t.join(" "))+' class="'+(t=[],a.hide&&t.push(C),a.field||t.push("layui-table-col-special"),t.join(" "))+'"><div '+(f.lineHeight?'style="height: '+f.lineHeight+"px;line-height: "+f.lineHeight+'px;"':"")+' class="'+(l?"cursor-pointer":"")+" layui-table-cell laytable-cell-"+("normal"===a.type?i:i+" laytable-cell-"+a.type)+'">'+function(){var e=g.extend(!0,{LAY_INDEX:h},d),t=k.config.checkName;switch(a.type){case"checkbox":return'<input type="checkbox" name="layTableCheckbox" data-id="'+d.id+'" lay-skin="primary" '+(a[t]?(d[t]=a[t],a[t]?"checked":""):e[t]?"checked":"")+">";case"radio":return e[t]&&(y=o),'<input type="radio" name="layTableRadio_'+f.index+'" '+(e[t]?"checked":"")+' lay-type="layTableRadio">';case"numbers":return h}return a.toolbar?b(g(a.toolbar).html()||"").render(e):a.templet?"function"==typeof a.templet?a.templet(e):b(g(a.templet).html()||String(n)).render(e):n}(),"</div></td>"].join(""),c.push(i),a.fixed&&"right"!==a.fixed&&s.push(i),"right"===a.fixed&&u.push(i))}),f.treeMode?p.push('<tr data-index="'+o+'" data-id="'+d.id+'" data-pid="'+d.parentid+'" data-path="'+d.path+'" '+(d.parentid!=f.tree.top_value?'class="layui-hide"':"")+">"+c.join("")+"</tr>"):p.push('<tr data-index="'+o+'">'+c.join("")+"</tr>"),m.push('<tr data-index="'+o+'">'+s.join("")+"</tr>"),v.push('<tr data-index="'+o+'">'+u.join("")+"</tr>"))}),l.layBody.scrollTop(0),l.layMain.find("."+c).remove(),l.layMain.find("tbody").html(p.join("")),l.layFixLeft.find("tbody").html(m.join("")),l.layFixRight.find("tbody").html(v.join("")),l.renderForm(),"number"==typeof y&&l.setThisRowChecked(y),l.syncCheckAll(),l.haveInit?l.scrollPatch():setTimeout(function(){l.scrollPatch()},50),l.haveInit=!0,h.close(l.tipsIndex),f.HAS_SET_COLS_PATCH||l.setColsPatch(),f.HAS_SET_COLS_PATCH=!0,l.renderTotal(n),f.page&&(f.page=g.extend({elem:"layui-table-page"+f.index,count:a,limit:f.limit,limits:f.limits||[15,50,200,500],groups:3,layout:["prev","page","next","skip","count","limit"],prev:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>',jump:function(e,t){t||(l.page=e.curr,f.limit=e.limit,l.pullData(e.curr))}},f.page),f.page.count=a,o.render(f.page))},a.prototype.renderTotal=function(e){var i,t=this,l=t.config,n={};l.totalRow&&(layui.each(e,function(e,i){0!==i.length&&t.eachCols(function(e,t){var a=t.field||e,e=i[a];t.totalRow&&(n[a]=(n[a]||0)+(parseFloat(e)||0))})}),i=[],t.eachCols(function(e,t){var a=t.field||e,e=['<td data-field="'+a+'" data-key="'+l.index+"-"+t.key+'" '+(e=[],t.align&&e.push('align="'+t.align+'"'),t.style&&e.push('style="'+t.style+'"'),t.minWidth&&e.push('data-minwidth="'+t.minWidth+'"'),e.join(" "))+' class="'+(e=[],t.hide&&e.push(C),t.field||e.push("layui-table-col-special"),e.join(" "))+'">','<div class="layui-table-cell laytable-cell-'+(e=l.index+"-"+t.key,"normal"===t.type?e:e+" laytable-cell-"+t.type)+'">'+(e=t.totalRowText||"",t.totalRow&&parseFloat(n[a]).toFixed(2)||e),"</div></td>"].join("");i.push(e)}),t.layTotal.find("tbody").html("<tr>"+i.join("")+"</tr>"))},a.prototype.getColElem=function(e,t){var a=this.config;return e.eq(0).find(".laytable-cell-"+a.index+"-"+t+":eq(0)")},a.prototype.renderForm=function(e){y.render(e,"LAY-table-"+this.index)},a.prototype.setThisRowChecked=function(e){this.config;var t="layui-table-click";this.layBody.find('tr[data-index="'+e+'"]').addClass(t).siblings("tr").removeClass(t)},a.prototype.sort=function(l,e,t,a){var i,n=this,o={},d=n.config,r=d.elem.attr("lay-filter"),c=k.cache[n.key];"string"==typeof l&&n.layHeader.find("th").each(function(e,t){var a=g(this),i=a.data("field");if(i===l)return l=a,s=i,!1});try{var s=s||l.data("field"),u=l.data("key");if(n.sortKey&&!t&&s===n.sortKey.field&&e===n.sortKey.sort)return;u=n.layHeader.find("th .laytable-cell-"+u).find(_);n.layHeader.find("th").find(_).removeAttr("lay-sort"),u.attr("lay-sort",e||null),n.layFixed.find("th")}catch(e){return f.error("Table modules: Did not match to field")}if(n.sortKey={field:s,sort:e},!d.autoSort)return d=g.extend(d,{where:{orderBy:s,sortedBy:e}}),n.reload(d),!1;"asc"===e?i=layui.sort(c,s):"desc"===e?i=layui.sort(c,s,!0):(i=layui.sort(c,k.config.indexName),delete n.sortKey),o[d.response.dataName]=i||c,n.renderData(o,n.page,n.count,!0),a&&layui.event.call(l,w,"sort("+r+")",{field:s,type:e})},a.prototype.loading=function(e){var t=this;t.config.loading&&(e?(t.layInit&&t.layInit.remove(),delete t.layInit,t.layBox.find(".layui-table-init").remove()):(t.layInit=g(['<div class="layui-table-init">','<i class="fa fa-spinner fa-spin"></i>',"</div>"].join("")),t.layBox.append(t.layInit)))},a.prototype.setCheckData=function(e,t){var a=this.config,i=k.cache[this.key];i[e]&&i[e].constructor!==Array&&(i[e][a.checkName]=t)},a.prototype.syncCheckAll=function(){function e(a){return t.eachCols(function(e,t){"checkbox"===t.type&&(t[i.checkName]=a)}),a}var t=this,i=t.config,a=t.layHeader.find('input[name="layTableCheckbox"]');a[0]&&(k.checkStatus(t.key).isAll?(a[0].checked||(a.prop("checked",!0),t.renderForm("checkbox")),e(!0)):(a[0].checked&&(a.prop("checked",!1),t.renderForm("checkbox")),e(!1)))},a.prototype.getCssRule=function(a,i){var e=this.elem.find("style")[0],e=e.sheet||e.styleSheet||{},e=e.cssRules||e.rules;layui.each(e,function(e,t){if(t.selectorText===".laytable-cell-"+a)return i(t),!0})},a.prototype.fullSize=function(){var e=this,t=e.config,a=t.height;e.fullHeightGap&&((a=E.height()-e.fullHeightGap)<135&&(a=135),e.elem.css("height",a)),a&&(a=parseFloat(a)-(e.layHeader.outerHeight()||38),t.toolbar&&(a-=e.layTool.outerHeight()||50),t.totalRow&&(a-=e.layTotal.outerHeight()||40),t.page&&(a=a-(e.layPage.outerHeight()||41)-2),e.layMain.css("height",a))},a.prototype.getScrollWidth=function(e){var t=0;return e?t=e.offsetWidth-e.clientWidth:((e=document.createElement("div")).style.width="100px",e.style.height="100px",e.style.overflowY="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e)),t},a.prototype.scrollPatch=function(){var e=this,t=e.layMain.children("table"),a=e.layMain.width()-e.layMain.prop("clientWidth"),i=e.layMain.height()-e.layMain.prop("clientHeight"),l=(e.getScrollWidth(e.layMain[0]),t.outerWidth()-e.layMain.width()),n=function(e){var t;a&&i?(e=e.eq(0)).find(".layui-table-patch")[0]||((t=g('<th class="layui-table-patch"><div class="layui-table-cell"></div></th>')).find("div").css({width:a}),e.find("tr").append(t)):e.find(".layui-table-patch").remove()};n(e.layHeader),n(e.layTotal);n=e.layMain.height()-i;e.layFixed.find(T).css("height",t.height()>=n?n:"auto"),e.layFixRight[0<l?"removeClass":"addClass"](C),e.layFixRight.css("right",a-1)},a.prototype.events=function(){var l,o=this,d=o.config,i=g("body"),n={},e=o.layHeader.find("th"),r=".layui-table-cell",c=d.elem.attr("lay-filter");o.layTool.on("click","*[lay-event]",function(e){function t(e){var t=g(e.list),a=g('<ul class="layui-table-tool-panel"></ul>');a.html(t),d.height&&a.css("max-height",d.height-(o.layTool.outerHeight()||50)),i.find(".layui-table-tool-panel")[0]||i.append(a),o.renderForm(),a.on("click",function(e){layui.stope(e)}),e.done&&e.done(a,t)}var a,i=g(this),l=i.attr("lay-event");switch(layui.stope(e),H.trigger("table.tool.panel.remove"),h.close(o.tipsIndex),l){case"LAYTABLE_COLS":t({list:(a=[],o.eachCols(function(e,t){t.field&&"normal"==t.type&&a.push('<li><input type="checkbox" name="'+t.field+'" data-key="'+t.key+'" data-parentkey="'+(t.parentKey||"")+'" lay-skin="primary" '+(t.hide?"":"checked")+' title="'+(t.title||t.field)+'" lay-filter="LAY_TABLE_TOOL_COLS"></li>')}),a.join("")),done:function(){y.on("checkbox(LAY_TABLE_TOOL_COLS)",function(e){var e=g(e.elem),i=this.checked,l=e.data("key"),n=e.data("parentkey");layui.each(d.cols,function(a,e){layui.each(e,function(e,t){a+"-"+e===l&&(e=t.hide,t.hide=!i,o.elem.find('*[data-key="'+d.index+"-"+l+'"]')[i?"removeClass":"addClass"](C),e!=t.hide&&o.setParentCol(!i,n),o.resize())})})})}});break;case"LAYTABLE_EXPORT":t({list:(n=[],d.export.can&&n.push('<li data-type="checked">导出选中</li>'),d.export.all&&n.push('<li data-type="all">导出当前列表</li>'),n.join("")),done:function(e,t){var n=!1;t.on("click",function(){var e=g(this).data("type"),a=g(this),t={},i=void 0;if(!0===n)return!1;if("checked"===e){var l=k.checkStatus(d.id);if(l.data.length<1)return h.msg("请选择需要下载的数据"),!1;i=l.data.map(function(e){return e.id}).join(",")}else"all"===e&&(i="all",t=g.extend(t,d.where));n=!0,a.append('<i class="fa fa-spinner fa-spin ml-1"></i>'),layui.util.request.ajax({url:d.export.url,type:"post",data:g.extend(t,{ids:i}),cache:!1,success:function(e){var t=document.createElement("a");t.href=e.data.file,t.download=e.data.name,parent.document.body.appendChild(t),t.click(),parent.document.body.removeChild(t),n=!1,a.find("i").remove()}})})}});break;case"LAYTABLE_REFRESH":d.hasRefresh?o.reload(d):location.reload();break;case"clearFilter":var n=i.data("name");delete v[n],delete x[n],delete d.where[n],i.parents(".filterbox ").remove(),o.reload(d)}layui.event.call(this,w,"toolbar("+c+")",g.extend({event:l,config:d},{}))}),e.on("mousemove",function(e){var t=g(this),a=t.offset().left,a=e.clientX-a;t.data("unresize")||n.resizeStart||(n.allowResize=t.width()-a<=10,i.css("cursor",n.allowResize?"col-resize":""))}).on("mouseleave",function(){g(this);n.resizeStart||i.css("cursor","")}).on("mousedown",function(e){var t,a=g(this);n.allowResize&&(t=a.data("key"),e.preventDefault(),n.resizeStart=!0,n.offset=[e.clientX,e.clientY],o.getCssRule(t,function(e){var t=e.style.width||a.outerWidth();n.rule=e,n.ruleWidth=parseFloat(t),n.minWidth=a.data("minwidth")||d.cellMinWidth}))}),H.on("mousemove",function(e){n.resizeStart&&(e.preventDefault(),n.rule&&((e=n.ruleWidth+e.clientX-n.offset[0])<n.minWidth&&(e=n.minWidth),n.rule.style.width=e+"px",h.close(o.tipsIndex)),l=1)}).on("mouseup",function(e){n.resizeStart&&(n={},i.css("cursor",""),o.scrollPatch()),2===l&&(l=null)}),e.on("click",function(e){var t=g(this),a=t.find(_),i=a.attr("lay-sort");if(!a[0]||1===l)return l=2;i="asc"===i?"desc":"desc"===i?null:"asc",o.sort(t,i,null,!0)}).find(_+" .layui-edge ").on("click",function(e){var t=g(this),a=t.index(),t=t.parents("th").eq(0).data("field");layui.stope(e),0===a?o.sort(t,"asc",null,!0):o.sort(t,"desc",null,!0)});function s(e){var t=g(this).parents("tr").eq(0).data("index"),l=o.layBody.find('tr[data-index="'+t+'"]'),n=k.cache[o.key][t];return g.extend({tr:l,data:k.clearCacheKey(n),del:function(){k.cache[o.key][t]=[],l.remove(),o.scrollPatch()},update:function(e){e=e||{},layui.each(e,function(a,e){var i,t;a in n&&(t=l.children('td[data-field="'+a+'"]'),n[a]=e,o.eachCols(function(e,t){t.field==a&&t.templet&&(i=t.templet)}),t.children(r).html(i?"function"==typeof i?i(n):b(g(i).html()||e).render(n):e),t.data("content",e))})}},e)}o.elem.on("click",'input[name="layTableCheckbox"]+',function(){var e=g(this).prev(),t=o.layBody.find('input[name="layTableCheckbox"]'),a=e.parents("tr").eq(0).data("index"),i=e[0].checked,l="layTableAllChoose"===e.attr("lay-filter");l?(t.each(function(e,t){t.checked=i,o.setCheckData(e,i)}),o.syncCheckAll(),o.renderForm("checkbox")):(o.setCheckData(a,i),o.syncCheckAll()),layui.event.call(e[0],w,"checkbox("+c+")",s.call(e[0],{checked:i,type:l?"all":"one"}))}),o.elem.on("click",'input[lay-type="layTableRadio"]+',function(){var e=g(this).prev(),t=e[0].checked,a=k.cache[o.key],i=e.parents("tr").eq(0).data("index");layui.each(a,function(e,t){i===e?t.LAY_CHECKED=!0:delete t.LAY_CHECKED}),o.setThisRowChecked(i),layui.event.call(this,w,"radio("+c+")",s.call(this,{checked:t}))}),o.layBody.on("mouseenter","tr",function(){var e=g(this).index();o.layBody.find("tr:eq("+e+")").addClass(A)}).on("mouseleave","tr",function(){var e=g(this).index();o.layBody.find("tr:eq("+e+")").removeClass(A)}).on("click",".layui-table-fixed-r tr",function(){t.call(this,"row")}).on("dblclick","tr",function(){t.call(this,"rowDouble")});var t=function(e){var t=g(this);layui.event.call(this,w,e+"("+c+")",s.call(t.children("td")[0]))};o.layBody.on("change","."+S,function(){var e=g(this),t=this.value,a=e.parent().data("field"),e=e.parents("tr").eq(0).data("index");k.cache[o.key][e][a]=t,layui.event.call(this,w,"edit("+c+")",s.call(this,{value:t,field:a}))}).on("blur","."+S,function(){var a,e=g(this),i=e.parent().data("field"),t=e.parents("tr").eq(0).data("index"),l=k.cache[o.key][t];o.eachCols(function(e,t){t.field==i&&t.templet&&(a=t.templet)}),e.siblings(r).html((t=this.value,a?function(){return"function"==typeof a?a(l):b(g(a).html()||this.value).render(l)}():t)),e.parent().data("content",this.value),e.remove()}),o.layBody.on("click","td",function(e){var t=g(this),a=(t.data("field"),t.data("edit")),i=t.children(r);t.data("off")||a&&((a=g('<input class="layui-input '+S+'">'))[0].value=t.data("content")||i.text(),t.find("."+S)[0]||t.append(a),a.focus(),layui.stope(e))}).on("mouseenter","td",function(){a.call(this)}).on("mouseleave","td",function(){a.call(this,"hide")});var u="layui-table-grid-down",a=function(e){var t=g(this),a=t.children(r);e?t.find(".layui-table-grid-down").remove():!t.data("downoff")&&a.prop("scrollWidth")>a.outerWidth()&&(a.find("."+u)[0]||t.append('<div class="'+u+'"><i class="fa fa-down"></i></div>'))};o.layBody.on("click","."+u,function(e){var t=g(this).parent().children(r);o.tipsIndex=h.tips(['<div class="layui-table-tips-main" style="margin-top: -'+(t.height()+16)+"px;"+("sm"===d.size?"padding: 4px 15px; font-size: 12px;":"lg"===d.size?"padding: 14px 15px;":"")+'">',t.html(),"</div>",'<i class="fa layui-table-tips-c fa-close"></i>'].join(""),t[0],{tips:[3,""],time:-1,anim:-1,maxWidth:m.ios||m.android?300:o.elem.width()/2,isOutAnim:!1,skin:"layui-table-tips",success:function(e,t){e.find(".layui-table-tips-c").on("click",function(){h.close(t)})}}),layui.stope(e)}),o.layBody.on("click","*[lay-event]",function(){var e=g(this),t=e.attr("lay-event"),e=e.parents("tr").eq(0).data("index"),a=s.call(this,{event:t});d.autoShow&&"show"==t?g.ajax({type:"get",url:d.autoShow.replace("_id_",a.data.id),success:function(e){p.openModal(e,"详情#"+a.data.id,{shadeClose:!0,area:m.mobile?d.autoShowWidthMobile:d.autoShowWidth})},error:function(e,t){h.msg("网络错误，请刷新重试!")}}):layui.event.call(this,w,"tool("+c+")",a),o.setThisRowChecked(e)}),o.layMain.on("scroll",function(){var e=g(this),t=e.scrollLeft(),e=e.scrollTop();o.layHeader.scrollLeft(t),o.layTotal.scrollLeft(t),o.layFixed.find(T).scrollTop(e),h.close(o.tipsIndex)}),H.on("click",function(){H.trigger("table.remove.tool.panel")}),H.on("table.remove.tool.panel",function(){g(".layui-table-tool-panel").remove()}),E.on("resize",function(){o.resize()}),d.canSearch&&y.on("submit(*)",function(e){var t=e.field.wd,a={},i={},l=g(e.elem).attr("data-type");g(e.elem).attr("data-table");return"cancel"==l?(i=g.extend(d.where,{search:""}),a={where:d.treeMode?{where:i}:{where:i,page:{curr:1}}}):F!=t||0<t.length?(F=t,i=g.extend(d.where,{search:e.field.wd,searchFields:d.searchFields}),a=d.treeMode?{where:i}:{where:i,page:{curr:1}}):h.msg("请输入关键字"),o.reload(a),!1}),d.filters&&o.layHeader.on("click","*[lay-event]",function(){var e=g(this),t=e.parents("ul").data("name"),a=e.parents(".layui-table-cell").find("span").text(),i=e.attr("lay-event"),l={},n={};l[t]=i,n[t]={label:a,val:e.text()},v=g.extend(v,l),x=g.extend(x,n),d=g.extend(d,{where:g.extend(d.where,v)}),o.reload(d)}),d.treeMode&&o.layBody.off("click","[data-down]").on("click","[data-down]",function(){var e=g(this),a=e.parent("tr"),i=e.find("i").hasClass(d.tree.icon_open);o.layBody.find("tr[data-path*='"+a.data("path")+"']").each(function(){var e=g(this),t=e.find("td[data-down] i");a.data("path")!=e.data("path")?i?(e.addClass("layui-hide"),t.removeClass(d.tree.icon_open).addClass(d.tree.icon_close)):e.data("pid")==a.data("id")&&e.removeClass("layui-hide"):i?t.removeClass(d.tree.icon_open).addClass(d.tree.icon_close):t.removeClass(d.tree.icon_close).addClass(d.tree.icon_open)})})},k.init=function(a,i){i=i||{};var e=g(a?'table[lay-filter="'+a+'"]':".layui-table[lay-data]"),l="Table element property lay-data configuration item has a syntax error: ";return e.each(function(){var e=g(this),t=e.attr("lay-data");try{t=new Function("return "+t)()}catch(e){f.error(l+t)}var n=[],o=g.extend({elem:this,cols:[],data:[],id:a,hasRefresh:!1,skin:e.attr("lay-skin"),size:e.attr("lay-size"),even:"string"==typeof e.attr("lay-even")},k.config,i,t);a&&e.hide(),e.find("thead>tr").each(function(i){o.cols[i]=[],g(this).children().each(function(e){var t=g(this),a=t.attr("lay-data");try{a=new Function("return "+a)()}catch(e){return f.error(l+a)}t=g.extend({title:t.text(),colspan:t.attr("colspan")||0,rowspan:t.attr("rowspan")||0},a);t.colspan<2&&n.push(t),o.cols[i].push(t)})}),e.find("tbody>tr").each(function(e){var a=g(this),l={};a.children("td").each(function(e,t){var a=g(this),i=a.data("field");if(i)return l[i]=a.html()}),layui.each(n,function(e,t){e=a.children("td").eq(e);l[t.field]=e.html()}),o.data[e]=l}),k.render(o)}),this},r.that={},r.config={},k.eachCols=function(e,a,l){var e=r.config[e]||{},n=[],o=0;l=g.extend(!0,[],l||e.cols),layui.each(l,function(t,e){layui.each(e,function(e,a){var i;a.colGroup&&(i=0,o++,a.CHILD_COLS=[],layui.each(l[t+1],function(e,t){t.PARENT_COL_INDEX||1<i&&i==a.colspan||(t.PARENT_COL_INDEX=o,a.CHILD_COLS.push(t),i+=parseInt(1<t.colspan?t.colspan:1))})),a.PARENT_COL_INDEX||n.push(a)})});var i=function(e){layui.each(e||n,function(e,t){return t.CHILD_COLS?i(t.CHILD_COLS):void("function"==typeof a&&a(e,t))})};i()},k.checkStatus=function(e){var a=0,i=0,l=[],e=k.cache[e]||[];return layui.each(e,function(e,t){t.constructor!==Array?t[k.config.checkName]&&(a++,l.push(k.clearCacheKey(t))):i++}),{data:l,isAll:!!e.length&&a===e.length-i}},k.setChecked=function(e,t,a){i(e)&&((k.cache[e]||[])[t][options.checkName]=a)},k.resize=function(e){e?i(e)&&r.that[e].resize():layui.each(r.that,function(){this.resize()})},k.reload=function(e,t){t=t||{};e=i(e);if(e)return t.data&&t.data.constructor===Array&&delete e.data,k.render(g.extend(!0,{},e,t))},k.render=function(e){e=new a(e);return r.call(e)},k.clearCacheKey=function(e){return delete(e=g.extend({},e))[k.config.checkName],delete e[k.config.indexName],e},k.init(),e(w,k)});